
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>CS Notebook</title>
  <meta name="author" content="Tian">

  
  <meta name="description" content="Life and computer science notebook from Puncsky">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://puncsky.github.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <style type="text/css">
    body {
      padding-bottom: 40px;
    }
    h1 {
      margin-bottom: 15px;
    }
    img {
      max-width: 100%;
    }
    .sharing, .meta, .pager {
      margin: 20px 0px 20px 0px;
    }
    .page-footer p {
      text-align: center;
    }
  </style>
  <script src="/javascripts/libs/jquery.js"></script>
  <script src="/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/bootstrap.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="CS Notebook" type="application/atom+xml">
  
  

</head>

<body   >
  <nav role="navigation"><div class="navbar navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <a class="brand" href="/">CS Notebook</a>

      <div class="nav-collapse">
        <ul class="nav">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>


        <ul class="nav pull-right" data-subscription="rss">
          <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
          
        </ul>

        
          <form class="pull-right navbar-search" action="http://google.com/search" method="get">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:puncsky.github.com" />
              <input class="search-query" type="text" name="q" results="0" placeholder="Search"/>
            </fieldset>
          </form>
        
      </div>
    </div>
  </div>
</div>
</nav>
  <div class="container">
    <div class="row-fluid">
      <div class="span9">
  
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/05/14/ren-sheng-shi-yuan/">人生十愿</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-14T04:18:00-04:00" pubdate data-updated="true">May 14<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>毕业啦！</p>

<p>世事总不尽如人意，而贪心如我者，尝试写下人生的十个愿望；倘若某日能够实现十之八九，也就算是此生无悔啦！</p>

<ol>
<li>月高风黑的时候总是可以拉上三五好友宵夜。老到住进养老院的时候总有大爷大妈陪着打麻将。</li>
<li>亲朋好友，还有我，都能够快乐健康地活着，不求有多大的出息，但求日子过得欢喜，无论多舒适还是多苦逼，都能够坚持自己选择的路，得瑟得瑟屁颠屁颠地走下去。</li>
<li>有个萌妹子一起玩儿，我们都有健美的体魄心态和性格，开开心心玩上一辈子。</li>
<li>拥有一家自己的互联网公司，创造有趣有用的产品，这是时代赋予青年们的使命。感激上苍让我们CSer成为时代的弄潮儿。</li>
<li>拿到一个PhD学位，不仅是因为“谁有知识我就对谁佩服得五体投地”，而且理想主义的说，他们至少对人类知识做出了一丁点儿的贡献。完全没有贡献？那就不要浪费时间啦！</li>
<li>写一本好书、绘一幅好画、填一篇好诗词、吟一支小曲儿、拍一部好电影。</li>
<li>有精力、财力或者智力帮助他人，尤其是年轻人。</li>
</ol>


<p>剩下的三个，以后再许！</p>

<p>EOF</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/04/06/dynamo-kv-store/">Dynamo: Amazon&#8217;s Highly Available Key-value Store (SOSP&#8217;07)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-06T14:16:00-04:00" pubdate data-updated="true">Apr 6<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>From <a href="http://www.allthingsdistributed.com/2007/10/amazons_dynamo.html">Amazon</a></p>

<h3>Comments</h3>

<p>Dynamo successfully builds a highly available and scalable data store, which sacrifice consistency under certain failure scenarios but is eventually consistent. The design is huge and involves a huge number of details. However, the paper could not specify all of them. Some meaningful parts are missing: what are the supporting techniques used in Dynamo? How it is compared to other existing KV distributed store systems? Are there any possible extensions or future works?</p>

<p>This paper assumes that security concerns could be ignored for its internal use. Theoretically, security problems is still possible. At least, how can the administrator detect these attacks? e.g. sybil attacks.</p>

<p>The author tried three partition schemes. The latter versions decouple partitioning and partition placement. The placement is changeable at run time. Consequently, the strategy 3 has a better efficiency. And the system recovers faster and it is easier to archive. However, the key space is partitioned equally into Q partitions, and every node assume Q/S tokens per node. However, the strategy 3 in Figure 7 is a little confusing. In my opinion, the author should specify that the span each node is responsible for is SIMILAR IN SIZE to each other, instead of exactly EQUAL IN SIZE to each other.</p>

<h3>1. Problem</h3>

<ul>
<li>How to build a highly available key-value storage system (which will be applied to productions with demanding applications)?</li>
<li>Assumptions:

<ol>
<li>Query model: Simple KV store with read/write operations on small objects (&lt;= 1 MB).</li>
<li>ACID properties: Weak consistency and no isolation guarantees for high availability.</li>
<li>Efficiency: Commodity machines. Stringent latency requirements specified by SLAs.

<ul>
<li><strong>SLA</strong> (service level agreements): a client/server agreement on clear bounds

<ul>
<li>SLA should NOT be stated in terms of mean/median response time (Some custom with longer history may require more processing and thus the performance may be ignored.)</li>
<li>Dynamo: <strong>99.9%</strong> of the distribution based on a cost-benefit analysis.</li>
<li>Can be customized.</li>
</ul>
</li>
</ul>
</li>
<li>No security concerns: because of internal use.</li>
</ol>
</li>
</ul>


<h3>2. Challenges</h3>

<ul>
<li>How to achieve a strongly consistent data access interface?

<ul>
<li>Data replication algorithms. Strong consistency and high data availability cannot be achieved simultaneously. Traditionally, consistency comes first.</li>
</ul>
</li>
<li>How to increase availability on failure-prone commodity clusters?

<ul>
<li>Optimistic replication techniques -> conflicting changes to be resolved -> <strong>WHEN</strong> and <strong>WHO</strong>?

<ul>
<li><strong>WHEN</strong> during writes or reads?

<ul>
<li>Traditionally, conflict is resolved during writes and keep the read complexity simple.</li>
<li>Dynamo: rejecting writes -> poor customer experience: writes should never be rejected. <strong>(always-writable)</strong></li>
</ul>
</li>
<li><strong>WHO</strong> data store or the application?

<ul>
<li>data store: ONLY last write wins</li>
<li>the application: more flexible</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Others

<ul>
<li>Incremental scalability</li>
<li>Symmetry (P2P)</li>
<li>Decentralization</li>
<li>Heterogeneity</li>
</ul>
</li>
</ul>


<h3>3. Solution</h3>

<ul>
<li>Key ideas

<ul>
<li>Sacrifice consistency under certain failure scenarios but is eventually-consistent</li>
<li>object versioning</li>
<li>application-assisted conflict resolution</li>
</ul>
</li>
</ul>


<h4>3.1 System Architecture</h4>

<h5>Summary</h5>

<table border="1">
 <tbody><tr>
  <td>
  <p align="center"><b>Problem</b></p>
  </td>
  <td>
  <p align="center"><b>Technique</b></p>
  </td>
  <td>
  <p align="center"><b>Advantage</b></p>
  </td>
 </tr>
<tr>
  <td>
   <p align="center">Partitioning</p>
  </td>
  <td>
  <p align="center">Consistent Hashing</p>
  </td>
  <td>
  <p align="center">Incremental Scalability</p>
  </td>
 </tr>
 <tr>
  <td>
  <p align="center">High Availability for writes</p>
  </td>
  <td>
  <p align="center">
  Vector clocks with reconciliation during reads</p>
  </td>
  <td>
  <p align="center">Version size is decoupled from update rates.</p>
  </td>
 </tr>
 <tr>
  <td><p align="center">Handling temporary failures</p>
  </td>
  <td>
  <p align="center">Sloppy Quorum and hinted handoff</p>
  </td>
  <td>
  <p align="center">
  Provides high availability and durability guarantee
  when some of the replicas are not available.</p>
  </td>
 </tr>
 <tr>
  <td>
  <p align="center">
  Recovering from permanent failures</p>
  </td>
  <td>
  <p align="center">Anti-entropy using Merkle trees</p>
  </td>
  <td>
  <p align="center">Synchronizes divergent replicas in the background.</p>
  </td>
 </tr>
 <tr>
  <td>
  <p align="center">Membership and failure detection</p>
  </td>
  <td>
  <p align="center">Gossip-based membership protocol and failure
  detection.</p>
  </td>
  <td>
  <p align="center">Preserves symmetry and avoids having a centralized
  registry for storing membership and node liveness information.</p>
  </td>
 </tr>
</tbody>
</table>


<ul>
<li>System Interface

<ul>
<li><em>[object/list of objects with context] get(key)</em></li>
<li><em>put(key, context, object)    // context encodes system metadata about the object</em></li>
<li>context and object are opaque</li>
<li>MD5</li>
</ul>
</li>
<li>Dynamic Partition

<ul>
<li>Introduce <em>virtual nodes</em> as a variant of consistent hashing.</li>
</ul>
</li>
<li>Replication

<ul>
<li>Every <strong>coordinator</strong> node stores data locally and replicates them at the following <em>N-1</em> nodes in the ring.</li>
<li>The N physical machines forms a <strong>preference list</strong>.</li>
</ul>
</li>
<li>Data Versioning</li>
<li>(Successful) Execution of put() and get()

<ul>
<li>HTTP request</li>
<li>How to select a node? two ways:

<ol>
<li><strong>load balancer</strong> route it to any random node in the ring. If the node is not in the top N of the requested key&#8217;s preference list, the request is forwarded to the first among the top N nodes in the preference list.</li>
<li><strong>partition-aware client library</strong> route it directly to the coordinator</li>
</ol>
</li>
<li>R: min number of nodes that must participate in a successful read.</li>
<li>W: min number of nodes that must participate in a successful write.</li>
<li><em>R+W>N</em> -> quorum-like system</li>
<li>How to define a successful write?

<ul>
<li>> = W-1 nodes respond</li>
</ul>
</li>
</ul>
</li>
<li>(Unsuccessful) Execution of put() and get()</li>
<li>Membership

<ul>
<li>DHT + virtual nodes

<h5>Implementation</h5></li>
</ul>
</li>
</ul>


<h5>Lessons Learned</h5>

<ul>
<li>Dynamo&#8217;s configurations

<ul>
<li>Business logic specific reconciliation</li>
<li>Timestamp based reconciliation</li>
<li>High performance read engine</li>
</ul>
</li>
<li><em>N, R, W</em>

<ul>
<li>N -> durability of each object</li>
<li>W, R -> availability, durability, and consistency</li>
<li>Dynamo: (3,2,2)</li>
</ul>
</li>
<li>Performance or Durability?

<ul>
<li>Durability can be sacrificed to lower the 99.9% latency by a factor of 5, in which object buffers will be periodically written to the disk by a <em>writer thread</em>.</li>
</ul>
</li>
<li>Load balance

<ol>
<li>T random tokens per node and partition by token value.

<ul>
<li>Schemes for partitioning and partition placement are intertwined.
a) adding a new node costs a lot but has a low priority (should not affect the customer performance) -> slow
b) key ranges change and Merkle trees (hash trees) need re-calculation.
c) randomness -> hard to archive the entire key spaces.</li>
</ul>
</li>
<li>T random tokens per node and equal sized partitions.</li>
<li>Q/S tokens per node, equal-sized partitions.</li>
</ol>
</li>
</ul>


<h3>4. Conclusion</h3>

<ul>
<li>“Always writable” asynchronous replication</li>
<li>Update may not propagate all replicas</li>
<li>put() creates a new and immutable version of data</li>
<li>get() may return multiple versions of data</li>
<li>Reconcile divergent versions</li>
<li>When: during reads</li>
<li>Who: system itself (syntactic reconciliation) client application (semantic reconciliation)</li>
</ul>


<p>EOF</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/01/30/zhuan-numbers-everyone-should-know/">[Repost] Numbers Everyone Should Know</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-30T11:19:00-05:00" pubdate data-updated="true">Jan 30<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I seldom repost unoriginal notes in this blog. However, this time&#8230;</p>

<p>Jeff Dean, a brilliant engineer at Google, gave a talk a while ago listing the numbers every engineer should know. I copied these from here.</p>

<hr />

<table>
 <tbody><tr><td>  L1 cache reference                   </td><td class="c"> 0.5 ns                               
 </td></tr><tr><td>  Branch mispredict                    </td><td class="c"> 5 ns                                 
 </td></tr><tr><td>  L2 cache reference                   </td><td class="c"> 7 ns                                 
 </td></tr><tr><td>  Mutex lock/unlock                    </td><td class="c"> 100 ns                               
 </td></tr><tr><td>  Main memory reference                </td><td class="c"> 100 ns                               
 </td></tr><tr><td>  Compress 1K bytes with Zippy         </td><td class="c"> 10,000 ns       </td><td class="c"> 0.01 ms 
 </td></tr><tr><td>  Send 1K bytes over 1 Gbps network    </td><td class="c"> 10,000 ns       </td><td class="c"> 0.01 ms 
 </td></tr><tr><td>  Read 1 MB sequentially from memory   </td><td class="c"> 250,000 ns      </td><td class="c"> 0.25 ms 
 </td></tr><tr><td>  Round trip within same datacenter    </td><td class="c"> 500,000 ns      </td><td class="c"> 0.5 ms  
 </td></tr><tr><td>  Disk seek                            </td><td class="c"> 10,000,000 ns   </td><td class="c"> 10 ms   
 </td></tr><tr><td>  Read 1 MB sequentially from network  </td><td class="c"> 10,000,000 ns    </td><td class="c"> 10 ms   
 </td></tr><tr><td>  Read 1 MB sequentially from disk     </td><td class="c"> 30,000,000 ns   </td><td class="c"> 30 ms   
 </td></tr><tr><td>  Send packet CA-&gt;Netherlands-&gt;CA      </td><td class="c"> 150,000,000 ns  </td><td class="c"> 150 ms  
 </td></tr></tbody>
</table>


<hr />

<p>Where</p>

<ul>
<li>1 ns = 10<sup>(-9)</sup> seconds</li>
<li>1 ms = 10<sup>(-3)</sup> seconds</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/01/27/hadoopdb-vldb-09/">HadoopDB (VLDB&#8217;09)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-27T15:50:00-05:00" pubdate data-updated="true">Jan 27<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://db.cs.yale.edu/hadoopdb/hadoopdb.html">Yale DB</a></p>

<h3>Comments</h3>

<p>Two things could be done to improve HadoopDB</p>

<ol>
<li>Integrate the file system for local database with HDFS. In the design of HadoopDB, they are separated which means that the more space one part is preallocated and the less space the other part has. It is not scalable because the administrator has to divide by himself. We could investigate a way to let the database run on the HDFS directly. We can modify the database&#8217;s file descriptor directly or we can add an additional layer between the database and the HDFS.</li>
<li>Set up a better scheduler. It is mentioned in the paper that the original version of hadoop fair scheduler is not so good. It is locally greedy and simply does not consider the big picture much. &#8220;Quincy: Fair Scheduling for Distributed Computing Clusters&#8221; advances a graph data structure for global cost model, which has a very good performance, increasing the throughput up to 40%.</li>
</ol>


<h3>1. Problem</h3>

<p>Large analytical data management with commodity clusters</p>

<h3>2. Challenges</h3>

<ul>
<li>Performance and efficiency

<ul>
<li>hadoop

<ul>
<li>is not for structured data analysis</li>
<li>scale well</li>
<li>open source, without cost</li>
</ul>
</li>
</ul>
</li>
<li>scalability, fault-tolerance, and flexibility

<ul>
<li>Previous parallel db fit into tens of nodes, not thousand of nodes.

<ul>
<li>not scale well for failures, heterogeneous machines, performance untested</li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>3. Solutions</h3>

<ul>
<li>MapReduce (Hadoop) + parallel db (or single-node DBs) = HadoopDB
  Translation layer: Hive
  Communication layer: Hadoop
  Database layer: PostgreSQL (or MySQL, &#8230; JDBC)</li>
<li>Components

<ol>
<li>Database Connector

<ul>
<li>Interface among dbs on nodes</li>
<li>extends InputFormat class -> InputFormat Implementation lib</li>
<li>JDBC-complaint</li>
</ul>
</li>
<li>Catalog

<ul>
<li>metainformation as XML = connection para + metadata</li>
</ul>
</li>
<li>Data Loader

<ul>
<li>Global Hasher: MR, repartition raw data from HDFS to NO. of nodes</li>
<li>Local Hasher: copy from HDFS, repartition the partition into chunks</li>
<li>Better load balance than Hadoop</li>
</ul>
</li>
<li>SQL - MR - SQL (SMS) Planner

<ul>
<li>extend Hive for

<ul>
<li>open and low cost</li>
<li>each table stored separately in HDFS, low performance in multi-table trans.</li>
</ul>
</li>
<li>intercept normal Hive flow in

<ol>
<li>update MetaStore before query execution</li>
<li>between query plan generation and MR jobs
 retrieve fields, determine partition keys
 traverse DAG bottom-up
only support filter, select, aggregation</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li>Extend performance [23] with fault tolerance and heterogeneous node exp

<ul>
<li>TODO: modify the current task scheduler, connect not straggler node but the replicas.</li>
</ul>
</li>
<li>Exp on EC2

<ul>
<li>Hadoop</li>
<li>HadoopDB</li>
<li>Vertica</li>
<li>DBMS-X</li>
</ul>
</li>
</ul>


<h3>4. Conclusion</h3>

<ul>
<li>HadoopDB&#8217;s performance &lt; parallel db for
  PostgreSQL (not column-store, not compression)
  Hadoop and Hive are young</li>
<li>performance, heterogeneous environ., fault tolerance, flexibility</li>
</ul>


<h3>Related Readings</h3>

<p>[23] A Comparison of Approaches to Large Scale Data Analysis
[6] Scope [11] Hive [24] C-store [4] What is the right way to measure scale?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/01/14/gc-garbage-collection-in-java/">GC(Garbage Collection) in Java</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-14T00:18:00-05:00" pubdate data-updated="true">Jan 14<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>本文摘录自<a href="http://www.amazon.com/Thinking-Java-4th-Bruce-Eckel/dp/0131872486">Thinking in Java</a></p>

<h2>1. The method  <code>finalize()</code></h2>

<p><code>finalize()</code>使用时，会在GC释放空间之前被调用到，目的是在GC的时候做一些特殊的清理工作；但<strong>finalize()绝不是C++里面的destructor，因为</strong></p>

<p>1.对象<strong>不一定会</strong>被GC (而C++里析构函数一定会被调用到)</p>

<p>2.GC不等于析构</p>

<p>既然有GC，Java就没有必要用到析构函数，所以如果有需要在GC时候额外做些事情，就使用finalize()做最后的清理工作，<strong>尽管它不一定会被调用到，除非JVM没有内存空间了</strong>。</p>

<p>3.GC仅和内存有关</p>

<p>既然Java本身内存回收问题就被GC解决了，为什么还要finalize()呢？<strong>因为，Java可能内嵌其他语言的代码，如果有类似C的内存处理函数malloc()，就必须要手动写free()。</strong>因此，finalize()极少会被用到。</p>

<p>C++创建对象的位置有两种，一是创建在本地的stack上，自动销毁于本段代码的回花括号处，另一个是创建在heap上，必须用<strong>delete</strong>手动销毁。Java不允许创建本地对象，必须使用<strong>new</strong>，但是既然有了GC就不用delete.</p>

<p>总之，要记住的是，GC和finalize()并不总会被调用到。</p>

<p>finalize()可以用到debug，代码如下</p>

<figure class='code'><figcaption><span>TerminationCondition.java</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
</span><span class='line'>    <span class="kt">boolean</span> <span class="n">checkedOut</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span><span class='line'>    <span class="n">Book</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">checkOut</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">checkedOut</span> <span class="o">=</span> <span class="n">checkOut</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kt">void</span> <span class="nf">checkIn</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">checkedOut</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">finalize</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">if</span><span class="o">(</span><span class="n">checkedOut</span><span class="o">)</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Error: checked out.&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="c1">// Normally, you’ll also do this:</span>
</span><span class='line'>        <span class="c1">// super.finalize(); // Call the base-class version</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TerminationCondition</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">//static Test monitor = new Test();</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">Book</span> <span class="n">novel</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span><span class='line'>      <span class="c1">// Proper cleanup:</span>
</span><span class='line'>      <span class="n">novel</span><span class="o">.</span><span class="na">checkIn</span><span class="o">();</span>
</span><span class='line'>      <span class="c1">// Drop the reference, forget to clean up:</span>
</span><span class='line'>      <span class="k">new</span> <span class="nf">Book</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span><span class='line'>      <span class="c1">// Force garbage collection &amp; finalization:</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">gc</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="cm">/* output:</span>
</span><span class='line'><span class="cm"> Error: checked out.</span>
</span><span class='line'><span class="cm"> */</span>
</span></code></pre></td></tr></table></div></figure>


<p>此处，<code>System.gc()</code> 强制<code>finalize()</code>必须执行。<strong>如果有finalize(),一般情况下，父类的finalize()也必须被执行到</strong>，所以<code>Book.finalize()</code>中有<code>super.finalize()</code>。</p>

<h2>2. GC的工作机制</h2>

<p>Java中在heap上new东西并不像其他语言那么expensive，几乎和其他语言在stack上创建对象一样快。</p>

<p>非Java的GC机制：<em>reference counting</em> 数对象被引用了多少次，当等于零时就被清理掉。</p>

<p>Java的机制：<strong><em>adaptive generational stop-and-copy mark-and-sweep.</em></strong> 所有未死的对象都可以追溯到stack或者static storage上的一个引用，形成一个个web。这时候，也有不同的处理方式：</p>

<ol>
<li><em>stop-and-copy</em>. 如果程序停下来了，将活的对象拷贝到新的heap上，垃圾就被留在了原来的heap。新heap上的对象也可以被排列得更加紧凑(compact)了。有两个问题：

<ul>
<li>保持两个heap</li>
<li>周期性拷贝，即便没有new新的东西，或者产生的垃圾很少，会导致浪费，所以需要另一个机制处理这种特殊的情况</li>
</ul>
</li>
<li><em>mark-and-sweep</em>. 比较慢，但是在产生少量垃圾或者没有垃圾时候非常快。做法是，标记活对象，所有的标记完成后，扫除没有标记的对象。</li>
</ol>


<p>如何做到adaptive地进行转化呢？JVM的内存分布在很多大的block当中。大的对象，可以独占block，不拷贝，而是增加其<em>generation count</em>，内含小对象的block则会被拷贝并整理。JVM会进行监视,如果所有对象都很稳定,GC效率降低的话,就切换到<em>mark-and-sweep</em>;同样, JVM会注意其效果,要是heap出现很多碎片,就会切换回<em>stop-and-copy</em>。</p>

<p>EOF</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/01/08/clrs-2-advanced/">CLRS 2: Advanced</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-08T16:43:00-05:00" pubdate data-updated="true">Jan 8<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>IV Advanced Design and Analysis Techniques Introduction 357</h2>

<ul>
<li>Three important but more sophisticated techniques used in designing and analyzing efficient algorithms:

<ol>
<li>dynamic programming

<ul>
<li>used to optimize problems in which we make a set of choices to get optimal solution</li>
<li>store the solution to each such subproblem in case it should reappear.</li>
</ul>
</li>
<li>greedy algorithms

<ul>
<li>used to optimize problems in which we make a set of choices to get optimal solution</li>
<li>make each choice in a locally optimal manner. e.g. 买东西找钱算法</li>
<li>matroid theory as a mathematical basis</li>
</ul>
</li>
<li>amortized analysis

<ul>
<li>used to analyze certain algorithms that perform a sequence of similar operations.</li>
<li>Bound the cost of the entire sequence s.t. although some operations might be expensive, many others might be cheap.</li>
</ul>
</li>
</ol>
</li>
<li>We have covered before:

<ol>
<li>Divide-and-conquer</li>
<li>Randomization</li>
<li>Recurrence</li>
</ol>
</li>
</ul>


<h3>15 Dynamic Programming 359</h3>

<ul>
<li>Divide-and-conquer: subproblems are disjoint</li>
<li>Dynamic Programming: subproblems overlap.

<ul>
<li>solve subproblems just once and save it in a table, avoiding recomputing</li>
<li>applied to <strong>optimization problems</strong>: find <strong><em>a</em></strong> solution with the optimal (min/max) value</li>
<li>four steps:

<ol>
<li>Characterize the structure of an optimal solution.</li>
<li>Recursively define the value of an optimal solution.</li>
<li>Compute the value of an optimal solution, typically in a bottom-up fashion (get the result)</li>
<li>Construct an optimal solution from computed information (get how to compute the result)</li>
</ol>
</li>
</ul>
</li>
</ul>


<h4>15.1 Rod cutting 360</h4>

<ul>
<li>Input: a rod of length <em>n</em> inches. a table of prices <em>pi</em> for i = 1,2,&#8230;,n</li>
<li>Output: max revenue rn</li>
</ul>


<h4>15.2 Matrix-chain multiplication 370</h4>

<h4>15.3 Elements of dynamic programming 378</h4>

<h4>15.4 Longest common subsequence 390</h4>

<h4>15.5 Optimal binary search trees 397</h4>

<h3>16 Greedy Algorithms 414</h3>

<h4>16.1 An activity-selection problem 415</h4>

<h4>16.2 Elements of the greedy strategy 423</h4>

<h4>16.3 Huffman codes 428</h4>

<h4>16.4 Matroids and greedy methods 437</h4>

<h4>16.5 A task-scheduling problem as a matroid 443</h4>

<h3>17 Amortized Analysis 451</h3>

<h4>17.1 Aggregate analysis 452</h4>

<h4>17.2 The accounting method 456</h4>

<h4>17.3 The potential method 459</h4>

<h4>17.4 Dynamic tables 463</h4>

<h2>V Advanced Data Structures Introduction 481</h2>

<h3>18 B-Trees 484</h3>

<p>18.1 Definition of B-trees 488
18.2 Basic operations on B-trees 491 18.3 Deleting a key from a B-tree 499</p>

<h3>19 Fibonacci Heaps 505</h3>

<p>19.1 Structure of Fibonacci heaps 507
19.2 Mergeable-heap operations 510
19.3 Decreasing a key and deleting a node 518 19.4 Bounding the maximum degree 523</p>

<h3>20 van Emde Boas Trees 531</h3>

<p>20.1 Preliminary approaches 532 20.2 A recursive structure 536 20.3 The van Emde Boas tree 545</p>

<h3>21 Data Structures for Disjoint Sets 561</h3>

<p>21.1 Disjoint-set operations 561
21.2 Linked-list representation of disjoint sets 564 21.3 Disjoint-set forests 568
21.4 Analysis of union by rank with path compression 573</p>

<h2>VI Graph Algorithms</h2>

<p>￼Introduction 587</p>

<h3>22 Elementary Graph Algorithms 589</h3>

<h4>22.1 Representations of graphs 589</h4>

<ul>
<li>Sparse graphs: |E| is much less than |V|<sup>2</sup>

<ul>
<li>adjacency list Θ(V+E)</li>
</ul>
</li>
<li>Dense graphs: |E| is close to |V|<sup>2</sup> or when we need to be able to tell quickly if there is an edge connecting two given vertices.

<ul>
<li>adjacency matrices Θ(V<sup>2)</sup></li>
</ul>
</li>
<li>edge (u,v) has attribute ƒ</li>
</ul>


<h4>22.2 Breadth-first search 594</h4>

<ul>
<li>BFS with queue

<ul>
<li><em>u.color</em> (WHITE for ones having not been to, GRAY for ones in the queue, BLACK for ones having been dequeued and enqueued their white neighbors), <em>u.π</em> the predecessor, <em>u.d</em> distance</li>
</ul>
</li>
</ul>


<figure class='code'><figcaption><span>BFS_pseudo_code.c</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="n">BFS</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
</span><span class='line'>      <span class="n">initialize</span> <span class="n">vertices</span> <span class="n">except</span> <span class="n">source</span>
</span><span class='line'>      <span class="n">initialize</span> <span class="n">the</span> <span class="n">source</span> <span class="n">vertex</span>
</span><span class='line'>      <span class="n">enqueue</span> <span class="n">the</span> <span class="n">source</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">queue</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">dequeue</span> <span class="n">u</span>
</span><span class='line'>          <span class="k">for</span> <span class="n">each</span> <span class="n">white</span> <span class="n">neigbor</span>
</span><span class='line'>              <span class="n">mark</span> <span class="n">attributes</span>
</span><span class='line'>              <span class="n">enqueue</span>
</span><span class='line'>          <span class="n">u</span><span class="p">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">BLACK</span>
</span><span class='line'>      <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>22.3 Depth-first search</h4>

<ul>
<li>DFS with recursion (stack)

<ul>
<li> timestamps are integers between 1 and 2 jV j, since there is one discovery event and one finishing event for each of the jV j vertices.</li>
</ul>
</li>
</ul>


<h4>22.4 Topological sort 612</h4>

<ul>
<li>topological sort <strong>with DFS</strong></li>
<li>DAG(directed acyclic graph)</li>
<li>a <strong>topological sort</strong> of a graph as an ordering of its vertices along a horizontal line so that all directed edges go from left to right.</li>
<li>to indicate precedence among events.</li>
<li>TODO 有多个入度为0的</li>
</ul>


<figure class='code'><figcaption><span>Toplogical_sort_pseudo_code.c</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="n">toplogicalSort</span><span class="p">(</span><span class="n">G</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">call</span> <span class="n">DFS</span><span class="p">(</span><span class="n">G</span><span class="p">)</span> <span class="n">to</span> <span class="n">compute</span> <span class="n">finishing</span> <span class="n">times</span> <span class="n">v</span><span class="p">.</span><span class="n">f</span> <span class="k">for</span> <span class="n">each</span> <span class="n">vertex</span> <span class="n">v</span>
</span><span class='line'>      <span class="n">as</span> <span class="n">each</span> <span class="n">vertex</span> <span class="n">is</span> <span class="n">finished</span><span class="p">,</span> <span class="n">insert</span> <span class="n">it</span> <span class="n">onto</span> <span class="n">the</span> <span class="n">front</span> <span class="n">of</span> <span class="n">a</span> <span class="n">linked</span> <span class="n">list</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">the</span> <span class="n">linked</span> <span class="n">list</span> <span class="n">of</span> <span class="n">vertices</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>22.5 Strongly connected components 615</h4>

<ul>
<li>decomposing a directed graph into its strongly connected components <strong>with DFS</strong></li>
</ul>


<h3>23 Minimum Spanning Trees 624</h3>

<p>23.1 Growing a minimum spanning tree 625 23.2 The algorithms of Kruskal and Prim 631</p>

<h3>24 Single-Source Shortest Paths 643</h3>

<h4>24.1 The Bellman-Ford algorithm 651</h4>

<p>24.2 Single-source shortest paths in directed acyclic graphs</p>

<h4>24.3 Dijkstra’s algorithm 658</h4>

<ul>
<li>faster than Bellmen-Ford algorithm</li>
</ul>


<p>24.4 Difference constraints and shortest paths 664
24.5 Proofs of shortest-paths properties 671
655</p>

<h3>25 All-Pairs Shortest Paths 684</h3>

<p>25.1 Shortest paths and matrix multiplication 25.2 The Floyd-Warshall algorithm 693 25.3 Johnson’s algorithm for sparse graphs
686 700</p>

<h3>26 Maximum Flow 708</h3>

<h4>26.1 Flow networks 709</h4>

<ul>
<li><strong>Flow networks</strong>. Let directed graph G = (V, E) be a flow network with a capacity function c. Let s be the source of the network, and let t be the sink. A flow in G is a real-valued function f: V*V -> R that satisfies:

<ol>
<li><strong>Capacity constraint</strong>. For all u,v in V, we require 0 &lt;= f(u,v) &lt;= c(u,v)</li>
<li><strong>Flow conservation</strong>. The rate at which material enters a ver- tex must equal the rate at which it leaves the vertex.</li>
</ol>
</li>
<li>Value |f| of a flow f is the total flow out of the source minus the flow into the source. <strong>maximum-flow problem</strong>: we are given a flow network G with source s and sink t, and we wish to find a flow of maximum value.</li>
</ul>


<h4>26.2 The Ford-Fulkerson method 714</h4>

<ul>
<li>dependent on

<ol>
<li>residual networks</li>
<li>augmenting path</li>
<li>cuts</li>
</ol>
</li>
<li>We repeatedly augment the flow until the residual network has no more augmenting paths.</li>
</ul>


<p>26.3 Maximum bipartite matching 732
26.4 Push-relabel algorithms 736
26.5 The relabel-to-front algorithm 748</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/01/07/clrs-1-basics/">CLRS 1: Basics</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-07T14:55:00-05:00" pubdate data-updated="true">Jan 7<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>I Foundations</h2>

<h3>1 The Role of Algorithms in Computing 5</h3>

<h4>1.1 Algorithms 5</h4>

<p>An algorithm is thus a sequence of computational steps that transform the input into the output.</p>

<h4>1.2 Algorithms as a technology 11</h4>

<p>lg n &lt; sqrt(n) &lt; n &lt; n lg(n) &lt; n<sup>2</sup> &lt; n<sup>3</sup> &lt; n!</p>

<h3>2 Getting Started 16</h3>

<h4>2.1 Insertion sort 16</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="kt">void</span> <span class="n">insertionSort</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kt">double</span> <span class="n">key</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>          <span class="k">while</span> <span class="p">(</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
</span><span class='line'>              <span class="o">--</span> <span class="n">index</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>2.2 Analyzing algorithms 23</h4>

<p>insertion sort has a worst-case running time of Θ(n<sup>2)</sup></p>

<h4>2.3 Designing algorithms 29</h4>

<p>The divide-and-conquer approach and recursive</p>

<ul>
<li>Divide: left and right subarrays</li>
<li>Conquer: recursively sort left and right</li>
<li>Combine: merge by comparing two numbers from the sorted left and right pair by pair</li>
</ul>


<figure class='code'><figcaption><span>mergeSort.cpp</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="c1">//Input:</span>
</span><span class='line'>  <span class="c1">// A array</span>
</span><span class='line'>  <span class="c1">// size size of A</span>
</span><span class='line'>  <span class="c1">// p starting index of the span waiting to be sorted</span>
</span><span class='line'>  <span class="c1">// r ending index of the span waiting to be sorted</span>
</span><span class='line'>  <span class="c1">//Procedure:</span>
</span><span class='line'>  <span class="c1">// sort left</span>
</span><span class='line'>  <span class="c1">// sort right</span>
</span><span class='line'>  <span class="c1">// merge by comparing two numbers from the sorted left and right pair by pair</span>
</span><span class='line'>  <span class="c1">//Output:</span>
</span><span class='line'>  <span class="c1">// A sorted array </span>
</span><span class='line'>    <span class="kt">void</span> <span class="n">mergeSort</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">b</span><span class="o">+</span><span class="n">e</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>          <span class="n">mergeSort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">mid</span><span class="p">);</span>
</span><span class='line'>          <span class="n">mergeSort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
</span><span class='line'>          <span class="c1">// merge</span>
</span><span class='line'>          <span class="kt">int</span><span class="o">*</span> <span class="n">left</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">mid</span><span class="o">-</span><span class="n">b</span><span class="o">+</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span><span class='line'>          <span class="kt">int</span><span class="o">*</span> <span class="n">right</span><span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">e</span><span class="o">-</span><span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">mid</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="n">left</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">left</span><span class="p">[</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="o">-</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">e</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="n">right</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">right</span><span class="p">[</span><span class="n">e</span><span class="o">-</span><span class="n">mid</span><span class="p">]</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">e</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">left</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">right</span><span class="p">[</span><span class="n">j</span><span class="p">])</span><span class="o">?</span><span class="p">(</span><span class="n">left</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">])</span><span class="o">:</span><span class="p">(</span><span class="n">right</span><span class="p">[</span><span class="n">j</span><span class="o">++</span><span class="p">]);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">delete</span><span class="p">[]</span> <span class="n">left</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span><span class="p">[]</span> <span class="n">right</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<ul>
<li>Θ(n lg n) but not operate in place</li>
</ul>


<h3>3 Growth of Functions 43</h3>

<h4>3.1 Asymptotic notation 43</h4>

<ul>
<li><strong>O()</strong>. When we have only an <strong>asymptotic upper bound</strong>, we use O-notation.

<ul>
<li>O(g(n)) = {f(n): there exist positive constants c and n0 such that 0 &lt;= f(n) &lt;= c*g(n) for all n >= n0}.</li>
<li>if f(n) == c*g(n) is not possible, we use <strong>o()</strong></li>
</ul>
</li>
<li><strong>Θ()</strong>. When we have <strong>both an asymptotic upper bound and an asymptotic lower bound</strong>, we use Θ-notation.

<ul>
<li>Θ(g(n)) = {f(n): there exist positive constants c1, c2, and n0 such that 0 &lt;= c1<em>g(n) &lt;= f(n) &lt;= c2</em>g(n) for all n >=  n0}</li>
</ul>
</li>
<li><strong>Ω()</strong>, When we have only an <strong>asymptotic lower bound</strong>, we use omega-notation.

<ul>
<li>uppercase_omega(g(n)) = {f(n): there exist positive constants c and n0 such that 0 &lt;= c*g(n) &lt;=  f(n) for all n >= n0}</li>
<li>if f(n) == c*g(n) is not possible, we use <strong>ω()</strong></li>
</ul>
</li>
</ul>


<h4>3.2 Standard notations and common functions 53</h4>

<h3>4 Divide-and-Conquer 65</h3>

<ul>
<li>Three ways for solving recurrences

<ul>
<li>substitution method</li>
<li>recursive-tree method</li>
<li>master method

<ul>
<li>T(n) = a*T(n/b) + f(n), a>=1, b>1. It characterizes a divide- and-conquer algorithm that creates <em>a</em> subproblems, each of which is <em>1/b</em> the size of the original problem, and in which the divide and combine steps together take f(n) time.</li>
</ul>
</li>
</ul>
</li>
</ul>


<h4>4.1 The maximum-subarray problem 68</h4>

<p>In the stock market, you need to buy low and sell high. But the maximum profit does not always start at the lowest price or end at the highest price.</p>

<h5>A brute-force solution</h5>

<p>Choose 2 from n pairs of (date, price) and calculate the difference. Θ(n<sup>2)</sup></p>

<h5>A solution using divide-and-conquer</h5>

<p>A transformation: create an array of the daily change in price, and <strong>find the maximum subarray</strong>.</p>

<ul>
<li>find the max subarray on the left</li>
<li>find the max subarray on the right</li>
<li>find the max subarray crossing the middle

<ul>
<li>find max left, max right, and their sum</li>
</ul>
</li>
<li>take the max of the above</li>
</ul>


<p>TODO: codes</p>

<p>Θ(n*lg(n))</p>

<h4>4.2 Strassen’s algorithm for matrix multiplication 75</h4>

<p>O(n<sup>3)</sup> to O(n<sup>2.81)</sup></p>

<h4>4.3 The substitution method for solving recurrences</h4>

<ol>
<li>Guess the form of the solution.</li>
<li>Use mathematical induction to find the constants and show that the solution works.</li>
</ol>


<h4>4.4 The recursion-tree method for solving recurrences 88</h4>

<p>depth * height</p>

<h4>4.5 The master method for solving recurrences 93</h4>

<p><img src="http://puncsky.github.com/images/CLRS/mastermethod.png" alt="Master Method" /></p>

<h3>5 Probabilistic Analysis and Randomized Algorithms 114</h3>

<p>5.1 The hiring problem 114
5.2 Indicator random variables 118
5.3 Randomized algorithms 122
5.4 Probabilistic analysis and further uses of indicator random variables</p>

<h2>II Sorting and Order Statistics Introduction 147</h2>

<table>
  <tr>
    <th></th>
    <th>worst-case running time</th>
    <th>average-cased running time</th>
  </tr>
  <tr>
    <th>Insertion sort</th>
    <td>Θ(n^2)</td>
    <td>Θ(n^2)</td>
  </tr>
  <tr>
    <th>Merge sort</th>
    <td>Θ(n lg n)</td>
    <td>Θ(n lg n)</td>
  </tr>
  <tr>
    <th>Heapsort</th>
    <td>O(n lg n)</td>
    <td>-</td>
  </tr>
  <tr>
    <th>Quicksort</th>
    <td>Θ(n^2)</td>
    <td>Θ(n lg n) (*)</td>
  </tr>
  <tr>
    <th>Counting sort</th>
    <td>Θ(k+n)</td>
    <td>Θ(k+n)</td>
  </tr>
  <tr>
    <th>Radix sort</th>
    <td>Θ(d(n+k))</td>
    <td>Θ(d(n+k))</td>
  </tr>
  <tr>
    <th>Bucket sort</th>
    <td>Θ(n^2)</td>
    <td>Θ(n) </td>
  </tr>
</table>


<h3>6 Heapsort 151</h3>

<p>O(n lg n),Our heap data structure is not garbage-collected storage.</p>

<figure class='code'><figcaption><span>heap.hpp</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>  <span class="cp">#include &lt;cstdlib&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Heap</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">Heap</span><span class="p">()</span><span class="o">:</span><span class="n">m_array</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">m_size</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">m_maxSize</span><span class="p">(</span><span class="mi">0</span><span class="p">){}</span>
</span><span class='line'>      <span class="n">Heap</span><span class="p">(</span><span class="kt">int</span> <span class="n">maxSize</span><span class="p">);</span>
</span><span class='line'>      <span class="o">~</span><span class="n">Heap</span><span class="p">(){</span><span class="k">delete</span> <span class="p">[]</span> <span class="n">m_array</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">insert</span><span class="p">(</span><span class="n">T</span> <span class="n">item</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">isEmpty</span><span class="p">();</span>
</span><span class='line'>      <span class="n">T</span> <span class="n">fetchMax</span><span class="p">();</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">deleteMax</span><span class="p">();</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">display</span><span class="p">();</span>
</span><span class='line'>      <span class="c1">//Transfer Array&lt;T&gt; to a heap</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">arrayToHeap</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">array</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">);</span>
</span><span class='line'>      <span class="c1">//Sort the heap</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">heapSort</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">locate_down</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">locate_up</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="n">T</span><span class="o">*</span> <span class="n">m_array</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">m_size</span><span class="p">;</span><span class="c1">//num of elem stored</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">m_maxSize</span><span class="p">;</span><span class="c1">//allocated memory</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Heap</span><span class="p">(</span><span class="kt">int</span> <span class="n">maxSize</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">m_array</span><span class="o">=</span><span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="n">maxSize</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>      <span class="n">m_size</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="n">m_maxSize</span><span class="o">=</span><span class="n">maxSize</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">T</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">fetchMax</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">isEmpty</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">m_size</span><span class="o">==</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">locate_down</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">c</span><span class="o">=</span><span class="n">start</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">temp</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span><span class="p">(</span><span class="n">c</span><span class="o">&lt;=</span><span class="n">end</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span><span class="p">((</span><span class="n">c</span><span class="o">&lt;</span><span class="n">end</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">m_array</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">&lt;</span><span class="n">m_array</span><span class="p">[</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span> <span class="c1">//Pick the larger one in both childs. ATTENTION: c==end is not approved!!</span>
</span><span class='line'>              <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="n">m_array</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">&lt;</span><span class="n">m_array</span><span class="p">[</span><span class="n">c</span><span class="p">])</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>              <span class="n">temp</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">start</span><span class="p">];</span>
</span><span class='line'>              <span class="n">m_array</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">c</span><span class="p">];</span>
</span><span class='line'>              <span class="n">m_array</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">start</span><span class="o">=</span><span class="n">c</span><span class="p">;</span>
</span><span class='line'>          <span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">c</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>  <span class="c1">//overlap the top with the bottom, decrease the size, and locate_down</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">deleteMax</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">m_size</span><span class="p">];</span>
</span><span class='line'>      <span class="o">--</span><span class="n">m_size</span><span class="p">;</span>
</span><span class='line'>      <span class="n">locate_down</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">m_size</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">locate_up</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">loc</span><span class="o">=</span><span class="n">end</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">parent</span><span class="o">=</span><span class="n">end</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">temp</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span><span class="p">(</span><span class="n">parent</span><span class="o">&gt;=</span><span class="n">start</span> <span class="o">&amp;&amp;</span> <span class="n">m_array</span><span class="p">[</span><span class="n">loc</span><span class="p">]</span><span class="o">&lt;</span><span class="n">m_array</span><span class="p">[</span><span class="n">parent</span><span class="p">])</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">temp</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">loc</span><span class="p">];</span>
</span><span class='line'>          <span class="n">m_array</span><span class="p">[</span><span class="n">loc</span><span class="p">]</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">parent</span><span class="p">];</span>
</span><span class='line'>          <span class="n">m_array</span><span class="p">[</span><span class="n">parent</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
</span><span class='line'>          <span class="n">loc</span><span class="o">=</span><span class="n">parent</span><span class="p">;</span>
</span><span class='line'>          <span class="n">parent</span><span class="o">=</span><span class="n">loc</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">insert</span><span class="p">(</span><span class="n">T</span> <span class="n">item</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">m_size</span><span class="o">==</span><span class="n">m_maxSize</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="o">&lt;&lt;</span><span class="s">&quot;Heap is full&quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="k">this</span><span class="o">-&gt;~</span><span class="n">Heap</span><span class="p">();</span>
</span><span class='line'>          <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="o">++</span><span class="n">m_size</span><span class="p">;</span>
</span><span class='line'>      <span class="n">m_array</span><span class="p">[</span><span class="n">m_size</span><span class="p">]</span><span class="o">=</span><span class="n">item</span><span class="p">;</span>
</span><span class='line'>      <span class="n">locate_up</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">m_size</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">display</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">m_size</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="s">&quot; &quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">arrayToHeap</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">array</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">m_maxSize</span><span class="o">=</span><span class="n">size</span><span class="p">;</span>
</span><span class='line'>      <span class="n">m_array</span><span class="o">=</span><span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="n">m_maxSize</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>          <span class="k">this</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
</span><span class='line'>      <span class="k">this</span><span class="o">-&gt;</span><span class="n">heapSort</span><span class="p">();</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>          <span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">heapSort</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">T</span> <span class="n">temp</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="n">m_size</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">temp</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>          <span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>          <span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
</span><span class='line'>          <span class="n">locate_down</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>6.1 Heaps 151</h4>

<p>The (binary) heap data structure is an array object that we can view as a nearly complete binary tree.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="c1">// calculate by shifting the binary representation</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">parent</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">i</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">left</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">right</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>max-heap: for every node <em>i</em> other than the root, A[parent(i)]>=A[i].</li>
<li>min-heap: for every node <em>i</em> other than the root, A[parent(i)]&lt;=A[i].</li>
<li>height of a node: number of edges on the longest simple downward path from the node to a leaf.</li>
<li>height of the heap: height of its root. Θ(lg n)</li>
</ul>


<h4>6.2 Maintaining the heap property 154</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="c1">// Input:</span>
</span><span class='line'>  <span class="c1">//         A array</span>
</span><span class='line'>  <span class="c1">//     i index</span>
</span><span class='line'>  <span class="c1">//   Binary trees rooted at left(i) and right(i) are max-heaps</span>
</span><span class='line'>  <span class="c1">//   but A[i] might be smaller than its children. </span>
</span><span class='line'>  <span class="c1">// Procedure:</span>
</span><span class='line'>  <span class="c1">//     exchange A[i] with the larger one between A[left[i]] and A[right[i]]</span>
</span><span class='line'>  <span class="c1">//     maxHeapify the new sub tree</span>
</span><span class='line'>  <span class="c1">// Output:</span>
</span><span class='line'>  <span class="c1">//     This routine lets the value at A[i] float down in the max-heap. </span>
</span><span class='line'>  <span class="n">maxHeapify</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">TODO</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>T(n) &lt;= T(2*n/3) + Θ(1), T(n) = O(lg n) = O(height)</p>

<h4>6.3 Building a heap 156</h4>

<p>conduct maxHeapify upon the array from the rear to the head</p>

<p>O(n)</p>

<h4>6.4 The heapsort algorithm 159</h4>

<p>build max-heap, exchange the root with the end of heap, and maxHeapify the rest of the heap.</p>

<h4>6.5 Priority queues 162</h4>

<p>one of the most popular applications of a heap: as an efficient priority queue. It can be used to schedule jobs on a shared computer. Highest-priority job first.</p>

<figure class='code'><figcaption><span>prioqueue.hpp</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">PrioQueue</span> <span class="c1">//Min Heap</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">PrioQueue</span><span class="p">(</span><span class="kt">int</span> <span class="n">mSize</span><span class="o">=</span><span class="mi">20</span><span class="p">);</span>
</span><span class='line'>      <span class="o">~</span><span class="n">PrioQueue</span><span class="p">(){</span><span class="k">delete</span> <span class="p">[]</span> <span class="n">q</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span><span class="k">return</span> <span class="n">size</span><span class="o">==</span><span class="mi">0</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsFull</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span><span class="k">return</span> <span class="n">size</span><span class="o">==</span><span class="n">maxSize</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">Append</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">Serve</span><span class="p">(</span><span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">AdjustDown</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">AdjustUp</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">);</span>
</span><span class='line'>      <span class="n">T</span> <span class="o">*</span><span class="n">q</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="n">maxSize</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">PrioQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">PrioQueue</span><span class="p">(</span><span class="kt">int</span> <span class="n">mSize</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">maxSize</span><span class="o">=</span><span class="n">mSize</span><span class="p">;</span>
</span><span class='line'>      <span class="n">size</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="n">q</span><span class="o">=</span><span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="n">maxSize</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">PrioQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">AdjustDown</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">start</span><span class="o">&lt;</span><span class="n">end</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">parent</span><span class="o">=</span><span class="n">start</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">child</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">parent</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>          <span class="k">while</span><span class="p">(</span><span class="n">child</span><span class="o">&lt;=</span><span class="n">end</span><span class="p">)</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span><span class="p">((</span><span class="n">child</span><span class="o">&lt;</span><span class="n">end</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">&gt;</span><span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span>
</span><span class='line'>                  <span class="n">child</span><span class="o">=</span><span class="n">child</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>              <span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="n">parent</span><span class="p">]</span><span class="o">&gt;</span><span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">])</span>
</span><span class='line'>              <span class="p">{</span>
</span><span class='line'>                  <span class="n">T</span> <span class="n">temp</span><span class="o">=</span><span class="n">q</span><span class="p">[</span><span class="n">parent</span><span class="p">];</span>
</span><span class='line'>                  <span class="n">q</span><span class="p">[</span><span class="n">parent</span><span class="p">]</span><span class="o">=</span><span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">];</span>
</span><span class='line'>                  <span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">else</span> <span class="k">break</span><span class="p">;</span>
</span><span class='line'>              <span class="n">parent</span><span class="o">=</span><span class="n">child</span><span class="p">;</span>
</span><span class='line'>              <span class="n">child</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">parent</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">PrioQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">AdjustUp</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">start</span><span class="o">&lt;</span><span class="n">end</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">child</span><span class="o">=</span><span class="n">end</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">parent</span><span class="o">=</span><span class="p">(</span><span class="n">child</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>          <span class="k">while</span><span class="p">((</span><span class="n">parent</span><span class="o">&gt;=</span><span class="n">start</span><span class="p">)</span><span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="n">parent</span><span class="p">]</span><span class="o">&gt;</span><span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">]))</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>                  <span class="n">T</span> <span class="n">temp</span><span class="o">=</span><span class="n">q</span><span class="p">[</span><span class="n">parent</span><span class="p">];</span>
</span><span class='line'>                  <span class="n">q</span><span class="p">[</span><span class="n">parent</span><span class="p">]</span><span class="o">=</span><span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">];</span>
</span><span class='line'>                  <span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
</span><span class='line'>                  <span class="n">child</span><span class="o">=</span><span class="n">parent</span><span class="p">;</span>
</span><span class='line'>                  <span class="n">parent</span><span class="o">=</span><span class="p">(</span><span class="n">child</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">PrioQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Append</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">IsFull</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="c1">//throw std::Overflow;</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;overflow&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>         <span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">size</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>      <span class="n">q</span><span class="p">[</span><span class="n">size</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="k">this</span><span class="o">-&gt;</span><span class="n">AdjustUp</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span><span class="c1">//ATTENTION: n-1</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">PrioQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Serve</span><span class="p">(</span><span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">IsEmpty</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="c1">//throw std::Underflow;</span>
</span><span class='line'>          <span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">x</span><span class="o">=</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>      <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">q</span><span class="p">[</span><span class="n">size</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>      <span class="n">q</span><span class="p">[</span><span class="n">size</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="n">size</span><span class="o">--</span><span class="p">;</span>
</span><span class='line'>      <span class="k">this</span><span class="o">-&gt;</span><span class="n">AdjustDown</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="c1">//ATTENTION: n-1</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;After AdjustDown:&quot;</span><span class="o">&lt;&lt;</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="n">q</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="n">q</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>7 Quicksort 170</h3>

<p>Despite this slow worst-case running time Θ(n<sup>2)</sup> , quicksort is often <strong>the best practical choice</strong> for sorting because it is remarkably efficient on the average: its expected running time is <em>Θ(n lg n)</em>, and the <strong>constant factors hidden in the <em>Θ(n lg n)</em> notation are quite small</strong>.</p>

<h3>7.1 Description of quicksort 170</h3>

<p>Divide-and-conquer paradigm</p>

<ul>
<li>Divide: element A[q] and subarrays on the left and right, s.t. left &lt;= A[q] &lt;= right</li>
<li>Conquer: recursively sort left and right</li>
<li>Combine: NULL</li>
</ul>


<figure class='code'><figcaption><span>quickSort.cxx</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="kt">void</span> <span class="n">qSort</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">midVal</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">e</span><span class="p">];</span>
</span><span class='line'>          <span class="c1">// partition</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">e</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">midVal</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="kt">int</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">];</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
</span><span class='line'>                  <span class="n">j</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">qSort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">2</span><span class="p">);</span>
</span><span class='line'>          <span class="n">qSort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>7.2 Performance of quicksort 174</h4>

<ul>
<li>Worst-case partitioning: the partitioning routine produces one subproblem with <em>n-1</em> elements and one with <em>0</em> elements.

<ul>
<li>T(n) = T(n-1) + T(0) + Θ(n)</li>
<li>Θ(n<sup>2)</sup></li>
</ul>
</li>
<li>Best-case partitioning: even possible split

<ul>
<li>T(n) = 2T(n/2) + Θ(n)</li>
<li>Θ(n lg n)</li>
</ul>
</li>
<li>Balanced partitioning: Any split of constant proportionality yields a recursion tree of depth Θ(lg n), where the cost at each level is O(n).</li>
<li>Average case: PARTITION produces a mix of “good” and “bad” splits.

<ul>
<li>TODO</li>
</ul>
</li>
</ul>


<h4>7.3 A randomized version of quicksort 179</h4>

<p>pick the flag in the partition routine randomly (exchange with the one at the rear)</p>

<h4>7.4 Analysis of quicksort 180</h4>

<h3>8 Sorting in Linear Time 191</h3>

<p><strong>comparison sorts</strong>: merge sort, heapsort, and quicksort sharing, <strong>must make Ω(n lg n) comparisons in the worst case</strong> to sort <em>n</em> elements.</p>

<p>However, counting sort, radix sort, and bucket sort&#8230;</p>

<h4>8.1 Lower bounds for sorting 191</h4>

<h4>8.2 Counting sort 194</h4>

<p>counting sort assumes that the input consists of integers in a small range</p>

<p>Create an extra array to record the occurrence of these number and put them back into a new array as the result. We usually use counting sort when we have k = O(n), in which case the running time is Θ(n).</p>

<h4>8.3 Radix sort 197</h4>

<p>TODO? 感觉像counting sort，只不过是存了整个数，而不是数数的个数</p>

<p><a href="http://cubic.org/docs/radix.htm">Radix sort tutorial</a></p>

<ul>
<li><em>source</em>: List of bytes</li>
<li><em>source_n</em>: number of bytes to sort</li>
<li><em>dest[256]</em>: 256 lists of bytes. each list should have enough space to hold source_n elements.</li>
</ul>


<p>a pseudo-code would sort the list this way:</p>

<pre><code>for i=0 to source_n do
   dest[source[i]].append(source[i])
</code></pre>

<h4>8.4 Bucket sort 200</h4>

<p>bucket sort assumes that the input is generated by a random process that distributes elements uniformly and independently over the interval [0, 1).</p>

<p>Bucket sort divides the interval [0, 1) into n equal-sized subintervals, or buckets, and then distributes the n input numbers into the buckets. Since the inputs are uniformly and independently distributed over [0, 1), we do not expect many numbers to fall into each bucket. To produce the output, we simply sort the numbers in each bucket (e.g. insertion sort) and then go through the buckets in order, listing the elements in each.</p>

<p>Θ(n)</p>

<h3>9 Medians and Order Statistics 213</h3>

<p><strong>Selection problem</strong> selects <em>i-st</em> smallest number among a set <em>A</em> of <em>n</em> (distinct) numbers</p>

<h4>9.1 Minimum and maximum 214</h4>

<p>How to find the min in A? Best way is to iterate it once (<em>n-1</em> comparisons).</p>

<p>How to find min and max simultaneously? In fact, we can find both the minimum and the maximum using at most 3<em>n/2 comparisons. 每次取一对，自己先比较，然后大的跟max比，小的跟min比，总共只需要比3</em>n/2次。</p>

<h4>9.2 Selection in expected linear time 215</h4>

<figure class='code'><figcaption><span>randomizedSelect.cxx</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>  <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">int</span> <span class="n">randomizedSelect</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">randomizedPatition</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">)</span> <span class="p">;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">partition</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">)</span> <span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// ----------------------------------------------------------------------------</span>
</span><span class='line'>  <span class="c1">// select i-st largest number from A[p] to A[r]</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">randomizedSelect</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="n">r</span><span class="p">)</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="n">p</span><span class="p">];</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">q</span> <span class="o">=</span> <span class="n">randomizedPatition</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">r</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">q</span><span class="o">-</span><span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">k</span><span class="p">)</span> <span class="c1">// the pivot value is the answer</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="n">q</span><span class="p">];</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">)</span> <span class="c1">// on the left</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">randomizedSelect</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>      <span class="k">else</span>            <span class="c1">// on the right</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">randomizedSelect</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">q</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="n">k</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="c1">// ----------------------------------------------------------------------------</span>
</span><span class='line'>  <span class="c1">// get the index of the number in the middle </span>
</span><span class='line'>  <span class="c1">// s.t. subarray on the left &lt;= A[index] &lt;= subarray on the right</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">randomizedPatition</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span><span class="o">%</span><span class="p">(</span><span class="n">p</span><span class="o">-</span><span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">double</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">r</span><span class="p">];</span> <span class="n">A</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">partition</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">r</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="c1">// ----------------------------------------------------------------------------</span>
</span><span class='line'>  <span class="c1">// pick A[r] as the flag</span>
</span><span class='line'>  <span class="c1">// i for the left array &lt;= A[r]</span>
</span><span class='line'>  <span class="c1">// j for iterating the whole array </span>
</span><span class='line'>  <span class="c1">// finally, exchange A[r] in the middle</span>
</span><span class='line'>  <span class="c1">// return the new middle index</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">partition</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">r</span><span class="p">];</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">p</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="o">++</span> <span class="n">i</span><span class="p">;</span>
</span><span class='line'>              <span class="kt">double</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">];</span> <span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="kt">double</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">r</span><span class="p">];</span> <span class="n">A</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="c1">// ----------------------------------------------------------------------------</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="kt">double</span> <span class="n">A</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">8</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">0</span><span class="p">};</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span><span class='line'>      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">randomizedSelect</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>E[T(n)] = O(n)</p>

<h4>9.3 Selection in worst-case linear time 220</h4>

<p>O(n)</p>

<h2>III Data Structures</h2>

<ul>
<li>Data structures: techniques for representing finite dynamic sets and manipulating them on a computer.</li>
<li>Dynamic-set operations: <strong>CR(U)D 大小前后</strong>: insert, search, delete, max, min, predecessor, successor.</li>
<li>Dictionary: a dynamic set supporting insert, delete, and test membership.</li>
<li>2 categories of operations

<ul>
<li>queries</li>
<li>modifying operations</li>
</ul>
</li>
</ul>


<h3>10 Elementary Data Structures 232</h3>

<h4>10.1 Stacks and queues 232</h4>

<h5>Stack</h5>

<figure class='code'><figcaption><span>stack.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Stack</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">IsFull</span><span class="p">()</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Top</span><span class="p">(</span><span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Push</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="n">T</span> <span class="n">Pop</span><span class="p">()</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Clear</span><span class="p">()</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Sequential Stack</h5>

<figure class='code'><figcaption><span>seqstack.cxx</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;stack.h&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">SeqStack</span><span class="o">:</span><span class="k">public</span> <span class="n">Stack</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">SeqStack</span><span class="p">(</span><span class="kt">int</span> <span class="n">mSize</span><span class="p">);</span>
</span><span class='line'>      <span class="o">~</span><span class="n">SeqStack</span><span class="p">()</span> <span class="p">{</span><span class="k">delete</span> <span class="p">[]</span><span class="n">s</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">top</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsFull</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">top</span> <span class="o">==</span> <span class="n">maxTop</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">Top</span><span class="p">(</span><span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>         <span class="c1">//return the top element in x</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">Push</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="n">T</span> <span class="n">Pop</span><span class="p">();</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">Clear</span><span class="p">()</span> <span class="p">{</span> <span class="n">top</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;}</span>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">top</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">maxTop</span><span class="p">;</span>
</span><span class='line'>      <span class="n">T</span> <span class="o">*</span><span class="n">s</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">SeqStack</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">SeqStack</span><span class="p">(</span><span class="kt">int</span> <span class="n">mSize</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">maxTop</span> <span class="o">=</span> <span class="n">mSize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="n">mSize</span><span class="p">];</span>
</span><span class='line'>      <span class="n">top</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SeqStack</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Top</span><span class="p">(</span><span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">IsEmpty</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Empty&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">x</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">top</span><span class="p">];</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SeqStack</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Push</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">IsFull</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Overflow&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">s</span><span class="p">[</span><span class="o">++</span><span class="n">top</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">T</span> <span class="n">SeqStack</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Pop</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">IsEmpty</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Underflow&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">s</span><span class="p">[</span><span class="n">top</span><span class="o">--</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>SeqStackTest.cxx</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;seqstack.h&quot;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">SeqStack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">S</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">S</span><span class="p">.</span><span class="n">IsEmpty</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">S</span><span class="p">.</span><span class="n">IsFull</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">S</span><span class="p">.</span><span class="n">Push</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>          <span class="n">S</span><span class="p">.</span><span class="n">Top</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">S</span><span class="p">.</span><span class="n">IsFull</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span>  <span class="n">S</span><span class="p">.</span><span class="n">Pop</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Queue</h5>

<figure class='code'><figcaption><span>queue.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Queue</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">IsFull</span><span class="p">()</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Front</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">EnQueue</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="n">T</span> <span class="n">DeQueue</span><span class="p">()</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Clear</span><span class="p">()</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Sequential Queue</h5>

<figure class='code'><figcaption><span>seqqueue.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;queue.h&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">SeqQueue</span><span class="o">:</span><span class="k">public</span> <span class="n">Queue</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">SeqQueue</span><span class="p">(</span><span class="kt">int</span> <span class="n">mSize</span><span class="p">);</span>
</span><span class='line'>      <span class="o">~</span><span class="n">SeqQueue</span><span class="p">()</span> <span class="p">{</span> <span class="k">delete</span> <span class="p">[]</span> <span class="n">q</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">front</span> <span class="o">==</span> <span class="n">rear</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsFull</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="n">rear</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">front</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">Front</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">EnQueue</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="n">T</span> <span class="n">DeQueue</span><span class="p">();</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">Clear</span><span class="p">()</span> <span class="p">{</span> <span class="n">front</span> <span class="o">=</span> <span class="n">rear</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;}</span>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">front</span><span class="p">,</span> <span class="n">rear</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">maxSize</span><span class="p">;</span>
</span><span class='line'>      <span class="n">T</span> <span class="o">*</span><span class="n">q</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">SeqQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">SeqQueue</span><span class="p">(</span><span class="kt">int</span> <span class="n">mSize</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">maxSize</span> <span class="o">=</span> <span class="n">mSize</span><span class="p">;</span>
</span><span class='line'>      <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="n">maxSize</span><span class="p">];</span>
</span><span class='line'>      <span class="n">front</span> <span class="o">=</span> <span class="n">rear</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SeqQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Front</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">IsEmpty</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Empty&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="n">front</span><span class="p">];</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SeqQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">EnQueue</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">IsFull</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Overflow&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">q</span><span class="p">[(</span><span class="n">rear</span><span class="o">=</span><span class="p">(</span><span class="n">rear</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">maxSize</span><span class="p">)]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">T</span> <span class="n">SeqQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">DeQueue</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">IsEmpty</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Underflow&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">T</span> <span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="n">front</span><span class="p">];</span>
</span><span class='line'>      <span class="n">front</span> <span class="o">=</span> <span class="p">(</span><span class="n">front</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">maxSize</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>10.2 Linked lists 236</h4>

<h5>Linear List</h5>

<figure class='code'><figcaption><span>linearlist.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">LinearList</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">int</span> <span class="n">GetLength</span><span class="p">()</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Find</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>            <span class="c1">//return element x with index i</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">int</span> <span class="n">Search</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>                   <span class="c1">//if x is found, return its index, else -1</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">)</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>                 <span class="c1">//insert x at element Ai.</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Delete</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>                      <span class="c1">//delete element Ai</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Update</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">)</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>                 <span class="c1">//update element Ai with x</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">)</span><span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>     <span class="c1">//ouput the list to the stream</span>
</span><span class='line'>  <span class="k">protected</span><span class="o">:</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">ElemNum</span><span class="p">;</span>                                        <span class="c1">//element number in the list</span>
</span><span class='line'>  <span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Single List</h5>

<figure class='code'><figcaption><span>singlelist.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;iostream&quot;</span>
</span><span class='line'>  <span class="cp">#include &quot;linearlist.h&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">SingleList</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Node</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">private</span><span class="o">:</span>
</span><span class='line'>          <span class="n">T</span> <span class="n">element</span><span class="p">;</span>
</span><span class='line'>          <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">friend</span> <span class="k">class</span> <span class="nc">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">SingleList</span><span class="o">:</span><span class="k">public</span> <span class="n">LinearList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">public</span><span class="o">:</span>
</span><span class='line'>          <span class="n">SingleList</span><span class="p">(){</span> <span class="n">head</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;}</span>
</span><span class='line'>          <span class="o">~</span><span class="n">SingleList</span><span class="p">();</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">GetLength</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Find</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">Search</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Delete</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Update</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">void</span> <span class="n">Clear</span><span class="p">();</span>
</span><span class='line'>          <span class="kt">void</span> <span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="k">private</span><span class="o">:</span>
</span><span class='line'>          <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::~</span><span class="n">SingleList</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">GetLength</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Find</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="n">x</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Search</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">;</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span>
</span><span class='line'>              <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span>
</span><span class='line'>              <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">r</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">q</span> <span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>          <span class="n">r</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>          <span class="n">r</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">)</span> <span class="o">++</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Delete</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">))</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Underflow!&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">q</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>              <span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>              <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">)</span> <span class="o">--</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Update</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Clear</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>SingleListTest.cxx</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;singlelisti.h&quot;</span>
</span><span class='line'>  <span class="cp">#include &quot;stdio.h&quot;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">SingleList</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">LA</span><span class="p">;</span>
</span><span class='line'>      <span class="n">SingleList</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">LB</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">LA</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">LB</span><span class="p">.</span><span class="n">GetLength</span><span class="p">(),</span> <span class="mi">4</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LA</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class='line'>      <span class="n">Intersection</span><span class="p">(</span><span class="n">LA</span><span class="p">,</span> <span class="n">LB</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LA</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Double List</h5>

<figure class='code'><figcaption><span>doublelist.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;linearlist.h&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">DoubleList</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Node</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">private</span><span class="o">:</span>
</span><span class='line'>          <span class="n">T</span> <span class="n">element</span><span class="p">;</span>
</span><span class='line'>          <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">last</span><span class="p">,</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">friend</span> <span class="k">class</span> <span class="nc">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">DoubleList</span><span class="o">:</span><span class="k">public</span> <span class="n">LinearList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">public</span><span class="o">:</span>
</span><span class='line'>          <span class="n">DoubleList</span><span class="p">(){</span> <span class="n">head</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;}</span>
</span><span class='line'>          <span class="o">~</span><span class="n">DoubleList</span><span class="p">();</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">GetLength</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Find</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">Search</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Delete</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Update</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">void</span> <span class="n">Clear</span><span class="p">();</span>
</span><span class='line'>          <span class="kt">void</span> <span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="k">private</span><span class="o">:</span>
</span><span class='line'>          <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::~</span><span class="n">DoubleList</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">GetLength</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Find</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="n">x</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Search</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">;</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span>
</span><span class='line'>              <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span>
</span><span class='line'>              <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">r</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>          <span class="n">r</span><span class="o">-&gt;</span><span class="n">last</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>          <span class="n">r</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span><span class="o">-&gt;</span><span class="n">last</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">r</span><span class="o">-&gt;</span><span class="n">last</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">last</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span><span class="o">-&gt;</span><span class="n">last</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>          <span class="n">r</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span><span class="o">-&gt;</span><span class="n">last</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">)</span> <span class="o">++</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Delete</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">))</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Underflow!&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>              <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">p</span><span class="o">-&gt;</span><span class="n">last</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">last</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">last</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">)</span> <span class="o">--</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Update</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Clear</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>DoubleListTest.cxx</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;singlelisti.h&quot;</span>
</span><span class='line'>  <span class="cp">#include &quot;stdio.h&quot;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">SingleList</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">LA</span><span class="p">;</span>
</span><span class='line'>      <span class="n">SingleList</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">LB</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">LA</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">LB</span><span class="p">.</span><span class="n">GetLength</span><span class="p">(),</span> <span class="mi">4</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LA</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LA</span><span class="p">.</span><span class="n">Delete</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LA</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>10.3 Implementing pointers and objects 241</h4>

<ul>
<li>How do we implement pointers and objects in languages that do not provide them?

<ol>
<li>A multiple-array representation of objects

<ul>
<li>for example, <code>next[]</code>, <code>key[]</code>, <code>prev[]</code> can store the values and indexes</li>
</ul>
</li>
<li>A single-array representation of objects

<ul>
<li>for example, store triple &lt; key, next, prev > in one single array</li>
</ul>
</li>
</ol>
</li>
<li>Allocating and freeing objects

<ul>
<li>a <strong>garbage collector</strong> is responsible for determining which objects are unused.</li>
<li>We keep the free objects in a singly linked list, which we call the <strong>free list</strong>. Each object in the representation is either in list L or in the free list, but not in both. Free list acts like a stack. 在free list的head操作</li>
</ul>
</li>
</ul>


<h4>10.4 Representing rooted trees 246</h4>

<ul>
<li>Binary trees</li>
<li>Rooted trees with unbounded branching

<ul>
<li><strong>left-child, right-sibling representation</strong>

<ol>
<li><em>x.left-child</em> points to the leftmost child of node <em>x</em></li>
<li><em>x.right-sibling</em> points to the sibling of <em>x</em> immediately to its right.</li>
<li>If node <em>x</em> has no children, then <em>x.left-child</em> = NIL, and if node x is the rightmost child of its parent, then <em>x.right-sibling</em> = NIL.</li>
</ol>
</li>
</ul>
</li>
<li>Other tree representations. Many are possible.</li>
</ul>


<figure class='code'><figcaption><span>binarytree.hpp</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
<span class='line-number'>199</span>
<span class='line-number'>200</span>
<span class='line-number'>201</span>
<span class='line-number'>202</span>
<span class='line-number'>203</span>
<span class='line-number'>204</span>
<span class='line-number'>205</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">struct</span> <span class="n">BTNode</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="p">()</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">lChild</span> <span class="o">=</span> <span class="n">rChild</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>          <span class="n">lChild</span> <span class="o">=</span> <span class="n">rChild</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">l</span><span class="p">,</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">r</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>          <span class="n">lChild</span> <span class="o">=</span> <span class="n">l</span><span class="p">;</span>
</span><span class='line'>          <span class="n">rChild</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">T</span> <span class="n">element</span><span class="p">;</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">lChild</span><span class="p">,</span> <span class="o">*</span><span class="n">rChild</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">BinaryTree</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">BinaryTree</span><span class="p">()</span> <span class="p">{</span><span class="n">root</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;}</span>
</span><span class='line'>      <span class="o">~</span><span class="n">BinaryTree</span><span class="p">()</span> <span class="p">{};</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">Clear</span><span class="p">();</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">Root</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">MakeTree</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">left</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">right</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">BreakTree</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">left</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">right</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">PreOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">));</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">InOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">));</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">PostOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">));</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">Size</span><span class="p">();</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">Copy</span><span class="p">();</span>
</span><span class='line'>  <span class="k">protected</span><span class="o">:</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">root</span><span class="p">;</span>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">Clear</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="o">&amp;</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">PreOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">InOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">PostOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">Size</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">Clear</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'>      <span class="k">friend</span> <span class="k">class</span> <span class="nc">BIterator</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Root</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span><span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">x</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">MakeTree</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">left</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">right</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">||</span> <span class="o">&amp;</span><span class="n">left</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">right</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">left</span><span class="p">.</span><span class="n">root</span><span class="p">,</span> <span class="n">right</span><span class="p">.</span><span class="n">root</span><span class="p">);</span>
</span><span class='line'>      <span class="n">left</span><span class="p">.</span><span class="n">root</span><span class="o">=</span><span class="n">right</span><span class="p">.</span><span class="n">root</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">BreakTree</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">left</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">right</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">root</span><span class="o">||&amp;</span><span class="n">left</span><span class="o">==&amp;</span><span class="n">right</span><span class="o">||</span><span class="n">left</span><span class="p">.</span><span class="n">root</span><span class="o">||</span><span class="n">left</span><span class="p">.</span><span class="n">root</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="n">x</span><span class="o">=</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">;</span>
</span><span class='line'>      <span class="n">left</span><span class="p">.</span><span class="n">root</span><span class="o">=</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">;</span> <span class="n">right</span><span class="p">.</span><span class="n">root</span><span class="o">=</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">;</span>
</span><span class='line'>      <span class="k">delete</span> <span class="n">root</span><span class="p">;</span>
</span><span class='line'>      <span class="n">root</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">PreOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">))</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">PreOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">root</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">PreOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">Visit</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">);</span>
</span><span class='line'>          <span class="n">PreOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">);</span>
</span><span class='line'>          <span class="n">PreOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">InOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">))</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">InOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">root</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">InOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">InOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">);</span>
</span><span class='line'>          <span class="n">Visit</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">);</span>
</span><span class='line'>          <span class="n">InOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">PostOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">))</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">PostOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">root</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">PostOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span><span class="n">x</span><span class="p">),</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">PostOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">);</span>
</span><span class='line'>          <span class="n">PostOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">);</span>
</span><span class='line'>          <span class="n">Visit</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Size</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">Size</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Size</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">t</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">Size</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">)</span> <span class="o">+</span> <span class="n">Size</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Copy</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">t</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">q</span><span class="o">=</span><span class="k">new</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">);</span>
</span><span class='line'>      <span class="n">q</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="o">=</span><span class="n">Copy</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">);</span>
</span><span class='line'>      <span class="n">q</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="o">=</span><span class="n">Copy</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">q</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Clear</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Clear</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Clear</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">Clear</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">);</span>
</span><span class='line'>          <span class="n">Clear</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">);</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">t</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">BIterator</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="n">T</span><span class="o">*</span> <span class="n">GoFirst</span><span class="p">(</span><span class="k">const</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">bt</span><span class="p">)</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="n">T</span><span class="o">*</span> <span class="n">Next</span><span class="p">()</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Traverse</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="k">const</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">bt</span><span class="p">);</span>
</span><span class='line'>  <span class="k">protected</span><span class="o">:</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">r</span><span class="p">,</span> <span class="o">*</span><span class="n">current</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BIterator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Traverse</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="k">const</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">bt</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">T</span><span class="o">*</span> <span class="n">p</span><span class="o">=</span><span class="n">GoFirst</span><span class="p">(</span><span class="n">bt</span><span class="p">);</span>
</span><span class='line'>      <span class="k">while</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">Visit</span><span class="p">(</span><span class="o">*</span><span class="n">p</span><span class="p">);</span>
</span><span class='line'>          <span class="n">p</span><span class="o">=</span><span class="n">Next</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">IInOrder</span><span class="o">:</span><span class="k">public</span> <span class="n">BIterator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">IInOrder</span><span class="p">(</span><span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">bt</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mSize</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">r</span><span class="o">=</span><span class="n">bt</span><span class="p">.</span><span class="n">root</span><span class="p">;</span>
</span><span class='line'>          <span class="n">current</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>          <span class="n">s</span><span class="o">=</span><span class="k">new</span> <span class="n">SeqStack</span><span class="o">&lt;</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="o">&gt;</span><span class="p">(</span><span class="n">mSize</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">T</span><span class="o">*</span> <span class="n">GoFirst</span><span class="p">(</span><span class="k">const</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">bt</span><span class="p">);</span>
</span><span class='line'>      <span class="n">T</span><span class="o">*</span> <span class="n">Next</span><span class="p">();</span>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="n">SeqStack</span><span class="o">&lt;</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*&gt;</span> <span class="o">*</span><span class="n">s</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h3>11 Hash Tables 253</h3>

<ul>
<li>A hash table is an effective data structure for implementing dictionaries.

<ul>
<li>searching worst-case Θ(n)</li>
<li>expected O(1)</li>
<li>Instead of using the key as an array index directly, the array index is computed from the key.</li>
</ul>
</li>
</ul>


<h4>11.1 Direct-address tables 254</h4>

<p>Assume that universe U of keys is reasonably small, and no two elements have the same key. Store <em>x</em> at <em>T[x.key]</em> or at the place which <em>T[x.key]</em> points to. (Even storing the key is not necessary.)</p>

<p><strong>slot</strong>: position in the array (direct-address table)</p>

<h4>11.2 Hash tables 256</h4>

<ul>
<li>What if universe U is large? namely, K of keys stored in a dictionary is much smaller than the universe U of all possible keys?</li>
<li>hash function! element is stored in slot <em>h(k)</em> instead of <em>key</em> directly

<ul>
<li>h: U -> {0, 1, &#8230;, m-1}</li>
<li>An element with key <em>k</em> <strong>hashes</strong> to slot <em>h(k)</em>.</li>
</ul>
</li>
<li>Problem: <strong>collision</strong>: two keys may hash to the same slot.

<ul>
<li>Collision resolution by chaining, insert at the head

<ul>
<li> Given a hash table T with m slots that stores n elements, we define the <strong><em>load factor α</em></strong> for T as n/m, that is, <strong><em>the average number of elements stored in a chain</em></strong>.</li>
<li>Worst-case: Θ(n) + T(compute hash)</li>
<li>Average-case: <strong>simple uniform hashing</strong> Any given element is equally likely to hash into any of the m slots, independently of where any other element has hashed to.

<ul>
<li>Unsuccessful, Θ(1+α) n个元素m个slot，期望是每个slot有n/m个元素</li>
<li>Successful, Θ(1+α)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<h4>11.3 Hash functions 262</h4>

<ul>
<li>What makes a good hash function? less collisions

<ul>
<li>satisfies (approximately) the assumption of simple uniform hashing.</li>
<li>Hash values are independent of any patterns that might exist in the data.</li>
</ul>
</li>
<li>Interpreting keys as natural numbers</li>
<li>Different ways:

<ol>
<li><strong>division method</strong>. h(k) = k mod m.</li>
<li><strong>multiplication method</strong>. h(k) = ⦏m(kA mod 1)⦎, “kA mod 1” means the fractional part of kA, that is, kA - ⦏kA⦎. (A is a constant, 0 &lt; A &lt; 1) Knuth suggests that A = 0.618</li>
<li><strong>universal hashing</strong>. select the hash function at random from a carefully designed class of functions.</li>
</ol>
</li>
</ul>


<h4>11.4 Open addressing 269</h4>

<ul>
<li><strong>Open addressing</strong>: all elements occupy the hash table itself. <strong>No chaining</strong>. load factor α can never exceed 1.

<ul>
<li>We <strong>compute the sequence of slots to be examined by probing until we find an empty slot</strong>. The probing sequence has not to be &lt; 0, 1, &#8230;, m-1 > with Θ(n), but <strong>depends upon the key being inserted</strong>. To determine which slots to probe, we extend the hash function to include the probe number (starting from 0) as a second input.  &lt; h(k,0), h(k,1), &#8230;, h(k,m-1) >.</li>
<li>注意，此处不能标记删除的slot为NIL，因为这样一来就无法读到存在其后面部分的散列 值了。解决方法是，用DELETED取代NIL.</li>
<li><strong><em>uniform hashing</em></strong>: the probe sequence of each key is equally likely to be any of the m! permutations of &lt; 0, 1, &#8230;, m-1 >.

<ul>
<li>linear probing

<ul>
<li>h(k,i) = (h&#8217;(k)+i) mod m</li>
<li>problem: primary <strong>clustering</strong></li>
</ul>
</li>
<li>quadratic probing

<ul>
<li>h(k,i) = (h&#8217;(k) + c1*i + c2*i<sup>2)</sup> mod m</li>
<li>problem: secondary clustering</li>
</ul>
</li>
<li>double hashing

<ul>
<li>one of the best</li>
<li>h(k,i) = (h1(k) + i*h2(k)) mod m</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<h4>11.5 Perfect hashing 277</h4>

<ul>
<li><strong>Perfect hashing</strong>: O(1) memory accesses are required to perform a search in the worst case.

<ul>
<li>two levels of hashing with universal hashing at each level.</li>
<li>By choosing the first-level hash function well, we can limit the expected total amount of space used to O(n)</li>
<li>TODO 证明很复杂的样子</li>
</ul>
</li>
</ul>


<p><a href="http://www.cplusplus.com/reference/map/map/">C++ std::map的使用</a></p>

<h3>12 Binary Search Trees 286</h3>

<ul>
<li>Performance

<ul>
<li>Best-case Θ(lgn)</li>
<li>Average-case Θ(lgn)</li>
<li>Worst-case Θ(n)</li>
</ul>
</li>
<li>Improve? red-black trees(height O(lg n)), B-trees(secondary storage)</li>
</ul>


<figure class='code'><figcaption><span>bstree.hpp</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include&quot;dynamic.h&quot;</span>
</span><span class='line'>  <span class="cp">#include&quot;binarytree.h&quot;</span>
</span><span class='line'>  <span class="c1">//二叉搜索树：</span>
</span><span class='line'>  <span class="c1">//所有节点的关键字不同，此树要么为空，要么：</span>
</span><span class='line'>  <span class="c1">//1. 左不空，则左所有&lt;根</span>
</span><span class='line'>  <span class="c1">//2. 右不空，则右所有&gt;根</span>
</span><span class='line'>  <span class="c1">//3. 左右子树均为二叉搜索树</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">BSTree</span><span class="o">:</span><span class="k">public</span> <span class="n">DynamicSet</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">BSTree</span><span class="p">()</span> <span class="p">{</span><span class="n">root</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;}</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Search_recursion</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Search_iteration</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Insert_recursion</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Insert_iteration</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Remove</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">protected</span><span class="o">:</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">root</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Search</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Insert</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Search_recursion</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">Search</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Search</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">p</span><span class="p">)</span> <span class="k">return</span> <span class="n">NotPresent</span><span class="p">;</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="k">return</span> <span class="n">Search</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="k">return</span> <span class="n">Search</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">return</span> <span class="n">Success</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Search_iteration</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="o">=</span><span class="n">root</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span> <span class="k">return</span> <span class="n">Success</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">NotPresent</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Insert_recursion</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span><span class="c1">//ATTENTION: situation when root is NULL</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="p">)</span> <span class="k">return</span> <span class="n">Insert</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="k">else</span> <span class="n">root</span><span class="o">=</span><span class="k">new</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Insert</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">p</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="c1">//ATTENTION: situation when root is NULL</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>         <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="o">==</span><span class="nb">NULL</span><span class="p">)</span>
</span><span class='line'>         <span class="p">{</span>
</span><span class='line'>             <span class="n">p</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="o">=</span><span class="k">new</span> <span class="n">BTNode</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>             <span class="k">return</span> <span class="n">Success</span><span class="p">;</span>
</span><span class='line'>         <span class="p">}</span>
</span><span class='line'>         <span class="k">else</span> <span class="k">return</span> <span class="n">Insert</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>         <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="o">==</span><span class="nb">NULL</span><span class="p">)</span>
</span><span class='line'>         <span class="p">{</span>
</span><span class='line'>             <span class="n">p</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="o">=</span><span class="k">new</span> <span class="n">BTNode</span><span class="p">(</span><span class="n">T</span><span class="p">);</span>
</span><span class='line'>             <span class="k">return</span> <span class="n">Success</span><span class="p">;</span>
</span><span class='line'>         <span class="p">}</span>
</span><span class='line'>         <span class="k">else</span> <span class="k">return</span> <span class="n">Insert</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">return</span> <span class="n">Duplicate</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Insert_iteration</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="o">=</span><span class="n">root</span><span class="p">,</span> <span class="o">*</span><span class="n">q</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">q</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span> <span class="k">return</span> <span class="n">Duplicate</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">p</span><span class="o">=</span><span class="k">new</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">root</span><span class="p">)</span> <span class="n">root</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="n">q</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">else</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">Success</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Remove</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>     <span class="c1">// TODO</span>
</span><span class='line'>      <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>12.1 What is a binary search tree? 286</h4>

<p><strong>binary-search-tree property: left &lt;= middle &lt;= right</strong>: Let x be a node in a binary search tree. If y is a node in the left subtree of x, then y.key &lt;= x.key. If y is a node in the right subtree of x, then y.key >= x.key.</p>

<p>How to print out keys in sorted order? <strong>inorder tree walk</strong> (other walks: <strong>preorder</strong>, <strong>postorder</strong>)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="kt">void</span> <span class="n">inorderTreeWalk</span><span class="p">(</span><span class="n">Node</span><span class="o">*</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">inorderTreeWalk</span><span class="p">(</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
</span><span class='line'>          <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="p">.</span><span class="n">key</span><span class="p">;</span>
</span><span class='line'>          <span class="n">inorderTreeWalk</span><span class="p">(</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)};</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>
Θ(n)</p>

<h4>12.2 Querying a binary search tree 289</h4>

<ul>
<li>Iteration is faster in <em>Java, C, Python&#8230;</em> Recursion is fairly expensive compared to iteration (in general) because it requires the allocation of a new stack frame.</li>
<li>Recursion <em>might</em> be faster in <em>functional programming language</em>.</li>
</ul>


<h5>Searching</h5>

<ul>
<li>Recursive version: Me? search left? search right?</li>
<li>Iteration version: Use pointer p. p->key? p=p->left? p=p->right?</li>
</ul>


<h5>Min and Max</h5>

<p>left-most leaf and right-most leaf</p>

<h5>Successor and predecessor</h5>

<ul>
<li>Successor: If x has right subtree, return max(x.right), else find in parents.</li>
<li>Predecessor: If x has left subtree, return max(x.left), else find in parents.</li>
</ul>


<h4>12.3 Insertion and deletion 294</h4>

<h4>12.4 Randomly built binary search trees 299</h4>

<h3>13 Red-Black Trees 308</h3>

<h4>13.1 Properties of red-black trees 308</h4>

<ul>
<li>A BST with one extra <strong>color</strong> bit of storage per node.</li>
<li>Red-black properties:

<ol>
<li>Every node is either red or black.</li>
<li>The root is black.</li>
<li>Every leaf (NIL) is black.</li>
<li>If a node is red, then both its children are black.</li>
<li>For each node, all simple paths from the node to descendant leaves contain the same number of black nodes.</li>
</ol>
</li>
<li>sentinel T.nil for all all pointers to NIL (replacing leaves and parent of root)</li>
<li><strong>black-height</strong> of node x: number of black nodes on the path from (not including) x to a leaf</li>
<li><strong>black-height</strong> of a tree: black-height of its root</li>
<li>A red-black tree with n <strong>internal</strong> nodes has height at most 2*log(n+1)</li>
</ul>


<h4>13.2 Rotations 312</h4>

<ul>
<li><strong>Rotation</strong>: A local operation in a search tree that preserves the binary-search-tree property.

<ul>
<li>left-rotation: counter-clockwise

<ul>
<li>set y</li>
<li>turn y&#8217;s left subtree into x&#8217;s right subtree</li>
<li>link x&#8217;s parent to y</li>
<li>put x on y&#8217;s left</li>
</ul>
</li>
<li>right-rotation: clockwise</li>
</ul>
</li>
</ul>


<h4>13.3 Insertion 315</h4>

<ol>
<li>insert node <strong>red</strong> <em>z</em> into tree T (Property 5)</li>
<li>auxiliary procedure RBinsertFixup(T,z) to re-color and rotate.Ω

<ul>
<li>Property 2 is violated if <em>z</em> is the root</li>
<li>Property 4 is violated if <em>z</em>&#8217;s parent is red.

<ul>
<li>Case 1: <em>z</em>&#8217;s uncle <em>y</em> is red: z上两层反色</li>
<li>Case 2: <em>z</em>&#8217;s uncle <em>y</em> is black and <em>z</em> is a right child: around z left-rotate</li>
<li>Case 3: <em>z</em>&#8217;s uncle <em>y</em> is black and <em>z</em> is a left child: around z&#8217;s parent right-rotate + z上两层反色</li>
</ul>
</li>
<li>O(lgn)</li>
</ul>
</li>
</ol>


<h4>13.4 Deletion 323</h4>

<ul>
<li>RBTransplant(T, u, v): replace subtree u with subtree v. mind NIL node as parent and leaves</li>
</ul>


<p>TODO</p>

<h3>14 Augmenting Data Structures 339</h3>

<h4>14.1 Dynamic order statistics 339</h4>

<ul>
<li><strong>Rank of an element</strong>: its position in the linear order of the set</li>
<li><strong>Order-statistic tree</strong>: RBT + every node has <em>x.size</em> = number of nodes in its subtree, including the NIL sentinel

<ul>
<li><em>x.size</em> = <em>x.left.size</em> + <em>x.right.size</em> + 1</li>
</ul>
</li>
</ul>


<h4>14.2 How to augment a data structure 345</h4>

<ol>
<li>Choose an underlying data structure.</li>
<li>Determine additional information to maintain in the underlying data structure.</li>
<li>Verify that we can maintain the additional information for the basic modifying operations on the underlying data structure.</li>
<li>Develop new operations.</li>
</ol>


<h4>14.3 Interval trees 348</h4>

<p>RBT + operations on dynamic sets of intervals.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/26/xie-zai-2012shi-jie-mo-ri-zhi-hou/">迟到的世界末日</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-26T07:56:00-05:00" pubdate data-updated="true">Dec 26<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>卖个关子，先谈“反求诸己”，文章的最后再谈“世界末日”、为什么世界末日会“迟到”。</p>

<p>“反求诸己”是一件让人乐此不疲但又烦躁不堪的事情。思考人类终极命运这种问题难道不是令人沮丧的么？人固有一死，早死晚死都得死；尽管我们一再强调，有些尸体是重于泰山的，但“你会死”这种陈述终归不是什么好话。打情骂俏、调戏人的和反调戏的除外。可是，即便是这样，我们还是对生命的爱与执着这种“反熵(anti-entropy)”的事情乐此不疲，不是么？就好像，尽管李安大师《少年派的奇幻之旅》血腥重口版很可能是事实，我们仍然选择相信浪漫励志版，不是么？</p>

<p>这篇文章是我个人的年终总结。</p>

<h2>一</h2>

<p>这些年来每一年我都至少会写一篇文章，反思我这一年又做了哪些特二的事情，下一年还想做哪些不那么二的事情。</p>

<ul>
<li>2009:<a href="http://user.qzone.qq.com/66542118/blog/1233947326">可堪回首月明中 —— 我的大一上年度总结：抒情与思索</a></li>
<li>2010: <a href="http://user.qzone.qq.com/66542118/blog/1282297569">1.读下去 写下去</a>，<a href="http://user.qzone.qq.com/66542118/blog/1282635925">2.无知即力量 早选择早超生</a>，<a href="http://user.qzone.qq.com/66542118/blog/1282728122">3.士不可不弘毅 一切为了CMU</a></li>
<li>2011: <a href="http://user.qzone.qq.com/66542118/blog/1294034387">Farewell to 2010 – A Year Encompassed by Chaos</a></li>
<li>2012: <a href="http://user.qzone.qq.com/66542118/blog/1325429981">Farewell to 2011 – Good Morning, My Evolution!</a></li>
</ul>


<p>也许更早的时候我也写过不少东西，只不过都删除掉了，没有存档。看着这些个人总结，我突然特别好奇：大学四年的不同时期，我都在想些什么？</p>

<p>首先，生活一直在别处，我似乎不是那么的开心。</p>

<p>这是可以理解的，一来要直面自己做得不对的事情，二来这些文字大多落笔于寒冬，而寒冬本身就是令人很绝望的存在。除夕辞旧迎新其实是有象征意味的，只有将过往的积郁都扫除掉，打上一剂名叫希望的鸡血，才能勇敢地重装上阵。所以当我回味百里屠苏“屠绝鬼气，苏醒人魂”的时候，内心难免会感动不已。</p>

<p>值得注意的是，“生活在别处”有别于“逃离”，“逃离”是一种可悲的心态，你总以为“如果我在其他的地方，我会活得更好”，但是，<strong>你我都知道，境由心生，你在哪和你活的好不好无关丝毫</strong>。“生活在别处”应该是一种直面、自嘲，更重要的是，是一种向往，对人类内心深处亘古不变的真理的向往，这些向往是什么？是<strong>爱、怜悯、自豪、同情、恐惧、牺牲和荣耀</strong>。没有了这些向往，我们追求的不是爱，而是情欲；我们的苦难里没有任何人失去真正有价值的东西；我们的胜利里没有任何让我们热血沸腾的奇迹；最为糟糕的是，没有了怜悯和同情，我们的哀伤很可能是无病呻吟，不值一提；那些让心儿为之颤抖的，不是灵魂，而是内分泌。</p>

<p>其次，我一直在抱怨自己读书太少。</p>

<p>我逐渐患上了一种奇特的拖延症。多年前，我成为了Sir Winston Churchill的<a href="http://www.yingyudaxue.com/books/advanced-english/speech-on-hitlers-invasion-of-the-u-s-s-r">&#8220;I have only one purpose, the destruction of Hitler, and my life is much simplified thereby.&#8221;</a>这句话的脑残粉。从那以后，每当我打算专心做一件事情的时候，其他的所有都会被抛诸脑后。可惜的是，这些事都不是一天两天能够做完的，而我记性又不大好，这就导致，每当这些事情完成的时候，那些被抛诸脑后的事情也就已然类似于抛猪脑后了。读书少是表现之一，所以，多年来的这些总结都在反复提醒自己多读多写。</p>

<p>另外一个表现是，<strong>尽管我很幸运的能够遇见很多对我照顾有加的前辈和亲友，我都一直心怀感激，但因为我这个不好的拖延加遗忘症，导致疏于联络。这很可能是我这辈子最最于心有愧的事情。</strong></p>

<p>再次，我一直幼稚地想要说再见。</p>

<p>真正的忘记是不需要说再见的，诶？我要说什么来着，不记得了……</p>

<p>很多观念在自我知觉到的时候，其实已经是inception之后好多年了。让人略感欣慰的是，神说，要有光，于是便有了光(Let there be light and there was light.)两年前我说我想去CMU，后来我不是就拿到CMU的offer了么？</p>

<h2>二</h2>

<p>今年二月到七月，我在清华园附近一套公寓客厅的小隔间里住了五个月。这个隔间没有窗户，仅容得下一床一桌一柜，没有什么其他可以落脚的空间了。总之，这个隔间如同棺材一般。</p>

<p>我对自己说，你总有一天会面对这样一个类似的境况：<strong>一个人住，没有人管，要找事干</strong>。一个人住和集体生活是很不一样的，周围都是同龄人，你会清楚地知道，大概在某些时期，你大概要做什么事情；没有人管是指，这时候是没有指标可以衡量你人之为人，你不需要为了绩点上课，不需要为了为了妹子犯二，不需要为了糊口而奔走。要找事干，<strong>这是一个实验，假如把你放在一张全新的白纸的中央，没有任何的指引，你会如何书写你自己的人生？</strong>路径依赖实在是太过稀疏平常，以至于，你能看到那些优秀的人，总是借着惯性的东风，从一个优秀奋斗到另一个优秀；而令我恐惧的是，这份“优秀”终归是给别人的答卷，GD唱的好，</p>

<blockquote><p>Do you know what&#8217;s worth fighting for?  When it&#8217;s not worth dying for? Does it take your breath away? And you feel yourself suffocating?</p></blockquote>

<p>事实上，后来的结果是，我没有想出个所以然，做事的效率也不高，代码量可以忽略不计，书也没看多少本，电视剧倒是看了不少……当时每天十一二点回棺材，很累，看看视频，看着看着就凌晨了。</p>

<p>那么，如何防止这种事情的发生呢？</p>

<ol>
<li><strong>建立循环向上的deadline体系。</strong>
 正是因为很多事情不是一天两天能够做完的，也不是预先可以精准估计的，所以，与其一再拖延deadline，不如偷工减料，先交付原本(alpha)版本给deadline再说，根据第一份的deadline交付的成果，动态调整下一步的deadline。我们的目标是，不求一步登天、一鸣惊人，但求信心十足、反复升级。</li>
<li><strong>量化评估的缺失，和碎片化的不规律的生活，是一切罪恶的源泉。</strong>
 自从2011年的暑假以来，我的生活就被微博活生生地給割碎了。众所周知，微博耗时且上瘾。也是那个时候开始，我潜心学习计算机科学技术。我所阅读和书写的一切几乎都是电子版的东西，然而，这些电子版的东西是极其难以量化的：他们都只不过是稀疏平常的文件而已。多年以来，你所有现有的“本能的成就评估体系”直接就不管用了。你不会摩挲着刚看完一本厚厚的书自鸣得意，也不会抚摸着厚厚的一沓报告心花怒放；因为他们都只是拖拖鼠标的事情。现在我”量化成就“的解决方案是，在github上搭建博客<a href="http://www.puncsky.com">CS Notebook</a>来整理发布“原创的”笔记，自我激励。我会在后面具体解释。</li>
<li><strong>不求自决于SNS，但求增加登陆的难度。</strong>
 微博的易上瘾性，来自于其浅薄的多元性多样性，看上去是在获取知识，实际上不动脑子。我大三的时候一度采用过这样的方法来限制人人：不带手机，白天不在宿舍，晚上十点回宿舍，十一点熄灯，让一切内部外部限制因素使得，一天之中能上网的时间，最多只有一个小时。后来，时过境迁，学计算机自然无法离开google……我曾今使用过&#8221;stayFocused&#8221;插件(发现米国同学也在用它，看来注意力问题是不分种族的:D)，不大有效，因为必要时候我可以换浏览器……最后只能是限制而不根绝。</li>
<li><strong>欲速则不达，多元和多样性是趣味的源泉。</strong>
 这件事情在之前的文章<a href="http://www.puncsky.com/blog/2012/11/17/chun-tian-zai-na-li-ya-chun-tian-zai-na-li-%3F/">《春天在哪里呀春天在哪里》</a>中讨论过，此处补充卢梭《忏悔录》中的一个例子。

<blockquote><p>如果我必须用心去读一位作家的著作，刚读几页，我的精力就会涣散，并且立即陷入迷惘状态。即使我坚持下去，也是白费，结果是头昏眼花，什么也看不懂了。但是如果我连续研究几个不同的问题，即使毫不间断，我也能轻松愉快地一个一个地寻思下去，这个问题可以消除另一问题所带来的疲劳，用不着休息一下脑筋。于是，我就在我的治学计划中充分利用我所发现的这一特点，对一些问题交替进行研究，这样，即使我整天用功也不觉得疲倦了。</p></blockquote></li>
</ol>


<h2>三</h2>

<p>今年几乎最大的收获，是如何管理个人知识。这一部分比较技术，不感兴趣的可以直接略过。</p>

<p>我愈发地感觉到，<strong>笔记是陪伴终身的宝贵资本。</strong>众所周知，知识就是力量，是人类的宝贵财富。苏格拉底认为，真正的知识甚至智慧是信手拈来脱口而出的，所以他好辩论，喜言谈，不屑写作；而令人讽刺的是，后人却只能通过柏拉图所著《理想国》来研习苏格拉底的思想。<strong>同样的知识，可悲的是前者只能是个人的财富，而后者却是旷日持久留给全人类的资本。</strong>当然，<strong>我这里记录的渣渣远不及先贤们的万一，但就个人而言，十多年来，好歹也写了不少，如果写下的文字不能保存，那岂不白白消受了光阴？学而时习之不亦说乎？笔记不是为了保存下来便于复习，要它作甚？</strong>那些失落的文字就是白白浪费的财富，只有记录下来，才有可能成为流动的有用的财富——资本。我多年来曾有幸目睹别人无数的笔记，那些消磨了他们多少日夜的，漂亮的、精炼的、整齐的、可爱的、帅气的、威力巨大的笔记，仅仅因为是手工书写的，就那么埋没了……感谢上苍赐予人类互联网，为何不把死的笔记放到互联网上？上网即永生！</p>

<p>上网放哪？我一度是evernote重度使用者，后来我发现两个严重的局限：</p>

<ol>
<li>格式混乱。evernote的富文本是带格式的，所有的文字，只要带格式，就难以统一，需要排版(个人习惯认为，所有的文字，应该各级标题与正文分离清楚，便于整理成大纲或者索引)；需要排版，就很麻烦，笔记原本就应该是一件省心省事的事情。最天打雷劈的是，你们这群同样的笔记居然在不同的操作系统下，或者同样的操作系统不同的打开方式下(web/built-in)，显示得不一样！格式控表示完全无法容忍！！另外，web版evernote有bug，难用且载入速度奇慢！</li>
<li>来源混杂。在网上做文摘的时候，经常会使用evernote，导致的问题是，原创的笔记和他人的文章混杂在一起，假以时日，混乱不堪。我本来就是个懒人，能把你记下来就不错了，你还要我经常过来给你分类加标签，烦不烦？</li>
</ol>


<p>因此，我需要把原创笔记抽离出来，有没有一种带格式，但又简单高效的、轻量级的、甚至有版本控制的工具来记录他们呢？</p>

<p>我几乎在同一时期，通过各种渠道缘定<a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">markdown</a>，是她把书写变成了一件趣事。最初是在github社区，我惊奇地发现，纯文本加上极其简单的标签，居然可以转化成带格式的html页面！然后是在Michael和Bryan的课上，发现教授们的笔记要么是纯文本，要么是这种类似的带格式的html页面，甚至是格式一致的pdf页面！再后来我惊奇的发现，美祺大叔之前推荐过，李笑来老师也在推荐用<a href="https://github.com/mojombo/jekyll/wiki">Jekyll</a>在github上搭建静态博客，其基础竟然也是采用的markdown!</p>

<p>最后，这一套设施确定为：</p>

<ol>
<li>文本编辑: <a href="http://macromates.com/">textmate 2</a>, vim实在不适合编辑大段文字，尤其是中文</li>
<li>版本管理: <a href="https://github.com/">github</a></li>
<li>格式: <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">markdown</a></li>
<li>生成并发布网页: <a href="http://octopress.org/">octopress</a>，它是<a href="https://github.com/mojombo/jekyll/wiki">Jekyll</a>的一种带主题和插件的变种</li>
<li>生成页面供自己使用: <a href="https://chrome.google.com/webstore/detail/made/oknndfeeopgpibecfjljjfanledpbkog">MaDe</a>，很方便的chrome插件</li>
</ol>


<h2>四</h2>

<p>这篇文章写作严重超时，就先交付一份alpha版吧！</p>

<p>交付之前，回答在我心目中，什么是“世界末日”，为什么世界末日会“迟到”。</p>

<p>上帝创始之初，因为亚当夏娃偷吃苹果的缘故，将他们驱逐出伊甸园。此处，苹果是智慧果，教人明辨是非。伊甸园象征着快乐无忧。可是，人出于自由意志，食用了智慧果，被逐离了伊甸园。这才是世界的初始，<strong>人选择了独立意志、明辨是非、反求诸己；就有了欢天喜地，饱暖思淫欲；也必然地有了快意恩仇，羡慕嫉妒恨；只要有一天我还嬉笑怒骂着、严肃活泼着、要死要活着；只要有一天我还深深地爱着自己、还深深地恨着自己，那传说中的伊甸园、那传说中的世界末日就还没有来到。尽管它可能就在昨天、明天、或者后天。</strong></p>

<p>《美丽新世界》里如是说：</p>

<blockquote><p>“我不需要舒服。我需要上帝，需要诗，需要真正的危险，需要自由，需要善，需要罪恶。&#8221;</p>

<p>&#8220;实际上你要求的是受苦受难的权利。&#8221;</p>

<p>&#8220;那好，&#8221;野蛮人挑战地说，&#8221;我现在就要求受苦受难的权利。&#8221;</p>

<p>&#8220;你还没说要求衰老、丑陋和阳痿的权利；要求害梅毒和癌症的权利；要求食物匮乏的权利；讨人厌烦的权利；要求总是战战兢兢害怕明天会发生的事的权利。要求害伤寒的权利；要求受到种种难以描述的痛苦折磨的权利。&#8221;</p>

<p>良久的沉默。</p>

<p>&#8220;这一切我都要求。&#8221;野蛮人终于说道。</p></blockquote>

<p>最后，许下我的新年愿望：<strong>我希望我明年写总结的时候，在加州。</strong></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/26/bu-tan-sheng-huo/">请不要和我谈生活，我没有生活</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-26T07:53:00-05:00" pubdate data-updated="true">Dec 26<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>隔壁的Bryant老兄每次寒暄 how&#8217;s it going? 的时候他也许会感到很奇怪，为啥对面这小兄弟怎么连招呼都打得一愣一愣的。而对面的小兄弟我，每次都本能地将其反应成“最近过得怎样？”，然后进一步考虑，该如何回答这个”特殊疑问句“，总不能每次都说&#8221;Not bad&#8221;吧；但实际的情况是，还真没有什么好说的，而且这句话本来就是“how are you?”类型的句子，是不需要认真回答的，一个hi/hello/hey 足矣。</p>

<p>每次父母找我聊天，问东问西，总以为我在国外的生活应该是丰富多彩的，如果我问题回答地不够给力，他们就会反复感叹类似于好桑心啊好桑心，都没有共同语言啊，老了啦，之类的感叹。这让我十分汗颜，不是我不跟你们讲，而是我真没有什么好讲的，我不是在看书就是在刷微博就是在吃东西就是在去吃东西的路上就是梦里面吃东西，但这些事务并不是什么可以可以诉说甚至引以为豪的事情。大家往往以旅游、靓照、趴踢、大餐为乐为豪，是，确实很欢乐，我也超级喜欢，但是，我只是觉得，这些对我来说不重要，至少对于现在的我说不重要。</p>

<p>我也知道我眼界不甚开阔，很狭隘。雅礼是一所非常好的学校，我在这里遇到了无数精英，这群精英不是来自Ivy就是来自Stanford, Berkeley, 就是Oxford, Cambridge, 就是清北浙上交复旦等大牛校的帅哥靓女。是，他们寒暑假可以上到青藏高原下到日本海沟，南到极地游轮抢拍鲸鱼北到阿拉斯加入住爱斯基摩的雪屋。是，他们博闻广志风流倜傥，有太多太多值得我学习的地方，我对他们、对这个世界敬畏有加。但这丝毫不妨碍我作为国关人的自豪与自嘲，但这丝毫不妨碍我这辈子对家乡的思念和出逃，但这丝毫不妨碍我对我所热爱的选择的偏执与傲娇。</p>

<p>我从来就不曾想过出国是一件舒舒服服安享幸福生活的事情，过去没有，现在没有，将来也不会有！请不要和我谈生活，我没有生活。请不要问我后不后悔，我只怕我不能够爱得深切，我只怕我不能够屁颠屁颠地、但却矢志不渝地自鸣得意地自命不凡地把我自己选择的路，充盈地，走下去。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/22/clrs-3-selected/">CLRS 3: Selected</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-22T19:12:00-05:00" pubdate data-updated="true">Dec 22<span>nd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>VII Selected Topics</h2>

<p>Introduction 769</p>

<h3>27 Multithreaded Algorithms 772</h3>

<ul>
<li>serial algorithms</li>
<li>parallel algorithms

<ul>
<li>No agreement on a single architectural model for parallel computers

<ul>
<li>shared memory (multicore)

<ul>
<li><strong><em>static threads</em></strong> -> complex schedule and load-balance -> concurrency platforms

<ul>
<li><strong>dynamic multithreading platform</strong>

<ul>
<li>2 features: 1. nested parallelism. Subroutine can be spawned. (divide-and-conquer) 2. parallel loops.</li>
<li>3 keywords: parallel, spawn, sync.</li>
<li>Platforms: Cilk, Cilk++, OpenMP, Task Parallel Library, Threading Building Blocks, Intel TBB.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>distributed memory</li>
</ul>
</li>
</ul>
</li>
</ul>


<h4>27.1 The basics of dynamic multithreading</h4>

<ul>
<li>The keyword <strong>spawn</strong> does not say, however, that a procedure must execute concurrently with its spawned children, only that it <em>may</em>. It is up to a scheduler at run time.</li>
<li>A procedure cannot safely use the values returned by its spawned children until after it executes a sync statement</li>
</ul>


<p>算Fibonacci，recursion 的时候，spawn一个，自己算一个，sync，对这两个结果求和。</p>

<h5>A model for multithreaded execution</h5>

<ul>
<li>Linear speedup: T1/Tp = Θ(P); Perfect linear speedup: T1/Tp = P</li>
</ul>


<p>27.2 Multithreaded matrix multiplication 792
27.3 Multithreaded merge sort 797</p>

<h3>28 Matrix Operations 813</h3>

<ul>
<li>numerical stability: limited precision</li>
<li>numerically unstable</li>
</ul>


<p>28.1 Solving systems of linear equations 813
28.2 Inverting matrices 827
28.3 Symmetric positive-definite matrices and least-squares approximation 832</p>

<h3>29 Linear Programming 843</h3>

<p>29.1 Standard and slack forms 850
29.2 Formulating problems as linear programs 859 29.3 The simplex algorithm 864
29.4 Duality 879
29.5 The initial basic feasible solution 886</p>

<h3>30 Polynomials and the FFT 898</h3>

<ul>
<li>Fast Fourier transform, or FFT, can reduce the time to multiply polynomials to Θ(n lg n).</li>
</ul>


<p>30.1 Representing polynomials 900 30.2 The DFT and FFT 906
30.3 Efficient FFT implementations 915</p>

<h3>31 Number-Theoretic Algorithms 926</h3>

<ul>
<li>Cryptographic schemes based on large prime numbers.</li>
</ul>


<p>31.1 Elementary number-theoretic notions 927
31.2 Greatest common divisor 933
31.3 Modular arithmetic 939
31.4 Solving modular linear equations 946
31.5 The Chinese remainder theorem 950
31.6 Powers of an element 954
31.7 The RSA public-key cryptosystem 958
31.8 Primality testing 965
31.9 Integer factorization 975</p>

<h3>32 String Matching 985</h3>

<ul>
<li>T[n]: text</li>
<li>P[m]: pattern (m &lt;= n)</li>
<li>s: shift - pattern P occurs beginning at position <em>s+1</em> in text T

<ul>
<li>valid shift</li>
<li>invalid shift</li>
</ul>
</li>
</ul>


<h4>32.1 The naive string-matching algorithm 988</h4>

<p>O((n-m+1)*m)</p>

<h4>32.2 The Rabin-Karp algorithm 990</h4>

<ul>
<li>把字符串转换成一位一位的数字，用霍纳法则</li>
<li>Θ(m) preprocessing, worst-case Θ((n-m+1)*m)</li>
<li>used to detect plagiarism</li>
</ul>


<h4>32.3 String matching with finite automata 995</h4>

<h4>32.4 The Knuth-Morris-Pratt algorithm 1002</h4>

<h3>33 Computational Geometry 1014</h3>

<p>33.1 Line-segment properties 1015
33.2 Determining whether any pair of segments intersects 1021 33.3 Finding the convex hull 1029
33.4 Finding the closest pair of points 1039</p>

<h3>34 NP-Completeness 1048</h3>

<ul>
<li>Problems which can be solved by polynomial-time algorithms are <strong>tractable/easy</strong>. Otherwise, <strong>intractable/hard</strong></li>
<li>Three classes of problems:

<ol>
<li>P.   solvable in polynomial time O(n<sup>k)</sup></li>
<li>NP.  verifiable (there exists a certifier) in polynomial time. (NP: nondeterministic polynomial-time)</li>
<li>NPC. NP-complete

<ul>
<li>If any NP-complete problem can be solved in polynomial time, then every problem in NP has a polynomial-time algorithm.</li>
<li>Many CS scientists believe NP-complete problems are intractable.</li>
<li>e.g. circuit-satisfiability problem</li>
</ul>
</li>
</ol>
</li>
</ul>


<h4>34.1 Polynomial time 1053</h4>

<h4>34.2 Polynomial-time verification 1061</h4>

<ul>
<li>Certifiers and Certificates:  Hamiltonian Cycle

<ul>
<li><strong>HAM-CYCLE</strong>.  Given an undirected graph G = (V, E), does there exist a simple cycle C that visits every node?</li>
<li><strong>Certificate</strong>.  A permutation of the n nodes.</li>
<li><strong>Certifier</strong>.  Check that the permutation contains each node in V exactly once, and that there is an edge between each pair of adjacent nodes in the permutation.</li>
<li><strong>Conclusion</strong>.  HAM-CYCLE is in NP.</li>
</ul>
</li>
<li>P,NP,EXP

<ul>
<li>P. Decision problems for which there is a poly-time algorithm.</li>
<li>EXP.  Decision problems for which there is an exponential-time algorithm.</li>
<li>NP.  Decision problems for which there is a poly-time certifier.</li>
</ul>
</li>
<li>P ⊆ NP, NP ⊆ EXP</li>
<li><strong><em>Does P = NP?</em></strong>

<ul>
<li><strong>If yes</strong>, Efficient algorithms for 3-COLOR, TSP, FACTOR, SAT&#8230;</li>
<li><strong>If no</strong>, No efficient algorithms for 3-COLOR, TSP, FACTOR, SAT&#8230;</li>
</ul>
</li>
</ul>


<p><img src="http://upload.wikimedia.org/wikipedia/commons/a/a0/P_np_np-complete_np-hard.svg" alt="P?=NP" /></p>

<h4>34.3 NP-completeness and reducibility 1067</h4>

<p>34.4 NP-completeness proofs 1078
34.5 NP-complete problems 1086</p>

<h3>35 Approximation Algorithms 1106</h3>

<p>35.1 The vertex-cover problem 1108
35.2 The traveling-salesman problem 1111
35.3 The set-covering problem 1117
35.4 Randomization and linear programming 1123 35.5 The subset-sum problem 1128</p>
</div>
  
  


    </article>
  
  <ul class="pager">
    
    <li class="previous"><a href="/blog/page/2/">&larr; Older</a></li>
    
    <li><a href="/blog/archives">Blog Archives</a></li>
    
  </ul>
</div>
<aside class="sidebar-nav span3">
  
    <section class="well">
  <script src="/javascripts/onmouseoverpuncsky.js" type="text/javascript"> </script>
  <img onmouseover="enlight(this)" onmouseout="darken(this)" src="/puncsky-gray.png" alt="puncsky" style="max-width:100%;">
  <h4>Puncsky</h4>
  <p><i>who strives on and lives to strive</i></p>
</section>
<section class="well">
  <ul id="recent_posts" class="nav nav-list">
    <li class="nav-header">Recent Posts</li>
    
      <li class="post">
        <a href="/blog/2013/05/14/ren-sheng-shi-yuan/">人生十愿</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/06/dynamo-kv-store/">Dynamo: Amazon&#8217;s Highly Available Key-value Store (SOSP&#8217;07)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/30/zhuan-numbers-everyone-should-know/">[Repost] Numbers everyone should know</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/27/hadoopdb-vldb-09/">HadoopDB (VLDB&#8217;09)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/14/gc-garbage-collection-in-java/">GC(Garbage Collection) in Java</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo" class="page-footer"><hr>
<p>
  Copyright &copy; 2013 - Tian -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
