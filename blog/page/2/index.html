
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Puncsky CS Notebook</title>
  <meta name="author" content="Tian">

  
  <meta name="description" content="Life and computer science notebook from Puncsky">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://puncsky.github.com/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <style type="text/css">
    body {
      padding-bottom: 40px;
    }
    h1 {
      margin-bottom: 15px;
    }
    img {
      max-width: 100%;
    }
    .sharing, .meta, .pager {
      margin: 20px 0px 20px 0px;
    }
    .page-footer p {
      text-align: center;
    }
  </style>
  <script src="/javascripts/libs/jquery.js"></script>
  <script src="/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/bootstrap.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Puncsky CS Notebook" type="application/atom+xml">
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43072488-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><div class="navbar navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <a class="brand" href="/">Puncsky CS Notebook</a>

      <div class="nav-collapse">
        <ul class="nav">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>


        <ul class="nav pull-right" data-subscription="rss">
          <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
          
        </ul>

        
          <form class="pull-right navbar-search" action="http://google.com/search" method="get">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:puncsky.github.com" />
              <input class="search-query" type="text" name="q" results="0" placeholder="Search"/>
            </fieldset>
          </form>
        
      </div>
    </div>
  </div>
</div>
</nav>
  <div class="container">
    <div class="row-fluid">
      <div class="span9">
  
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/26/xie-zai-2012shi-jie-mo-ri-zhi-hou/">迟到的世界末日</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-26T07:56:00-08:00" pubdate data-updated="true">Dec 26<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>卖个关子，先谈“反求诸己”，文章的最后再谈“世界末日”、为什么世界末日会“迟到”。</p>

<p>“反求诸己”是一件让人乐此不疲但又烦躁不堪的事情。思考人类终极命运这种问题难道不是令人沮丧的么？人固有一死，早死晚死都得死；尽管我们一再强调，有些尸体是重于泰山的，但“你会死”这种陈述终归不是什么好话。打情骂俏、调戏人的和反调戏的除外。可是，即便是这样，我们还是对生命的爱与执着这种“反熵(anti-entropy)”的事情乐此不疲，不是么？就好像，尽管李安大师《少年派的奇幻之旅》血腥重口版很可能是事实，我们仍然选择相信浪漫励志版，不是么？</p>

<p>这篇文章是我个人的年终总结。</p>

<h2>一</h2>

<p>这些年来每一年我都至少会写一篇文章，反思我这一年又做了哪些特二的事情，下一年还想做哪些不那么二的事情。</p>

<ul>
<li>2009:<a href="http://user.qzone.qq.com/66542118/blog/1233947326">可堪回首月明中 —— 我的大一上年度总结：抒情与思索</a></li>
<li>2010: <a href="http://user.qzone.qq.com/66542118/blog/1282297569">1.读下去 写下去</a>，<a href="http://user.qzone.qq.com/66542118/blog/1282635925">2.无知即力量 早选择早超生</a>，<a href="http://user.qzone.qq.com/66542118/blog/1282728122">3.士不可不弘毅 一切为了CMU</a></li>
<li>2011: <a href="http://user.qzone.qq.com/66542118/blog/1294034387">Farewell to 2010 – A Year Encompassed by Chaos</a></li>
<li>2012: <a href="http://user.qzone.qq.com/66542118/blog/1325429981">Farewell to 2011 – Good Morning, My Evolution!</a></li>
</ul>


<p>也许更早的时候我也写过不少东西，只不过都删除掉了，没有存档。看着这些个人总结，我突然特别好奇：大学四年的不同时期，我都在想些什么？</p>

<p>首先，生活一直在别处，我似乎不是那么的开心。</p>

<p>这是可以理解的，一来要直面自己做得不对的事情，二来这些文字大多落笔于寒冬，而寒冬本身就是令人很绝望的存在。除夕辞旧迎新其实是有象征意味的，只有将过往的积郁都扫除掉，打上一剂名叫希望的鸡血，才能勇敢地重装上阵。所以当我回味百里屠苏“屠绝鬼气，苏醒人魂”的时候，内心难免会感动不已。</p>

<p>值得注意的是，“生活在别处”有别于“逃离”，“逃离”是一种可悲的心态，你总以为“如果我在其他的地方，我会活得更好”，但是，<strong>你我都知道，境由心生，你在哪和你活的好不好无关丝毫</strong>。“生活在别处”应该是一种直面、自嘲，更重要的是，是一种向往，对人类内心深处亘古不变的真理的向往，这些向往是什么？是<strong>爱、怜悯、自豪、同情、恐惧、牺牲和荣耀</strong>。没有了这些向往，我们追求的不是爱，而是情欲；我们的苦难里没有任何人失去真正有价值的东西；我们的胜利里没有任何让我们热血沸腾的奇迹；最为糟糕的是，没有了怜悯和同情，我们的哀伤很可能是无病呻吟，不值一提；那些让心儿为之颤抖的，不是灵魂，而是内分泌。</p>

<p>其次，我一直在抱怨自己读书太少。</p>

<p>我逐渐患上了一种奇特的拖延症。多年前，我成为了Sir Winston Churchill的<a href="http://www.yingyudaxue.com/books/advanced-english/speech-on-hitlers-invasion-of-the-u-s-s-r">&#8220;I have only one purpose, the destruction of Hitler, and my life is much simplified thereby.&#8221;</a>这句话的脑残粉。从那以后，每当我打算专心做一件事情的时候，其他的所有都会被抛诸脑后。可惜的是，这些事都不是一天两天能够做完的，而我记性又不大好，这就导致，每当这些事情完成的时候，那些被抛诸脑后的事情也就已然类似于抛猪脑后了。读书少是表现之一，所以，多年来的这些总结都在反复提醒自己多读多写。</p>

<p>另外一个表现是，<strong>尽管我很幸运的能够遇见很多对我照顾有加的前辈和亲友，我都一直心怀感激，但因为我这个不好的拖延加遗忘症，导致疏于联络。这很可能是我这辈子最最于心有愧的事情。</strong></p>

<p>再次，我一直幼稚地想要说再见。</p>

<p>真正的忘记是不需要说再见的，诶？我要说什么来着，不记得了……</p>

<p>很多观念在自我知觉到的时候，其实已经是inception之后好多年了。让人略感欣慰的是，神说，要有光，于是便有了光(Let there be light and there was light.)两年前我说我想去CMU，后来我不是就拿到CMU的offer了么？</p>

<h2>二</h2>

<p>今年二月到七月，我在清华园附近一套公寓客厅的小隔间里住了五个月。这个隔间没有窗户，仅容得下一床一桌一柜，没有什么其他可以落脚的空间了。总之，这个隔间如同棺材一般。</p>

<p>我对自己说，你总有一天会面对这样一个类似的境况：<strong>一个人住，没有人管，要找事干</strong>。一个人住和集体生活是很不一样的，周围都是同龄人，你会清楚地知道，大概在某些时期，你大概要做什么事情；没有人管是指，这时候是没有指标可以衡量你人之为人，你不需要为了绩点上课，不需要为了为了妹子犯二，不需要为了糊口而奔走。要找事干，<strong>这是一个实验，假如把你放在一张全新的白纸的中央，没有任何的指引，你会如何书写你自己的人生？</strong>路径依赖实在是太过稀疏平常，以至于，你能看到那些优秀的人，总是借着惯性的东风，从一个优秀奋斗到另一个优秀；而令我恐惧的是，这份“优秀”终归是给别人的答卷，GD唱的好，</p>

<blockquote><p>Do you know what&#8217;s worth fighting for?  When it&#8217;s not worth dying for? Does it take your breath away? And you feel yourself suffocating?</p></blockquote>

<p>事实上，后来的结果是，我没有想出个所以然，做事的效率也不高，代码量可以忽略不计，书也没看多少本，电视剧倒是看了不少……当时每天十一二点回棺材，很累，看看视频，看着看着就凌晨了。</p>

<p>那么，如何防止这种事情的发生呢？</p>

<ol>
<li><strong>建立循环向上的deadline体系。</strong>
 正是因为很多事情不是一天两天能够做完的，也不是预先可以精准估计的，所以，与其一再拖延deadline，不如偷工减料，先交付原本(alpha)版本给deadline再说，根据第一份的deadline交付的成果，动态调整下一步的deadline。我们的目标是，不求一步登天、一鸣惊人，但求信心十足、反复升级。</li>
<li><strong>量化评估的缺失，和碎片化的不规律的生活，是一切罪恶的源泉。</strong>
 自从2011年的暑假以来，我的生活就被微博活生生地給割碎了。众所周知，微博耗时且上瘾。也是那个时候开始，我潜心学习计算机科学技术。我所阅读和书写的一切几乎都是电子版的东西，然而，这些电子版的东西是极其难以量化的：他们都只不过是稀疏平常的文件而已。多年以来，你所有现有的“本能的成就评估体系”直接就不管用了。你不会摩挲着刚看完一本厚厚的书自鸣得意，也不会抚摸着厚厚的一沓报告心花怒放；因为他们都只是拖拖鼠标的事情。现在我”量化成就“的解决方案是，在github上搭建博客<a href="http://www.puncsky.com">CS Notebook</a>来整理发布“原创的”笔记，自我激励。我会在后面具体解释。</li>
<li><strong>不求自决于SNS，但求增加登陆的难度。</strong>
 微博的易上瘾性，来自于其浅薄的多元性多样性，看上去是在获取知识，实际上不动脑子。我大三的时候一度采用过这样的方法来限制人人：不带手机，白天不在宿舍，晚上十点回宿舍，十一点熄灯，让一切内部外部限制因素使得，一天之中能上网的时间，最多只有一个小时。后来，时过境迁，学计算机自然无法离开google……我曾今使用过&#8221;stayFocused&#8221;插件(发现米国同学也在用它，看来注意力问题是不分种族的:D)，不大有效，因为必要时候我可以换浏览器……最后只能是限制而不根绝。</li>
<li><strong>欲速则不达，多元和多样性是趣味的源泉。</strong>
 这件事情在之前的文章<a href="http://www.puncsky.com/blog/2012/11/17/chun-tian-zai-na-li-ya-chun-tian-zai-na-li-%3F/">《春天在哪里呀春天在哪里》</a>中讨论过，此处补充卢梭《忏悔录》中的一个例子。

<blockquote><p>如果我必须用心去读一位作家的著作，刚读几页，我的精力就会涣散，并且立即陷入迷惘状态。即使我坚持下去，也是白费，结果是头昏眼花，什么也看不懂了。但是如果我连续研究几个不同的问题，即使毫不间断，我也能轻松愉快地一个一个地寻思下去，这个问题可以消除另一问题所带来的疲劳，用不着休息一下脑筋。于是，我就在我的治学计划中充分利用我所发现的这一特点，对一些问题交替进行研究，这样，即使我整天用功也不觉得疲倦了。</p></blockquote></li>
</ol>


<h2>三</h2>

<p>今年几乎最大的收获，是如何管理个人知识。这一部分比较技术，不感兴趣的可以直接略过。</p>

<p>我愈发地感觉到，<strong>笔记是陪伴终身的宝贵资本。</strong>众所周知，知识就是力量，是人类的宝贵财富。苏格拉底认为，真正的知识甚至智慧是信手拈来脱口而出的，所以他好辩论，喜言谈，不屑写作；而令人讽刺的是，后人却只能通过柏拉图所著《理想国》来研习苏格拉底的思想。<strong>同样的知识，可悲的是前者只能是个人的财富，而后者却是旷日持久留给全人类的资本。</strong>当然，<strong>我这里记录的渣渣远不及先贤们的万一，但就个人而言，十多年来，好歹也写了不少，如果写下的文字不能保存，那岂不白白消受了光阴？学而时习之不亦说乎？笔记不是为了保存下来便于复习，要它作甚？</strong>那些失落的文字就是白白浪费的财富，只有记录下来，才有可能成为流动的有用的财富——资本。我多年来曾有幸目睹别人无数的笔记，那些消磨了他们多少日夜的，漂亮的、精炼的、整齐的、可爱的、帅气的、威力巨大的笔记，仅仅因为是手工书写的，就那么埋没了……感谢上苍赐予人类互联网，为何不把死的笔记放到互联网上？上网即永生！</p>

<p>上网放哪？我一度是evernote重度使用者，后来我发现两个严重的局限：</p>

<ol>
<li>格式混乱。evernote的富文本是带格式的，所有的文字，只要带格式，就难以统一，需要排版(个人习惯认为，所有的文字，应该各级标题与正文分离清楚，便于整理成大纲或者索引)；需要排版，就很麻烦，笔记原本就应该是一件省心省事的事情。最天打雷劈的是，你们这群同样的笔记居然在不同的操作系统下，或者同样的操作系统不同的打开方式下(web/built-in)，显示得不一样！格式控表示完全无法容忍！！另外，web版evernote有bug，难用且载入速度奇慢！</li>
<li>来源混杂。在网上做文摘的时候，经常会使用evernote，导致的问题是，原创的笔记和他人的文章混杂在一起，假以时日，混乱不堪。我本来就是个懒人，能把你记下来就不错了，你还要我经常过来给你分类加标签，烦不烦？</li>
</ol>


<p>因此，我需要把原创笔记抽离出来，有没有一种带格式，但又简单高效的、轻量级的、甚至有版本控制的工具来记录他们呢？</p>

<p>我几乎在同一时期，通过各种渠道缘定<a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">markdown</a>，是她把书写变成了一件趣事。最初是在github社区，我惊奇地发现，纯文本加上极其简单的标签，居然可以转化成带格式的html页面！然后是在Michael和Bryan的课上，发现教授们的笔记要么是纯文本，要么是这种类似的带格式的html页面，甚至是格式一致的pdf页面！再后来我惊奇的发现，美祺大叔之前推荐过，李笑来老师也在推荐用<a href="https://github.com/mojombo/jekyll/wiki">Jekyll</a>在github上搭建静态博客，其基础竟然也是采用的markdown!</p>

<p>最后，这一套设施确定为：</p>

<ol>
<li>文本编辑: <a href="http://macromates.com/">textmate 2</a>, vim实在不适合编辑大段文字，尤其是中文</li>
<li>版本管理: <a href="https://github.com/">github</a></li>
<li>格式: <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">markdown</a></li>
<li>生成并发布网页: <a href="http://octopress.org/">octopress</a>，它是<a href="https://github.com/mojombo/jekyll/wiki">Jekyll</a>的一种带主题和插件的变种</li>
<li>生成页面供自己使用: <a href="https://chrome.google.com/webstore/detail/made/oknndfeeopgpibecfjljjfanledpbkog">MaDe</a>，很方便的chrome插件</li>
</ol>


<h2>四</h2>

<p>这篇文章写作严重超时，就先交付一份alpha版吧！</p>

<p>交付之前，回答在我心目中，什么是“世界末日”，为什么世界末日会“迟到”。</p>

<p>上帝创始之初，因为亚当夏娃偷吃苹果的缘故，将他们驱逐出伊甸园。此处，苹果是智慧果，教人明辨是非。伊甸园象征着快乐无忧。可是，人出于自由意志，食用了智慧果，被逐离了伊甸园。这才是世界的初始，<strong>人选择了独立意志、明辨是非、反求诸己；就有了欢天喜地，饱暖思淫欲；也必然地有了快意恩仇，羡慕嫉妒恨；只要有一天我还嬉笑怒骂着、严肃活泼着、要死要活着；只要有一天我还深深地爱着自己、还深深地恨着自己，那传说中的伊甸园、那传说中的世界末日就还没有来到。尽管它可能就在昨天、明天、或者后天。</strong></p>

<p>《美丽新世界》里如是说：</p>

<blockquote><p>“我不需要舒服。我需要上帝，需要诗，需要真正的危险，需要自由，需要善，需要罪恶。&#8221;</p>

<p>&#8220;实际上你要求的是受苦受难的权利。&#8221;</p>

<p>&#8220;那好，&#8221;野蛮人挑战地说，&#8221;我现在就要求受苦受难的权利。&#8221;</p>

<p>&#8220;你还没说要求衰老、丑陋和阳痿的权利；要求害梅毒和癌症的权利；要求食物匮乏的权利；讨人厌烦的权利；要求总是战战兢兢害怕明天会发生的事的权利。要求害伤寒的权利；要求受到种种难以描述的痛苦折磨的权利。&#8221;</p>

<p>良久的沉默。</p>

<p>&#8220;这一切我都要求。&#8221;野蛮人终于说道。</p></blockquote>

<p>最后，许下我的新年愿望：<strong>我希望我明年写总结的时候，在加州。</strong></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/26/bu-tan-sheng-huo/">请不要和我谈生活，我没有生活</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-26T07:53:00-08:00" pubdate data-updated="true">Dec 26<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>隔壁的Bryan老兄每次寒暄 how&#8217;s it going? 的时候他也许会感到很奇怪，为啥对面这小兄弟怎么连招呼都打得一愣一愣的。而对面的小兄弟我，每次都本能地将其反应成“最近过得怎样？”，然后进一步考虑，该如何回答这个”特殊疑问句“，总不能每次都说&#8221;Not bad&#8221;吧；但实际的情况是，还真没有什么好说的，而且这句话本来就是“how are you?”类型的句子，是不需要认真回答的，一个hi/hello/hey 足矣。</p>

<p>每次父母找我聊天，问东问西，总以为我在国外的生活应该是丰富多彩的，如果我问题回答地不够给力，他们就会反复感叹类似于好桑心啊好桑心，都没有共同语言啊，老了啦，之类的感叹。这让我十分汗颜，不是我不跟你们讲，而是我真没有什么好讲的，我不是在看书就是在刷微博就是在吃东西就是在去吃东西的路上就是梦里面吃东西，但这些事务并不是什么可以可以诉说甚至引以为豪的事情。大家往往以旅游、靓照、趴踢、大餐为乐为豪，是，确实很欢乐，我也超级喜欢，但是，我只是觉得，这些对我来说不重要，至少对于现在的我说不重要。</p>

<p>我也知道我眼界不甚开阔，很狭隘。雅礼是一所非常好的学校，我在这里遇到了无数精英，这群精英不是来自Ivy就是来自Stanford, Berkeley, 就是Oxford, Cambridge, 就是清北浙上交复旦等大牛校的帅哥靓女。是，他们寒暑假可以上到青藏高原下到日本海沟，南到极地游轮抢拍鲸鱼北到阿拉斯加入住爱斯基摩的雪屋。是，他们博闻广志风流倜傥，有太多太多值得我学习的地方，我对他们、对这个世界敬畏有加。但这丝毫不妨碍我作为国关人的自豪与自嘲，但这丝毫不妨碍我这辈子对家乡的思念和出逃，但这丝毫不妨碍我对我所热爱的选择的偏执与傲娇。</p>

<p>我从来就不曾想过出国是一件舒舒服服安享幸福生活的事情，过去没有，现在没有，将来也不会有！请不要和我谈生活，我没有生活。请不要问我后不后悔，我只怕我不能够爱得深切，我只怕我不能够屁颠屁颠地、但却矢志不渝地自鸣得意地自命不凡地把我自己选择的路，充盈地，走下去。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/22/clrs-3-selected/">CLRS 3: Selected</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-22T19:12:00-08:00" pubdate data-updated="true">Dec 22<span>nd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>VII Selected Topics</h2>

<p>Introduction 769</p>

<h3>27 Multithreaded Algorithms 772</h3>

<ul>
<li>serial algorithms</li>
<li>parallel algorithms

<ul>
<li>No agreement on a single architectural model for parallel computers

<ul>
<li>shared memory (multicore)

<ul>
<li><strong><em>static threads</em></strong> -> complex schedule and load-balance -> concurrency platforms

<ul>
<li><strong>dynamic multithreading platform</strong>

<ul>
<li>2 features: 1. nested parallelism. Subroutine can be spawned. (divide-and-conquer) 2. parallel loops.</li>
<li>3 keywords: parallel, spawn, sync.</li>
<li>Platforms: Cilk, Cilk++, OpenMP, Task Parallel Library, Threading Building Blocks, Intel TBB.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>distributed memory</li>
</ul>
</li>
</ul>
</li>
</ul>


<h4>27.1 The basics of dynamic multithreading</h4>

<ul>
<li>The keyword <strong>spawn</strong> does not say, however, that a procedure must execute concurrently with its spawned children, only that it <em>may</em>. It is up to a scheduler at run time.</li>
<li>A procedure cannot safely use the values returned by its spawned children until after it executes a sync statement</li>
</ul>


<p>算Fibonacci，recursion 的时候，spawn一个，自己算一个，sync，对这两个结果求和。</p>

<h5>A model for multithreaded execution</h5>

<ul>
<li>Linear speedup: T1/Tp = Θ(P); Perfect linear speedup: T1/Tp = P</li>
</ul>


<p>27.2 Multithreaded matrix multiplication 792
27.3 Multithreaded merge sort 797</p>

<h3>28 Matrix Operations 813</h3>

<ul>
<li>numerical stability: limited precision</li>
<li>numerically unstable</li>
</ul>


<p>28.1 Solving systems of linear equations 813
28.2 Inverting matrices 827
28.3 Symmetric positive-definite matrices and least-squares approximation 832</p>

<h3>29 Linear Programming 843</h3>

<p>29.1 Standard and slack forms 850
29.2 Formulating problems as linear programs 859 29.3 The simplex algorithm 864
29.4 Duality 879
29.5 The initial basic feasible solution 886</p>

<h3>30 Polynomials and the FFT 898</h3>

<ul>
<li>Fast Fourier transform, or FFT, can reduce the time to multiply polynomials to Θ(n lg n).</li>
</ul>


<p>30.1 Representing polynomials 900 30.2 The DFT and FFT 906
30.3 Efficient FFT implementations 915</p>

<h3>31 Number-Theoretic Algorithms 926</h3>

<ul>
<li>Cryptographic schemes based on large prime numbers.</li>
</ul>


<p>31.1 Elementary number-theoretic notions 927
31.2 Greatest common divisor 933
31.3 Modular arithmetic 939
31.4 Solving modular linear equations 946
31.5 The Chinese remainder theorem 950
31.6 Powers of an element 954
31.7 The RSA public-key cryptosystem 958
31.8 Primality testing 965
31.9 Integer factorization 975</p>

<h3>32 String Matching 985</h3>

<ul>
<li>T[n]: text</li>
<li>P[m]: pattern (m &lt;= n)</li>
<li>s: shift - pattern P occurs beginning at position <em>s+1</em> in text T

<ul>
<li>valid shift</li>
<li>invalid shift</li>
</ul>
</li>
</ul>


<h4>32.1 The naive string-matching algorithm 988</h4>

<p>O((n-m+1)*m)</p>

<h4>32.2 The Rabin-Karp algorithm 990</h4>

<ul>
<li>把字符串转换成一位一位的数字，用霍纳法则</li>
<li>Θ(m) preprocessing, worst-case Θ((n-m+1)*m)</li>
<li>used to detect plagiarism</li>
</ul>


<h4>32.3 String matching with finite automata 995</h4>

<h4>32.4 The Knuth-Morris-Pratt algorithm 1002</h4>

<h3>33 Computational Geometry 1014</h3>

<p>33.1 Line-segment properties 1015
33.2 Determining whether any pair of segments intersects 1021 33.3 Finding the convex hull 1029
33.4 Finding the closest pair of points 1039</p>

<h3>34 NP-Completeness 1048</h3>

<ul>
<li>Problems which can be solved by polynomial-time algorithms are <strong>tractable/easy</strong>. Otherwise, <strong>intractable/hard</strong></li>
<li>Three classes of problems:

<ol>
<li>P.   solvable in polynomial time O(n<sup>k)</sup></li>
<li>NP.  verifiable (there exists a certifier) in polynomial time. (NP: nondeterministic polynomial-time)</li>
<li>NPC. NP-complete

<ul>
<li>If any NP-complete problem can be solved in polynomial time, then every problem in NP has a polynomial-time algorithm.</li>
<li>Many CS scientists believe NP-complete problems are intractable.</li>
<li>e.g. circuit-satisfiability problem</li>
</ul>
</li>
</ol>
</li>
</ul>


<h4>34.1 Polynomial time 1053</h4>

<h4>34.2 Polynomial-time verification 1061</h4>

<ul>
<li>Certifiers and Certificates:  Hamiltonian Cycle

<ul>
<li><strong>HAM-CYCLE</strong>.  Given an undirected graph G = (V, E), does there exist a simple cycle C that visits every node?</li>
<li><strong>Certificate</strong>.  A permutation of the n nodes.</li>
<li><strong>Certifier</strong>.  Check that the permutation contains each node in V exactly once, and that there is an edge between each pair of adjacent nodes in the permutation.</li>
<li><strong>Conclusion</strong>.  HAM-CYCLE is in NP.</li>
</ul>
</li>
<li>P,NP,EXP

<ul>
<li>P. Decision problems for which there is a poly-time algorithm.</li>
<li>EXP.  Decision problems for which there is an exponential-time algorithm.</li>
<li>NP.  Decision problems for which there is a poly-time certifier.</li>
</ul>
</li>
<li>P ⊆ NP, NP ⊆ EXP</li>
<li><strong><em>Does P = NP?</em></strong>

<ul>
<li><strong>If yes</strong>, Efficient algorithms for 3-COLOR, TSP, FACTOR, SAT&#8230;</li>
<li><strong>If no</strong>, No efficient algorithms for 3-COLOR, TSP, FACTOR, SAT&#8230;</li>
</ul>
</li>
</ul>


<p><img src="http://upload.wikimedia.org/wikipedia/commons/a/a0/P_np_np-complete_np-hard.svg" alt="P?=NP" /></p>

<h4>34.3 NP-completeness and reducibility 1067</h4>

<p>34.4 NP-completeness proofs 1078
34.5 NP-complete problems 1086</p>

<h3>35 Approximation Algorithms 1106</h3>

<p>35.1 The vertex-cover problem 1108
35.2 The traveling-salesman problem 1111
35.3 The set-covering problem 1117
35.4 Randomization and linear programming 1123 35.5 The subset-sum problem 1128</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/19/oop2/">OOP Final Term Notes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-19T02:01:00-08:00" pubdate data-updated="true">Dec 19<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<p>如果自己不定义constructor，C++会默认使用空的constructor。但是如果自己声明了，就一定要把定义写出来。</p>

<hr />

<p>Reuse and recycle. Maintain a <strong>free list</strong> a pool of currently unused objects and reuse rather than recreate when possible.</p>

<hr />

<p>How to measure run time of a program?</p>

<p>Clocks advance in discrete clicks called <strong>jiffies</strong>. A jiffy on the Zoo linux machines is one millisecond (0.001 seconds) long.</p>

<p>the first run of a program is likely to be slower than subsequent runs because of caching.</p>

<p>class members are private by default.</p>

<pre><code>if(!in) {...}
</code></pre>

<p>to test if an istream object in is open for reading. Here, the <code>istream</code> object is coerced to a <code>bool</code> because operator <code>bool()</code> is defined inside the streams package.</p>

<hr />

<p>operator⊕ overload</p>

<h3>a⊕b can be ambiguous</h3>

<ul>
<li>Global function: operator⊕(a, b).</li>
<li>Member function: a.operator⊕(b).</li>
</ul>


<p>It could mean either, and the compiler sees if either one matches. If both match, it reports an ambiguity.</p>

<p>We use a global form of operator&lt;&lt; because the left hand operator is of predefined type ostream, and we can’t add member functions to that class.</p>

<h3>++, &#8211;</h3>

<ol>
<li><p>prefix unary operators</p></li>
<li><p>class member: <code>operator++()</code></p></li>
<li><p>global: <code>operator++(ClassA a)</code></p></li>
<li><p>postfix unary operators</p></li>
</ol>


<p>They <strong>must be</strong> like</p>

<ul>
<li>class member: <code>operator++(int)</code></li>
<li>global: <code>operator++(ClassA a, int)</code></li>
</ul>


<p>Here <code>int</code> is dummy.</p>

<hr />

<p>两种定义类的cast的方式 cast A to B</p>

<pre><code>class A {};
class B{
    public:
    B(A&amp; a) {
        cout &lt;&lt; "constructor cast called" &lt;&lt; endl;
    }
};
</code></pre>

<p>conversion function cast</p>

<pre><code>class B {};
class A {
    public:
    operator B() {
        cout &lt;&lt; "operator B cast called" &lt;&lt; endl;
        return *new B;
    } 
};
</code></pre>

<p>注意没有返回类型，讲述自己怎么被cast成其他类</p>

<hr />

<p>Polymorphism</p>

<pre><code>class B     { public: int f(); ... };
class U : B { int f(); ... };
class V : B { int f(); ... };
</code></pre>

<p><code>B* bp</code> can point to B, U, and V, but bp->f() always refers to B::f()</p>

<p>Solution: Polymorphic derivation</p>

<pre><code>   class B     { public: virtual int f(); ... };
   class U : B { virtual int f(); ... };
   class V : B { virtual int f(); ... };
   B* bp;
</code></pre>

<p>A virtual function is dispatched at run time to the class of the actual object.</p>

<ul>
<li>bp->f() refers to U::f() if bp points to a U.</li>
<li>bp->f() refers to V::f() if bp points to a V.</li>
<li>bp->f() refers to B::f() if bp points to a B.</li>
</ul>


<p>Here, the type refers to the allocation type.</p>

<p>其实，只有基类加virtual都是可以的</p>

<hr />

<p>Calling constructors implicitly</p>

<pre><code>MyClass b;
MyClass b(4);
new MyClass(4);
</code></pre>

<p>Calling constructors explicitly</p>

<pre><code>MyClass(4);
throw Fatal("Error message"); 
</code></pre>

<hr />

<p>A <strong>pure virtual function</strong> is sometimes called a <strong>promise</strong>. Instances of B are never created and B::f() does not exist. It tells the compiler that a construct like bp->f() is legal. The compiler requires every derived class to contain a method f().</p>

<p>An <strong>abstract class</strong> is a class with one or more pure virtual functions. An abstract class <strong>cannot be instantiated</strong>. It can <strong>only be used as the base</strong> for another class. The <strong>destructor can never be a pure virtual function but will generally be virtual</strong>.</p>

<p>A <strong>pure abstract class</strong> is one where all member functions are pure virtual (except for the destructor) and there are no data members, Pure abstract classes define an <strong>interface</strong> `a la Java. An interface allows user-supplied code to integrate into a large system.</p>

<hr />

<p>A global function is one that takes zero or more explicit arguments. Example: f(a, b) has two explicit arguments a and b.</p>

<p>A member function is one that <strong>takes an implicit argument</strong> along with zero or more explicit arguments.
Example: c.g(a, b) has two explicit arguments a and b and implicit argument c.
Example: d->g(a, b) has two explicit arguments a and b and implicit argument *d.</p>

<p>Note that an omitted implicit argument defaults to (<em>this), which must make sense in the context.
Example: If g is a member function of class MyClass, then within MyClass, the call g(a, b) defaults to (</em>this).g(a,b) (or equivalently this->g(a,b)).</p>

<hr />

<p>Good function prototypes</p>

<p>Pass by reference instead of by pointer. A pass by pointer may imply optional and the user may pass a null pointer:</p>

<pre><code>Method(const Class *value); // value can be null Cannot pass a null pointer via reference
Method(const Class &amp;value); // value cannot be null
</code></pre>

<p>Always include “const” unless the calling function needs to modify the state of passed reference</p>

<p>Do not pass simple data types (int, char, bool) by by const reference … it does not do anything good and may actually inhibit some optimizations</p>

<hr />

<p>Casting!</p>

<pre><code>int x = 5;
double y0 = (int) x;
double y1 = static_cast&lt;int&gt;(x);
</code></pre>

<p>Do not use C style casting it is difficult to find</p>

<hr />

<p>Iterators
Iterators are like generalized pointers into containers.
Most pointer operations *, ->, ++, ==, !=, etc. work with iterators.</p>

<ul>
<li><code>begin()</code> returns an iterator pointing to the first element of the vector.</li>
<li><code>end()</code> returns an iterator pointing past the last element of the vector.</li>
</ul>


<hr />

<p><code>class B : A { ... };</code> specifies private derivation of B from A.</p>

<hr />

<p>Protected class members are inaccessible from outside the class (like private) but accessible within a derived class (like public).</p>

<hr />

<p>ln16.pdf</p>

<ul>
<li>The declaration context is the context in which the <strong>referent</strong> of x appears.</li>
<li>The reference context is the context in which the <strong>reference</strong> x appears.</li>
</ul>


<hr />

<p>Template functions and specialization</p>

<p>Template functions
Definition:</p>

<p>   template <class X> void swapargs(X&amp; a, X&amp; b) {</p>

<pre><code> X temp;
 temp = a;
 a = b;
 b = temp;
</code></pre>

<p>}</p>

<p>Use:</p>

<pre><code> int i,j;
 double x,y;
 char a, b;
 swapargs(i,j);
 swapargs(x,y);
 swapargs(a,b);
</code></pre>

<p>Specialization
Definition:</p>

<pre><code> template &lt;&gt; void swapargs(int&amp; a, int&amp; b) {
   // different code
 }
</code></pre>

<p>This overrides the template body for int arguments.</p>

<hr />

<p><strong>Non-inline template functions must be compiled and linked for each instantiation</strong></p>

<ul>
<li>(a) Put all template function definitions in the .hpp file along with the class definition.</li>
<li>(b) Put template function definition in the .hpp file and explicitly instantiate all the possible types.
  e.g. <code>template class FlexArray&lt;int&gt;; template class FlexArray&lt;double&gt;; ...</code></li>
</ul>


<hr />

<p>C casts. C uses the same syntax for different kinds of casts.</p>

<ul>
<li><strong>Value casts</strong> convert from one representation to another, partially preserving semantics. Often called <em>conversions</em>.</li>
<li><strong>Pointer casts</strong> leave representation alone but change interpretation of pointer.</li>
</ul>


<p>C++ casts</p>

<p>C++ has four kinds of casts.</p>

<ol>
<li>Static cast includes value casts of C. Tries to preserve semantics, but not always safe. Applied at compile time.</li>
<li>Dynamic cast Applies only to pointers and references to objects. Preserves semantics. Applied at run time. [See demo 18c-Dynamic cast.]</li>
<li>Reinterpret cast is like the C pointer cast. Ignores semantics. Applied at compile time.</li>
<li>Const cast Allows const restriction to be overridden. Applied at compile time.</li>
</ol>


<p>notation</p>

<pre><code>int x; myBase* b; const int c;
static_cast&lt;double&gt;(x);
dynamic_cast&lt;myDerived*&gt;(b);
reinterpret_cast&lt;int*&gt;(p);
const_cast&lt;int&gt;(c);
</code></pre>

<hr />

<p><code>explicit</code> keyword inhibit implicit casts.</p>

<pre><code>class B;
class A {
public:
    A(){};
    explicit A(B&amp; b) { cout&lt;&lt; "constructed A from B\n"; }
};
</code></pre>

<hr />

<p>C-style exception solution uses status returns</p>

<p>The C library functions generally report exceptions by returning <em>status values</em> or <em>error codes</em>.</p>

<p>C++ exception mechanism</p>

<p>Deriving your own exception classes from std::exception</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;exception&gt;
using namespace std;
class myexception: public exception {
  virtual const char* what() const throw()
    { return "My exception happened"; }
} myex;  // declares class and instantiates it
int main () {
  try {
    throw myex;
  }
  catch (exception&amp; e) {
    cout &lt;&lt; e.what() &lt;&lt; endl;
  }
return 0; }
</code></pre>

<p>each kind of exception should <strong>throw it’s own type of object</strong>.</p>

<hr />

<p>rethrow</p>

<p><code>throw e;</code> will throw a new copy of e</p>

<p><code>throw;</code> will not throw a new copy of e, but e itself</p>

<hr />

<p><strong>All exceptions should be caught and dealt with explicitly.</strong> That terminate() is called to abort the process is a bad thing when exceptions are not caught or thrown by the destructor.</p>

<hr />

<p>multiple inheritance</p>

<p>class A: public B, protected C {&#8230;};</p>

<p><em>diamond pattern</em>, A->B, A->C, {B,C}->D</p>

<hr />

<p>Good Reference Books</p>

<p>C Programming Language, Effective C++, More Effective C++, Design Patterns</p>

<hr />

<p>test</p>

<pre><code>make test&amp;&amp; ./test
</code></pre>

<hr />

<p>STL</p>

<p>Common wisdom on the internet says <strong>not to inherit from STL containers</strong>.</p>

<blockquote><p>STL containers are not intended to be used as base classes (their destructors are deliberately non-virtual); deriving from a container is a common mistake.”</p></blockquote>

<hr />

<p>Two kinds of derivation</p>

<p>C++ supports two distinct kinds of derivation:</p>

<ul>
<li>Simple derivation.</li>
<li><p>Polymorphic derivation.</p>

<p>  class A { &#8230; };
  class B : public A { &#8230; };</p></li>
</ul>


<p>We say B is derived from A, and B inherits members from A. Each B object has an A object embedded within it.<strong>The derivation is simple if no members of A are virtual; otherwise it is polymorphic.</strong></p>

<hr />

<p>What are the problems of polymorphic derivation? (ln13.pdf)</p>

<p>Every polymorphic base class (containing even one virtual function) adds a <strong>runtime type tag</strong> to each instance.</p>

<p>This costs in both time and space.</p>

<ul>
<li>Time: Each call to a virtual function goes through a <strong>run-time dispatch table (the vtable)</strong>.</li>
<li>Space: Each instance of a polymorphic object contains a <strong>type tag</strong>, which takes extra space.</li>
<li>Every polymorphic base class should have a virtual destructor.</li>
</ul>


<hr />

<p>General OO principles</p>

<ol>
<li><strong>Encapsulation</strong> <em>Data members should be private.</em> Public accessing functions should be defined only when absolutely necessary. This minimizes the ways in which one class can depend on the representation of another.</li>
<li><strong>Narrow interface</strong> <em>Keep the interface (set of public functions) as simple as possible</em>; include only those functions that are of direct interest to client classes. Utility functions that are used only to implement the interface should be kept private. This minimizes the chance for information to leak out of the class or for a function to be used inappropriately.</li>
<li><strong>Delegation</strong> A class that is called upon to perform a task often delegates that task (or part of it) to one of its members who is an expert.</li>
</ol>


<hr />

<p>What is a design pattern?</p>

<p>A pattern has four essential elements.</p>

<ol>
<li>A pattern name.</li>
<li>The problem, which describes when to apply the pattern.</li>
<li>The solution, which describes the elements, relations, and responsibilities.</li>
<li>The consequences, which are the results and tradeoffs.</li>
</ol>


<h2>Design Patterns</h2>

<ul>
<li><em>Adaptor</em> matches interface between toolkit classes and applications.</li>
<li><em>Indirection</em> decouples high-level applications from manipulations of low-level devices.</li>
<li><em>Proxy</em> could interface to anything, is like indirection and controls access via a placeholder</li>
<li><em>Polymorphism</em> enables multiple implementations from the abstraction</li>
<li><em>Controller</em> handles system events</li>
<li><em>Bridge</em> is generalized indirection and decouples interface from implementation. Used when both application and implementation are polymorphic.</li>
<li><em>Subject-observer</em>: keep updated states of the subject with observers.</li>
<li><em>Singleton</em> enforces only one instance of a class</li>
<li><em>Strategy</em> defines a family of algorithms, encapsulates each one, and makes them interchangeable at run time.

<ul>
<li>The Bridge pattern is a structural pattern (HOW DO YOU BUILD A SOFTWARE COMPONENT?).</li>
<li>The Strategy pattern is a dynamic pattern (HOW DO YOU WANT RUN A BEHAVIOUR IN SOFTWARE?).</li>
<li>The syntax is similar but the goal are differents:

<ul>
<li>Bridge: you can split the hierarchy of interface and class join him with an abstract reference</li>
<li>Strategy: you have more ways for doing an operation; with strategy you can choice the algorithm at run-time and you can modify a single Strategy without a lot of side-effects at compile-time;</li>
</ul>
</li>
</ul>
</li>
<li><em>Factory method</em> defines an interface for creating an object but lets the implementation decide which class to instantiate.</li>
</ul>


<h3>Factory</h3>

<figure class='code'><figcaption><span>ImageReaderFactory.java</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ImageReaderFactory</span> <span class="o">{</span>
</span><span class='line'>      <span class="kd">public</span> <span class="kd">static</span> <span class="n">ImageReader</span> <span class="nf">imageReaderFactoryMethod</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">is</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">ImageReader</span> <span class="n">product</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>          <span class="kt">int</span> <span class="n">imageType</span> <span class="o">=</span> <span class="n">determineImageType</span><span class="o">(</span><span class="n">is</span><span class="o">);</span>
</span><span class='line'>          <span class="k">switch</span> <span class="o">(</span><span class="n">imageType</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>              <span class="k">case</span> <span class="n">ImageReaderFactory</span><span class="o">.</span><span class="na">GIF</span><span class="o">:</span>
</span><span class='line'>                  <span class="n">product</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GifReader</span><span class="o">(</span><span class="n">is</span><span class="o">);</span>
</span><span class='line'>                  <span class="k">break</span><span class="o">;</span>
</span><span class='line'>              <span class="k">case</span> <span class="n">ImageReaderFactory</span><span class="o">.</span><span class="na">JPEG</span><span class="o">:</span>
</span><span class='line'>                  <span class="n">product</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JpegReader</span><span class="o">(</span><span class="n">is</span><span class="o">);</span>
</span><span class='line'>                  <span class="k">break</span><span class="o">;</span>
</span><span class='line'>              <span class="c1">//...</span>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">product</span><span class="o">;</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Proxy</h3>

<figure class='code'><figcaption><span>Real_Img_on_SystemA_and_Proxy_on_SystemB.java</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">interface</span> <span class="nc">Image</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">displayImage</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//on System A </span>
</span><span class='line'><span class="kd">class</span> <span class="nc">RealImage</span> <span class="kd">implements</span> <span class="n">Image</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="n">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Constructor</span>
</span><span class='line'><span class="cm">     * @param FILENAME</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">RealImage</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">FILENAME</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">filename</span> <span class="o">=</span> <span class="n">FILENAME</span><span class="o">;</span>
</span><span class='line'>        <span class="n">loadImageFromDisk</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Loads the image from the disk</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">loadImageFromDisk</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Loading   &quot;</span> <span class="o">+</span> <span class="n">filename</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Displays the image</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">displayImage</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Displaying &quot;</span> <span class="o">+</span> <span class="n">filename</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//on System B </span>
</span><span class='line'><span class="kd">class</span> <span class="nc">ProxyImage</span> <span class="kd">implements</span> <span class="n">Image</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="n">RealImage</span> <span class="n">image</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Constructor</span>
</span><span class='line'><span class="cm">     * @param FILENAME</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">ProxyImage</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">FILENAME</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">filename</span> <span class="o">=</span> <span class="n">FILENAME</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Displays the image</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">displayImage</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">image</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>           <span class="n">image</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RealImage</span><span class="o">(</span><span class="n">filename</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="n">image</span><span class="o">.</span><span class="na">displayImage</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">class</span> <span class="nc">ProxyExample</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>   <span class="cm">/**</span>
</span><span class='line'><span class="cm">    * Test method</span>
</span><span class='line'><span class="cm">    */</span>
</span><span class='line'>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">final</span> <span class="n">Image</span> <span class="n">IMAGE1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProxyImage</span><span class="o">(</span><span class="s">&quot;HiRes_10MB_Photo1&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="kd">final</span> <span class="n">Image</span> <span class="n">IMAGE2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProxyImage</span><span class="o">(</span><span class="s">&quot;HiRes_10MB_Photo2&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">IMAGE1</span><span class="o">.</span><span class="na">displayImage</span><span class="o">();</span> <span class="c1">// loading necessary</span>
</span><span class='line'>        <span class="n">IMAGE1</span><span class="o">.</span><span class="na">displayImage</span><span class="o">();</span> <span class="c1">// loading unnecessary</span>
</span><span class='line'>        <span class="n">IMAGE2</span><span class="o">.</span><span class="na">displayImage</span><span class="o">();</span> <span class="c1">// loading necessary</span>
</span><span class='line'>        <span class="n">IMAGE2</span><span class="o">.</span><span class="na">displayImage</span><span class="o">();</span> <span class="c1">// loading unnecessary</span>
</span><span class='line'>        <span class="n">IMAGE1</span><span class="o">.</span><span class="na">displayImage</span><span class="o">();</span> <span class="c1">// loading unnecessary</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/19/oop1/">OOP Mid Term Notes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-19T02:01:00-08:00" pubdate data-updated="true">Dec 19<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Referencing composed and base objects. site:http://zoo.cs.yale.edu/classes/cs427/</p>

<h2>C++ Basics</h2>

<h3>1. Properties of C++</h3>

<ol>
<li><strong>Widely used</strong> in the real world.</li>
<li><strong>Close to the machine</strong> and capable of producing efficient code.</li>
<li>Gives a programmer <strong>fine control</strong> over the use of resources.</li>
<li><strong>OOP</strong>: Supports the object-oriented programming paradigm.</li>
<li><strong>Modularity</strong>: Supports modularity and component isolation.</li>
<li><strong>Correctness</strong>: Supports correctness through privacy, modularity, and use of exceptions.</li>
<li><strong>Reusable code</strong>: Supports reusabale code through derivation and templates.</li>
</ol>


<h3>2. C++ file types</h3>

<ol>
<li><em>Header files (.hpp)</em> contain various kinds of declarations needed by clients of a module. They must not contain definitions of non-inline functions.</li>
<li><em>Implementation files (.cpp)</em> contain definitions of non-inline functions and class methods and a few other kinds of things. Public declarations belong in the corresponding .hpp files.</li>
<li><em>Object files (.o)</em> contain the code generated by the compiler from one .cpp file.</li>
<li><strong>Static library files (.a)</strong> are archives (collections) of object files.</li>
<li><em>Executable files</em> commands ready to be run. File names have no extension. They must have the “execute” mode bit set.
is compiled to produce a corresponding .o file.</li>
<li>Linking: All of the .o files, together with needed code from library files, are combined to produce one executable file.</li>
</ol>


<h3>3. Stages of a program creation. Kinds of errors that can be discovered at each stage. Compilation and linking. What does each do? What files are needed? What files are produced?</h3>

<p>Two stages:</p>

<ul>
<li>Compilation: Each .cpp file
<em>For every symbol referenced in any of the .o files, a definition must be found in exactly one .o file or in a library.</em></li>
</ul>


<p>Compiler errors at each stage:</p>

<ul>
<li>Preprocessor errors: Missing #include files, mismatched #ifndf…#endif pairs, etc.</li>
<li>Compilation errors: Syntax, semantics, missing/erroneous declarations. Sometimes the file produced by the preprocessor and seen by the compiler is not what the programmer intended.</li>
<li>Linker errors are generally methods that were declared but never defined, often because of mismatched signatures. Duplicate definitions from different modules also detected here, e.g., multiple definitions of main().</li>
</ul>


<h3>4. Qualifiers: inline, const, static</h3>

<p>4.1. Static data members
- A static class variable must be declared and defined.
- A static class member is declared by preceding the member declaration by the qualifier static.
- A static class member is defined by having it appear in global context with an initializer but without static.
- Must be defined only once.</p>

<p>Example
In mypack.hpp file, inside class definition:</p>

<pre><code>    class MyPack {
        static int instances; // count # instantiations
</code></pre>

<p>In mypack.cpp file:</p>

<pre><code>    int MyPack::instances = 0;
</code></pre>

<p>4.2. Static function members</p>

<ul>
<li>As with static variables, the are declared inside class by prefixing static.</li>
<li>They may be defined either inside the class (as inline functions) or outside the class.</li>
<li>If defined outside the class, the :: prefix must be used and the word static omitted.</li>
</ul>


<p>4.3. const declares a variable (L-value) to be readonly.</p>

<p>If they are used at all, global variables should be const. It is not bad style to use a global const variable because you can do things with it that you cannot do with #define (initialize a constant object of a structured type).</p>

<p>Here are three different uses of the const qualifier in a pointer declaration:</p>

<pre><code>        int const* p; //a mutable pointer to a constant int
        int* const p; //a constant pointer to a mutable int
        int const* const r; //a constant pointer to a constant int
</code></pre>

<p>A little trick: if you read the declaration statement from right to left, it will be much easier to figure out its meaning. For example:</p>

<pre><code>        int const* p; //p is a pointer to a constant integer
        int* const p; //p is a constant pointer to an integer.
</code></pre>

<p>4.4. inline
- Methods <strong>defined</strong> inside a class are inline (e.g., getN()).
- Inline functions are recompiled for every call.
- Inline avoids function call overhead but results in larger code size.
- inline keyword makes following function definition inline.
- Inline functions must be defined in the header (.hpp) file. Why? To expand the code of an inline function at the point of call, the compiler must have access to the function definition. The function prototype is insufficient.</p>

<h3>5. C++ types: primitive (built-in) value types, class types, enum types, typedef, reference types, and pointer types.</h3>

<h2>Classes and objects</h2>

<h3>1. The roles of a class</h3>

<ul>
<li>A type from which objects (instances) can be formed. We say the instances belong to the class.</li>
<li>A collection of things that belong together; a struct with its associated functions.</li>
<li>A way to encapsulate behavior: a public interface with a private implementation.</li>
<li>A way to protect the integrity of data, providing the rest of the world with functions that provide a view of the data but no way to modify it.</li>
<li>A way to organize and automate allocation, initialization, and deallocation</li>
<li>A reusable module.</li>
<li>A way to break a complex problem down into manageable, semi-independent pieces, each with a defined
interface.</li>
<li>An entity that can collaborate with other classes to perform a task</li>
</ul>


<h3>2. Class elements and class structure. class visibility.</h3>

<p>2.1. Class elements</p>

<ul>
<li>A class contains declarations for data members and function members (or methods).</li>
<li>int n; declares a data member of type int.</li>
<li>int getN(){ return n; } is a complete member function definition.</li>
<li>void sortData(); declares a member function that must be defined elsewhere.</li>
<li>By convention, member names begin with lower case letters and are written in camelCase.</li>
</ul>


<p>2.2. Visibility</p>

<ul>
<li>The visibility of declared names can be controlled.</li>
<li>public: declares that following names are visible outside of the class.</li>
<li>private: restricts name visibility to this class.</li>
<li>Public names define the interface to the class.</li>
<li>Private names are for internal use, like local names in functions.</li>
</ul>


<h3>3. Differences between a class definition and a class implementation. Importance of a class interface.</h3>

<p>the public functions of a class are called the class interface.</p>

<h3>4. Constructing/destructing objects.</h3>

<h3>5. Different kinds and roles of constructors: ctors, copy constructors, default constructors.</h3>

<p>Whenever a class object is created, one of its constructors is called.
If not specified otherwise, the default constructor is called. This is <strong>the one that takes no arguments</strong>.
If you do not define the default constructor, then the null constructor (which does nothing) is used.
This applies not only to the “outer” object but also to all of its embedded objects.</p>

<p>5.1. Ctors</p>

<p>(short for constructor/initializors) allow one to supply parameters to implicitly-called constructors.</p>

<p>Example:</p>

<pre><code>    class B : A {  
        B( int n ) : A(n) {};  
        // Calls A constructor with argument n  
    };
</code></pre>

<p>5.2. Copy constructors</p>

<ul>
<li>A copy constructor is automatically defined for each new class A and has prototype A(const A&amp;). It initializes a newly created A object by making a shallow copy of its argument.</li>
<li>Copy constructors are used for call-by-value parameters.</li>
<li><strong>Assignment</strong> uses operator=(), which by default copies the data members but does not call the copy constructor.</li>
<li><p><em>The results of the implicitly-defined assignment and copy constructors are the same</em>, but they can be redefined to be different.</p></li>
<li><p>Initialization, assignment, copying of objects (and variables in general)</p></li>
</ul>


<p>Initialization ctors
Ctors also can be used to initialze primitive (non-class) variables.</p>

<p>Example:</p>

<pre><code>    class  B {  
        int x;  
        const int y;  
        B( int n ) : x(n), y(n+1) {}; // Initializes x and y  
    };
</code></pre>

<p>Multiple ctors are separated by commas.</p>

<p>Ctors present must be in the same order as the construction takes place – base class ctor first, then data member ctors in the same order as their declarations in the class.</p>

<p>Initialization not same as assignment</p>

<p>Previous example using ctors is not the same as writing</p>

<pre><code>    B( int n ) { y=n+1; x=n; };
</code></pre>

<p>The order of initialization differs.</p>

<p>const variables can be initialized but not assgined to.</p>

<p>Initialization uses the constructor (for class objects).</p>

<p>Initialization from another instance of the same type uses the copy constructor.</p>

<h2>I/O</h2>

<h3>1. streams: cin, cout, cerr, and clog</h3>

<ul>
<li>cin is the standard input stream.</li>
<li>cout is the standard output stream.</li>
<li>cerr is the standard output stream for errors.</li>
<li>clog is the standard output stream for logging.</li>
</ul>


<p>Standard output is called cout. Other predefined output streams are cerr and clog. They are usually initialized to standard output <strong>but can be redirected</strong>.</p>

<h3>2. Handling files.</h3>

<ul>
<li>ifstream fin ( &#8220;myfile.in&#8221; ); opens stream fin for reading. This implicitly invokes the constructor ifstream( &#8220;myfile.in&#8221; ).</li>
<li>ifstream fin; creates an input stream not associated with a file. fin.open( &#8220;myfile.in&#8221; ); attaches it to a file. Can also specify open modes.</li>
<li>To test if fin failed to open correctly, write if (!fin) {…}.</li>
<li>To close, use fin.close();.</li>
</ul>


<p>Can read a line into a buffer with fin.get(buf, buflen);. This function stops before the newline is read. To continue, one must move past the newline with a simple fin.get(ch); or fin.ignore();.</p>

<h3>3. <strong>Manipulators</strong>.</h3>

<p>Manipulators are objects that can be arguments of <em>>></em> or <em>&lt;&lt;</em> but do not necessarily produce data.</p>

<p>Example:</p>

<pre><code>    cout &lt;&lt; hex &lt;&lt; x &lt;&lt; y &lt;&lt; dec &lt;&lt; z &lt;&lt; endl;
</code></pre>

<p>Prints x and y in hex and z in decimal. After printing z, a newline is printed and the output stream is flushed. Manipulators are used in place of C formats to control input and output formatting and conversions.</p>

<h3>4. Kinds of I/O errors and ways to handle them.</h3>

<h3>5. Error flags, their meaning and how they are set.</h3>

<p>I/O functions set status flags after each I/O operation. <strong>bad</strong> means there was a read or write error on the file I/O. <strong>fail</strong> means the data was not appropriate to the field, e.g., trying to read a non-numeric character into a numeric variable. <strong>eof</strong> means that the end of file has been reached. <strong>good</strong> means that the above three bits are all off.</p>

<p>The whole state can be read with one call to rdstate().</p>

<pre><code>    // getting state of stream object
    #include &lt;iostream&gt;
    #include &lt;fstream&gt;
    using namespace std;

    int main () {
        ifstream is;
        is.open ("test.txt");
        if ( (is.rdstate() &amp; ifstream::failbit ) != 0 ) // if failbit flag is on
            cerr &lt;&lt; "Error opening 'test.txt'\n";
        return 0;
    }
</code></pre>

<p>Functions are also provided for testing useful combinations of status bits.</p>

<ul>
<li>good() returns true if the good bit is set.</li>
<li>bad() returns true if the bad bit is set. This is not the same as !good().</li>
<li>fail() returns true if the bad bit or the fail bit is set.</li>
<li>eof() returns true if the eof bit is set.</li>
</ul>


<p>As in C, correct end of file and error checking require paying close attention to detail of exactly when these state bits are turned on.</p>

<p>To continue after a bit has been set, must call <strong>clear()</strong> to clear it.</p>

<ol>
<li>Extending operators. What operators can be extend and how? Advantages of extending operators.</li>
</ol>


<p>Operators can be extended to work with new types, for example, complex numbers. +-*/</p>

<p>The built-in arithmetic operators in C and C++ are generic; they are defined for all built-in numeric types. One of the purposes of an object-oriented language is to enable the programmer to define new classes and use them in the same ways that the built-in classes are used. Combining these two facts, we see a need to extend the built-in generic operators to work on new classes. An operator extension implements a built-in function for a new type in such a way that the intention and character of the original operator are preserved.</p>

<pre><code>    inline  
    ostream&amp; operator&lt;&lt;(ostream&amp; out, const Square&amp; sq) {  
        return sq.print(out);  
    }
</code></pre>

<h2>Functions and methods</h2>

<h3>1. Passing data to a function. What are the different ways to pass data to a function? Advantages of each method.</h3>

<ul>
<li>Call by value: The argument values are copied into the parameter storage locations in the function&#8217;s stack frame. There is no way for the function to change values in main&#8217;s stack frame.</li>
<li>Call by pointer: The arguments must be addresses of integer variables in the caller&#8217;s stack frame. These
addresses are stored in the parameter locations in the function&#8217;s stack frame. They permit the function to
modify its caller&#8217;s memory locations.</li>
<li>Call by reference: The arguments must be integer variables in the caller&#8217;s stack frame. The addresses of
these variables are stored in the parameter locations in the function&#8217;s stack frame, permitting the function to modify its caller&#8217;s memory locations.</li>
</ul>


<p>TODO advantages</p>

<h3>2. Receiving data from a function. How data can be passed back from a function? Can more than one value be returned?</h3>

<ul>
<li>Return by value.</li>
<li>Return by pointer.</li>
<li>Return by const T *</li>
<li>Return by reference</li>
<li><p>Return by const T &amp;</p>

<pre><code>  int ret0( int* ar ) { return ar[0]; } // Returns an integer R-value.
  int* ret1( int* ar ) { return &amp;ar[1]; } // A pointer R-value.
  const int* ret2( int* ar ) { return &amp;ar[2]; } // A read-only pointer R-value.
  int&amp; ret3( int* ar ) { return ar[3]; } // An L-value (reference).
  const int&amp; ret4( int* ar ) { return ar[4]; } // A read-only L-value reference.
</code></pre></li>
</ul>


<h2>Pointers and references</h2>

<h3>1. L-values and R-values.</h3>

<p>Something that can appear on the left is called an L-value.
Something that can appear on the right is called an R-value.
Intuitively, an L-value is the <strong>address of a storage location</strong> – some place where a value can be stored.
An R-value is a thing that can be placed in a storage location.
R-values are sometimes called <strong>pure data values</strong>.</p>

<p>The declaration int x = 3; says several things:</p>

<ul>
<li>All values that can be stored in x have type int.</li>
<li>The name x is bound (when the code is executed) to a storage location adequate to store an int.</li>
<li>The int value 3 is initially placed in x’s storage location.</li>
</ul>


<p>The assignment statement x = 3; means the following:</p>

<ul>
<li>Get an L-value from the left hand side (x).</li>
<li>Get an R-value from the right hand side (3).</li>
<li>Put the R value from step 2 into the storage location whose address was obtained from step 1.</li>
</ul>


<p>Given int x = 3;  int y = 4; Consider x = y; This is processed as before, except what does it mean to get an R-value from y?</p>

<p><strong>Whenever an L-value is presented and an R-value is needed, automatic deferencing occurs.</strong></p>

<p>This means to go the storage location specified by the presented L-value (y) and get its R-value (4).</p>

<p>Then the assignment takes place as before.</p>

<h3>2. References vs. pointers</h3>

<p>A pointer [reference value] is a primitive object with an associated L-value.</p>

<p>TODO</p>

<h3>3. Relationship between a reference and a pointer.</h3>

<p>TODO</p>

<h2>Derivation</h2>

<h3>1. What is derivation?</h3>

<p>One class can be derived from another.</p>

<p>Syntax:</p>

<pre><code>    class A {  
    public:  
        int x;  
        ...  
    };  
    class B : public A {  
        int y;  
        ...  
    };
</code></pre>

<p>A is the base class; B is the derived class.</p>

<p>B inherits the members from A.</p>

<h3>2. When to use and when not to use class derivation.</h3>

<p>Use</p>

<ul>
<li>To allow a family of related classes to share common parts.</li>
<li>To describe abstract interfaces like Java.</li>
<li>To allow generic methods with run-time dispatching.</li>
<li>To provide a clean interface between existing, non-modifiable code and added user code.</li>
</ul>


<h3>3. Structure of an object</h3>

<p>Structure of an object A simple object is like a struct in C. It consists of a block of storage large enough to contain all of its data members. An object of a derived class contains an instance of the base class followed by the data members of the derived class.</p>

<p>Example:</p>

<pre><code>    class B : A { …};
    B bObj;
</code></pre>

<p>Then “inside” of bObj is an A-instance!</p>

<h3>4. Referencing composed and base objects.</h3>

<h4>4.1 Referencing a composed object</h4>

<p>Contrast the previous example to</p>

<pre><code>    class B { A aObj; …};
    B bObj;
</code></pre>

<p>Here B composes A.</p>

<p>The embedded A object can be referenced using data member name aObj, e.g., bObj.aObj.</p>

<h4>4.2 Referencing a base object</h4>

<pre><code>    class A { public: int x; int y; …};
    class B : A { int y; …};
    B bObj;
</code></pre>

<ul>
<li>The data members of A can be referenced directly by name.</li>
<li>x refers to data member x in class A.</li>
<li>y refers to data member y in class B.</li>
<li>A::y refers to data member y in class A.</li>
<li>this points to the whole object. Its type is B*. It can be coerced to type A*.</li>
</ul>


<h3>5. Construction/destruction rules.</h3>

<h4>5.1 Construction rules</h4>

<p>The rule for an object of a simple class is:</p>

<ol>
<li>Call the constructor/initializer for each data member object in sequence.</li>
<li>Call the constructor for the class.</li>
</ol>


<p>The rule for an object of a derived class is:</p>

<ol>
<li>Call the constructor for the base class recursively.</li>
<li>Call the constructor/initializer for each data member object of the derived class in sequence.</li>
<li>Call the constructor for the derived class.</li>
</ol>


<h4>5.2 Destruction rules</h4>

<p>When an object is deleted, the destructors are called in the opposite order.</p>

<p>The rule for an object of a derived class is:</p>

<ol>
<li>Call the destructor for the dervied class.</li>
<li>Call the destructor for each data member object of the derived class in reverse sequence.</li>
<li>Call the destructor for the base class.</li>
</ol>


<h2>Error</h2>

<h3>1. Five kinds of failures. When different errors can occur?</h3>

<ul>
<li><strong>Memory leak</strong>—Dynamic storage that is no longer accessible but has not been deallocated.</li>
<li><strong>Amnesia</strong>—Storage values that mysteriously disapper.</li>
<li><strong>Bus error</strong>—Program crashes because of an attempt to access non-existant memory.</li>
<li><strong>Segmentation fault</strong>—Program crashes because of an attempt to access memory not allocated to your process.</li>
<li><strong>Waiting for eternity</strong>—Program is in a <em>permanent wait state</em> or an infinite loop.</li>
</ul>


<h3>2. Memory leaks – what they are, how they arise, how they can be detected and design patterns for avoiding them.</h3>

<h3>3. Memory management paradigms.</h3>

<h2>C++ Standard Library </h2>

<h3>1. What is the C++ Standard Library and how can it be used?</h3>

<h3>2. Two classes: stringstream and vector</h3>

<p>stringstream – permits I/O to an in-memory string-like object.</p>

<p>vector<T> – creates a growable array of objects of type T, where T can be any type.</p>

<h4>Class stringstream</h4>

<p>A stringstream object (in the default case) acts like an ostream object.</p>

<p>It can be used just like you would use cout.</p>

<p>The characters go into an internal buffer rather than to a file or device.</p>

<p>The buffer can be retrieved as a string using the str() member function.</p>

<p>stringstream example</p>

<p>Example: Creating a label from an integer.</p>

<pre><code>    #include &lt;sstream&gt;  
    ...  
    int examScore=94;  
    stringstream ss;  
    string label;  
    ss &lt;&lt; "Score=" &lt;&lt; examScore;  
    label = ss.str();  
    cout &lt;&lt; label &lt;&lt; endl;
    This prints Score=94.
</code></pre>

<h4>vector</h4>

<p><em>vector<T> myvec</em> is something like the C array T myvec[].</p>

<p>The element type T can be any primitive, object, or pointer type.</p>

<p>One big difference is that a vector starts empty (in the default case) and it grows as elements are appended to the end.</p>

<p>Useful functions:</p>

<ul>
<li>myvec.push_back( item ) appends item to the end.</li>
<li>myvec.size() returns the number of objects in myvec</li>
<li>myvec[k] returns the object in myvec with index k (assuming it exists.) Indices run from 0 to size()-1.
Other operations on vectors</li>
<li>Other operations include creating an empty vector, inserting, deleting, and copying elements, scanning through the vector, and so forth.</li>
<li>Liberal use is made of operator definitions to make vectors behave as much like other C++ objects as possible.</li>
<li>Vectors implement value semantics, meaning type T objects are copied freely within the vectors.</li>
<li>If copying is a problem, store pointers instead.
vector examples</li>
</ul>


<p>You must</p>

<pre><code>    #include &lt;vector&gt;.
</code></pre>

<p>Elements can be accessed using standard subscript notion.</p>

<p>Inserting at the beginning or middle of a vector takes time O(n).</p>

<p>Example:</p>

<pre><code>    vector&lt;int&gt; tbl(10);  // creates length 10 vector of int  
    tbl[5] = 7;           // stores 7 in slot #5  
    cout &lt;&lt; tbl[5];       // prints 7  
    tbl[10] = 4;          // illegal, but not checked!!!  
    cout &lt;&lt; tbl.at(5);    // prints 7  
    tbl.at(10) = 4;       // illegal and throws an exception  
    tbl.push_back(4);     // creates tbl[10] and stores 4  
    cout &lt;&lt; tbl.at(10);   // prints 4
</code></pre>

<h2>Class dependencies</h2>

<ol>
<li>Tightly coupled classes.</li>
</ol>


<p>Class B depends on class A if B refers to elements declared within class A or to A itself.</p>

<p>A pair of classes A and B are <strong>tightly coupled</strong> if each depends on the other.</p>

<ol>
<li>Circular dependencies.</li>
</ol>


<p>File list.hpp:</p>

<pre><code>        #pragma once  
        #include "cell.hpp"  
        class List { ... };
        File cell.hpp:

        #pragma once  
        #include "list.hpp"  
        class Cell { ... };
        File main.cpp:

        #include "list.hpp"  
        #include "cell.hpp"  
        int main() { ... }
</code></pre>

<p>Resolving circular dependencies</p>

<ul>
<li>Suppose the only reference to B in A is to declare a pointer. Then it works to put a <strong>“forward” declaration</strong> of B at the top of A.hpp, for example:

<pre><code>  class B;
  class A { B* bp; ... };
</code></pre></li>
<li>If a function defined in A references symbols of B, then the definition of the function must be moved outside the class and placed where it will be read after B has been read in, e.g., in the A.cpp file.</li>
<li>If the function needs to be inline, this is still possible, but it’s much trickier getting the inline function definition in the right place.</li>
</ul>


<h2>Visualization</h2>

<ol>
<li>Unified Modeling Language (UML)</li>
</ol>


<p>TODO</p>

<ol>
<li><p>Elementary design principles.</p></li>
<li><p>Privacy</p></li>
<li>Expert</li>
<li>Creation</li>
<li>Deletion</li>
<li>Consistency</li>
<li>Delegation</li>
<li>Don&#8217;t talk to strangers</li>
<li>Responsibility</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/13/fast-crash-recovery-in-ramcloud/">Fast Crash Recovery in RAMCloud (SOSP&#8217;11)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-13T12:22:00-08:00" pubdate data-updated="true">Dec 13<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.stanford.edu/~ouster/cgi-bin/home.php">Stanford</a>, <a href="http://www.stanford.edu/~ouster/cgi-bin/papers/ramcloud-recovery.pdf">paper</a>, <a href="https://ramcloud.stanford.edu/wiki/display/ramcloud/RAMCloud+Presentations">slides</a>, <a href="http://www.youtube.com/watch?v=RE3CmdEGv4M">video</a></p>

<h3>1. Problem</h3>

<p>RAMCloud is a storage system helping developers manage large-scale DRAM storage, driven by the fact that large-scale Web applications need to cache large data in DRAM. (For example, Facebook cached 150TB DRAM in <em>memcached</em> out of 200TB of disk storage.)</p>

<p>In order to keep a high level of durability and availability without impacting system performance, RAMCloud has only one single copy of data in DRAM. The problem here is how to recover from crash within 1s~2s.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/12/13/fast-crash-recovery-in-ramcloud/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/06/cleanos/">CleanOS: Limiting Mobile Data Exposure With Idle Eviction (OSDI&#8217;12)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-06T06:40:00-08:00" pubdate data-updated="true">Dec 6<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://systems.cs.columbia.edu/projects/cleanos/">Columbia University</a>, <a href="https://www.usenix.org/system/files/conference/osdi12/osdi12-final-203.pdf">paper</a> <a href="https://www.usenix.org/sites/default/files/conference/protected-files/tang_osdi12_slides.pdf">slides</a>, <a href="https://www.usenix.org/conference/osdi12/cleanos-increasing-mobile-data-control-cloud-based-eviction">video</a></p>

<h3>1. Problem</h3>

<p>How to protect sensitive data in mobile phones? Mobile devices are extremely prone to be stolen or lost.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/12/06/cleanos/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/06/chord/">Chord: A Scalable Peer-to-peer Lookup Service for Internet Applications</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-06T06:29:00-08:00" pubdate data-updated="true">Dec 6<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://pdos.lcs.mit.edu/chord/">MIT PDOS</a>, <a href="http://pdos.csail.mit.edu/papers/chord:sigcomm01/chord_sigcomm.pdf">paper</a>, <a href="http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=5&amp;cad=rja&amp;ved=0CGEQFjAE&amp;url=http%3A%2F%2Fpdos.csail.mit.edu%2Frtm%2Fslides%2Fsigcomm01.ppt&amp;ei=tYLAUNjmLoSt0AGb7YCoBw&amp;usg=AFQjCNHmlld_WDglWjj7TP_coYsk1O_l-A&amp;sig2=SO8yiWfEsi_V2VEI-F2pmw">slides</a></p>

<h3>1. Problem</h3>

<p><em>A lookup protocol</em>: How to locate the node that stores a data item in a dynamic P2P system with frequent node arrivals and departures? In other words, given a key, it maps the key onto a node.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/12/06/chord/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/01/cells/">Cells: A Virtual Mobile Smartphone Architecture (SOSP &#8216;11)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-01T19:52:00-08:00" pubdate data-updated="true">Dec 1<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://systems.cs.columbia.edu/archive/pub/2011/10/cells-a-virtual-mobile-smartphone-architecture/">Columbia University</a>, <a href="http://www.sigops.org/sosp/sosp11/current/2011-Cascais/printable/13-andrus.pdf">papers</a>, <a href="http://www.sigops.org/sosp/sosp11/current/2011-Cascais/13-andrus-slides.pdf">slides</a>, <a href="http://www.youtube.com/watch?v=XBBJ8873vqE">video</a></p>

<h3>1. Problem</h3>

<p>The popularity of smartphones results in the need that a user may purchase several smartphones for different uses. Virtual machine (VM) mechanisms may be the solution, which enables separate and isolated instances of a smartphone software stack to run on the same ARM hardware.</p>

<h3>2. Challenges</h3>

<p>Traditional VMs for desktops and servers can not be applied to smartphones for</p>

<ol>
<li>limited resources can not fully support running an another entire OS</li>
<li>existing design cannot leverage new devices, such as GPS, camera, GPUs, &#8230;</li>
</ol>


<h3>3. Solution</h3>

<p>Key observation: <strong>one app at a time</strong></p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/12/01/cells/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/11/27/wang-gong-quan-jiang-zuo/">王功权先生给年轻人的四点建议</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-11-27T16:34:00-08:00" pubdate data-updated="true">Nov 27<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>概述</h3>

<p>方才在和朋友们一起去管理学院参加了王功权先生的讲座，期间做了一些笔记，稍作整理记录在此。王功权先生似乎并没有为这次演讲做过多的准备，也不愿意表现地太过正式，毕竟谈人生这种事情，还是需要明月夜短松冈这种微醺的情怀的。实际的情况可能是，他在从哥伦比亚大学过来的路上稍微用iPhone写了个提纲，讲述之前看了几眼，便开始侃侃而谈，当然，情到深处之时，还是让人颇有触动的，不愧为一位诗人。以下的记录纯属个人笔记，有我个人理解的偏差，并不能确保准确地反映王功权先生的观点，也不反映我自己的观点。</p>

<p>他讲述的这四点建议分别是：</p>

<ol>
<li>规划未来不如调整现在</li>
<li>志存高远</li>
<li>选择意味着放弃</li>
<li>在美国就业，在中国创业</li>
</ol>


<p>在其后的问答环节中，他回答同学们提出的两个问题：</p>

<ol>
<li>简要介绍您现在在哥伦比亚大学东亚研究所研究的“公民社会”这一议题？</li>
<li>对经济管理类毕业生就业领域选择有那些建议？</li>
</ol>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/11/27/wang-gong-quan-jiang-zuo/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <ul class="pager">
    
    <li class="previous"><a href="/blog/page/3/">&larr; Older</a></li>
    
    <li><a href="/blog/archives">Blog Archives</a></li>
    
    <li class="next"><a href="/">Newer &rarr;</a></li>
    
  </ul>
</div>
<aside class="sidebar-nav span3">
  
    <section class="well">
  <script src="/javascripts/onmouseoverpuncsky.js" type="text/javascript"> </script>
  <img onmouseover="enlight(this)" onmouseout="darken(this)" src="/puncsky-gray.png" alt="puncsky" style="max-width:100%;">
  <h4>Puncsky</h4>
  <p><i>who strives on and lives to strive</i></p>
  <p><a href="https://www.github.com/puncsky/">Github</a></p>
</section>
<section class="well">
  <ul id="recent_posts" class="nav nav-list">
    <li class="nav-header">Recent Posts</li>
    
      <li class="post">
        <a href="/blog/2013/06/11/%5B%3F%5D-ben-chu-chuang-gong-si-de-hui-yi-lu-%3C%3Cda-zao-facebook%3E%3E/">中国工程师在初创公司的经验总结&#8211;《打造Facebook》</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/01/2013nian-wu-yue-fen-yue-du-ji-lu/">2012年9月至2013年5月阅读记录</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/01/bo-lan-zhuang-kuo-de-gai-ge-kai-fa-shi-hua-%3C%3Cji-dang-san-shi-nian-%3E%3E-du-hou-gan/">波澜壮阔的改革开放史话——《激荡三十年》读后感</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/14/ren-sheng-shi-yuan/">人生十愿</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/06/dynamo-kv-store/">Dynamo: Amazon&#8217;s Highly Available Key-value Store (SOSP&#8217;07)</a>
      </li>
    
  </ul>
</section>
<section class="well">
	<div id="clustrmaps-widget"></div><script type="text/javascript">var _clustrmaps = {'url' : 'http://www.puncsky.com', 'user' : 1100959, 'server' : '2', 'id' : 'clustrmaps-widget', 'version' : 1, 'date' : '2013-06-24', 'lang' : 'en', 'corners' : 'square' };(function (){ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'http://www2.clustrmaps.com/counter/map.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);})();</script><noscript><a href="http://www2.clustrmaps.com/user/92810cc9f"><img src="http://www2.clustrmaps.com/stats/maps-no_clusters/www.puncsky.com-thumb.jpg" alt="Locations of visitors to this page" /></a></noscript>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo" class="page-footer"><hr>
<p>
  Copyright &copy; 2013 - Tian -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
