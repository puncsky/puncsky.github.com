
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Puncsky CS Notebook</title>
  <meta name="author" content="Tian">

  
  <meta name="description" content="Life and computer science notebook from Puncsky">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.puncsky.com/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <style type="text/css">
    body {
      padding-bottom: 40px;
    }
    h1 {
      margin-bottom: 15px;
    }
    img {
      max-width: 100%;
    }
    .sharing, .meta, .pager {
      margin: 20px 0px 20px 0px;
    }
    .page-footer p {
      text-align: center;
    }
  </style>
  <script src="/javascripts/libs/jquery.js"></script>
  <script src="/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/bootstrap.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Puncsky CS Notebook" type="application/atom+xml">
  <link href="http://fonts.googleapis.com/css?family=Ubuntu:300,400,500,700,300italic,400italic,500italic,700italic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,500italic,700italic,300,400,500,700,800" rel="stylesheet" type="text/css">
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js">
  MathJax.Hub.Config({
   extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"],
   jax: ["input/TeX", "output/HTML-CSS"],
   tex2jax: {
       inlineMath: [ ['$','$'], ["\\(","\\)"] ],
       displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
   },
   "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43072488-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><div class="navbar navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <a class="brand" href="/">Puncsky CS Notebook</a>

      <div class="nav-collapse">
        <ul class="nav">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>


        <ul class="nav pull-right" data-subscription="rss">
          <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
          
        </ul>

        
          <form class="pull-right navbar-search" action="http://google.com/search" method="get">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:www.puncsky.com" />
              <input class="search-query" type="text" name="q" results="0" placeholder="Search"/>
            </fieldset>
          </form>
        
      </div>
    </div>
  </div>
</div>
</nav>
  <div class="container">
    <div class="row-fluid">
      <div class="span9">
  
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/06/01/bo-lan-zhuang-kuo-de-gai-ge-kai-fa-shi-hua-%3C%3Cji-dang-san-shi-nian-%3E%3E-du-hou-gan/">波澜壮阔的改革开放史话——《激荡三十年》读后感</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-01T11:32:00-07:00" pubdate data-updated="true">Jun 1<span>st</span>, 2013</time>
        
         | <a href="/blog/2013/06/01/bo-lan-zhuang-kuo-de-gai-ge-kai-fa-shi-hua-%3C%3Cji-dang-san-shi-nian-%3E%3E-du-hou-gan/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>自1978年改革开放以来，中国经济突飞猛进，摸着石头过河让这片蓝海充满了危险、机遇以及不确定性，然而混沌孕新生，乱世出英雄，一大批企业家们迅速地完成了原始积累；当然，我们也不能忘记路边的累累白骨：他们都是国富民强最直接的功臣，是新时代最伟大的英雄。</p>

<p>他们要么是想人之不敢想，打改革的擦边球，有勇气面对风险，风险有多大，他们最后就取得了多大的成就；要么是运用专业头脑，或者引进外国的先进技术或者理念，步步为营。后生们想要有所建树，最简单直接的办法就是单点快速突破，继而精益求精。</p>

<p>以下是我整理的一些摘录。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/06/01/bo-lan-zhuang-kuo-de-gai-ge-kai-fa-shi-hua-%3C%3Cji-dang-san-shi-nian-%3E%3E-du-hou-gan/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/05/14/ren-sheng-shi-yuan/">人生十愿</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-14T04:18:00-07:00" pubdate data-updated="true">May 14<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/05/14/ren-sheng-shi-yuan/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>毕业啦！</p>

<p>世事总不尽如人意，而贪心如我者，尝试写下人生的十个愿望；倘若某日能够实现十之八九，也就算是此生无悔啦！</p>

<ol>
<li>月高风黑的时候总是可以拉上三五好友宵夜。老到住进养老院的时候总有大爷大妈陪着打麻将。</li>
<li>亲朋好友，还有我，都能够快乐健康地活着，不求有多大的出息，但求日子过得欢喜，无论多舒适还是多苦逼，都能够坚持自己选择的路，得瑟得瑟屁颠屁颠地走下去。</li>
<li>有个萌妹子一起玩儿，我们都有健美的体魄心态和性格，开开心心玩上一辈子。</li>
<li>拥有一家自己的互联网公司，创造有趣有用的产品，这是时代赋予青年们的使命。感激上苍让我们CSer成为时代的弄潮儿。</li>
<li>拿到一个PhD学位，不仅是因为“谁有知识我就对谁佩服得五体投地”，而且理想主义的说，他们至少对人类知识做出了一丁点儿的贡献。完全没有贡献？那就不要浪费时间啦！</li>
<li>写一本好书、绘一幅好画、填一篇好诗词、吟一支小曲儿、拍一部好电影。</li>
<li>有精力、财力或者智力帮助他人，尤其是年轻人。</li>
</ol>


<p>剩下的三个，以后再许！</p>

<p>EOF</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/04/06/dynamo-kv-store/">Dynamo: Amazon&#8217;s Highly Available Key-value Store (SOSP&#8217;07)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-06T14:16:00-07:00" pubdate data-updated="true">Apr 6<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/06/dynamo-kv-store/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>From <a href="http://www.allthingsdistributed.com/2007/10/amazons_dynamo.html">Amazon</a></p>

<h3>Comments</h3>

<p>Dynamo successfully builds a highly available and scalable data store, which sacrifices consistency under certain failure scenarios but the data storage is still eventually consistent. The system is complex and thus this paper involves a huge number of details. However, the paper could not specify all of them. Some interesting parts seem to be missing. What are the supporting techniques used in Dynamo? How is it compared to other existing KV distributed store systems? Are there any possible extensions or future works?</p>

<p>This paper assumes that security concerns can be ignored for its internal use. Theoretically, security problems is still possible. At least, how can the administrator detect sybil attacks?</p>

<p>The author tried three partition schemes. The latter versions decouple partitioning and partition placement. The placement is changeable at run time. Consequently, the strategy 3 has a better efficiency. And the system recovers faster and it is easier to archive. However, the key space is partitioned equally into Q partitions, and every node assume Q/S tokens per node. The strategy 3 in Figure 7 is a little confusing. The author should specify that the span each node is responsible for is SIMILAR IN SIZE to each other, instead of exactly EQUAL IN SIZE to each other.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/04/06/dynamo-kv-store/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/01/27/hadoopdb-vldb-09/">HadoopDB (VLDB&#8217;09)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-27T15:50:00-08:00" pubdate data-updated="true">Jan 27<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/01/27/hadoopdb-vldb-09/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://db.cs.yale.edu/hadoopdb/hadoopdb.html">Yale DB</a></p>

<h3>Comments</h3>

<p>Two ways to improve HadoopDB</p>

<ol>
<li>Integrate the file system for local database with HDFS. In the design of HadoopDB, the file system and the database are separated, which means that the more space one part is preallocated and the less space the other part will occupy. This design is not scalable because the system administrator has to partition the space by hand. We could investigate a way to let the database run on the HDFS directly. The database&#8217;s file descriptor can be adapted to HDFS directly. Or, even better, we can add an extra virtualized layer between the database and the HDFS.</li>
<li>Set up a better scheduler. It is mentioned in the paper that the original version of hadoop fair scheduler is not so good. It is queue-based and locally greedy and simply does not consider the big picture much. &#8220;Quincy: Fair Scheduling for Distributed Computing Clusters&#8221; advances a flow-based algorithm, which has a very good performance by increasing the throughput up to 40%.</li>
</ol>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/01/27/hadoopdb-vldb-09/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/01/14/gc-garbage-collection-in-java/">GC(Garbage Collection) in Java</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-14T00:18:00-08:00" pubdate data-updated="true">Jan 14<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/01/14/gc-garbage-collection-in-java/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>本文摘录自<a href="http://www.amazon.com/Thinking-Java-4th-Bruce-Eckel/dp/0131872486">Thinking in Java</a></p>

<h2>1. The method  <code>finalize()</code></h2>

<p><code>finalize()</code>使用时，会在GC释放空间之前被调用到，目的是在GC的时候做一些特殊的清理工作；但<strong>finalize()绝不是C++里面的destructor，因为</strong></p>

<p>1.对象<strong>不一定会</strong>被GC (而C++里析构函数一定会被调用到)</p>

<p>2.GC不等于析构</p>

<p>既然有GC，Java就没有必要用到析构函数，所以如果有需要在GC时候额外做些事情，就使用finalize()做最后的清理工作，<strong>尽管它不一定会被调用到，除非JVM没有内存空间了</strong>。</p>

<p>3.GC仅和内存有关</p>

<p>既然Java本身内存回收问题就被GC解决了，为什么还要finalize()呢？<strong>因为，Java可能内嵌其他语言的代码，如果有类似C的内存处理函数malloc()，就必须要手动写free()。</strong>因此，finalize()极少会被用到。</p>

<p>C++创建对象的位置有两种，一是创建在本地的stack上，自动销毁于本段代码的回花括号处，另一个是创建在heap上，必须用<strong>delete</strong>手动销毁。Java不允许创建本地对象，必须使用<strong>new</strong>，但是既然有了GC就不用delete.</p>

<p>总之，要记住的是，GC和finalize()并不总会被调用到。</p>

<p>finalize()可以用到debug，代码如下</p>

<figure class='code'><figcaption><span>TerminationCondition.java</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
</span><span class='line'>    <span class="kt">boolean</span> <span class="n">checkedOut</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span><span class='line'>    <span class="n">Book</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">checkOut</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">checkedOut</span> <span class="o">=</span> <span class="n">checkOut</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kt">void</span> <span class="nf">checkIn</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">checkedOut</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">finalize</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">if</span><span class="o">(</span><span class="n">checkedOut</span><span class="o">)</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Error: checked out.&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="c1">// Normally, you’ll also do this:</span>
</span><span class='line'>        <span class="c1">// super.finalize(); // Call the base-class version</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TerminationCondition</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">//static Test monitor = new Test();</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">Book</span> <span class="n">novel</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span><span class='line'>      <span class="c1">// Proper cleanup:</span>
</span><span class='line'>      <span class="n">novel</span><span class="o">.</span><span class="na">checkIn</span><span class="o">();</span>
</span><span class='line'>      <span class="c1">// Drop the reference, forget to clean up:</span>
</span><span class='line'>      <span class="k">new</span> <span class="nf">Book</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span><span class='line'>      <span class="c1">// Force garbage collection &amp; finalization:</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">gc</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="cm">/* output:</span>
</span><span class='line'><span class="cm"> Error: checked out.</span>
</span><span class='line'><span class="cm"> */</span>
</span></code></pre></td></tr></table></div></figure>


<p>此处，<code>System.gc()</code> 强制<code>finalize()</code>必须执行。<strong>如果有finalize(),一般情况下，父类的finalize()也必须被执行到</strong>，所以<code>Book.finalize()</code>中有<code>super.finalize()</code>。</p>

<h2>2. GC的工作机制</h2>

<p>Java中在heap上new东西并不像其他语言那么expensive，几乎和其他语言在stack上创建对象一样快。</p>

<p>非Java的GC机制：<em>reference counting</em> 数对象被引用了多少次，当等于零时就被清理掉。</p>

<p>Java的机制：<strong><em>adaptive generational stop-and-copy mark-and-sweep.</em></strong> 所有未死的对象都可以追溯到stack或者static storage上的一个引用，形成一个个web。这时候，也有不同的处理方式：</p>

<ol>
<li><em>stop-and-copy</em>. 如果程序停下来了，将活的对象拷贝到新的heap上，垃圾就被留在了原来的heap。新heap上的对象也可以被排列得更加紧凑(compact)了。有两个问题：

<ul>
<li>保持两个heap</li>
<li>周期性拷贝，即便没有new新的东西，或者产生的垃圾很少，会导致浪费，所以需要另一个机制处理这种特殊的情况</li>
</ul>
</li>
<li><em>mark-and-sweep</em>. 比较慢，但是在产生少量垃圾或者没有垃圾时候非常快。做法是，标记活对象，所有的标记完成后，扫除没有标记的对象。</li>
</ol>


<p>如何做到adaptive地进行转化呢？JVM的内存分布在很多大的block当中。大的对象，可以独占block，不拷贝，而是增加其<em>generation count</em>，内含小对象的block则会被拷贝并整理。JVM会进行监视,如果所有对象都很稳定,GC效率降低的话,就切换到<em>mark-and-sweep</em>;同样, JVM会注意其效果,要是heap出现很多碎片,就会切换回<em>stop-and-copy</em>。</p>

<p>EOF</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/01/08/clrs-2-advanced/">CLRS 2: Advanced</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-08T16:43:00-08:00" pubdate data-updated="true">Jan 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/01/08/clrs-2-advanced/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post is the second pard of my series notes on the remarkable textbook <a href="http://mitpress.mit.edu/books/introduction-algorithms">Introduction to Algorithm</a> (a.k.a CLRS).</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/01/08/clrs-2-advanced/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/01/07/clrs-1-basics/">CLRS 1: Basics</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-07T14:55:00-08:00" pubdate data-updated="true">Jan 7<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/01/07/clrs-1-basics/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>I Foundations</h2>

<h3>1 The Role of Algorithms in Computing 5</h3>

<h4>1.1 Algorithms 5</h4>

<p>An algorithm is thus a sequence of computational steps that transform the input into the output.</p>

<h4>1.2 Algorithms as a technology 11</h4>

<p>lg n &lt; sqrt(n) &lt; n &lt; n lg(n) &lt; n<sup>2</sup> &lt; n<sup>3</sup> &lt; n!</p>

<h3>2 Getting Started 16</h3>

<h4>2.1 Insertion sort 16</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="kt">void</span> <span class="n">insertionSort</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kt">double</span> <span class="n">key</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>          <span class="k">while</span> <span class="p">(</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
</span><span class='line'>              <span class="o">--</span> <span class="n">index</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>2.2 Analyzing algorithms 23</h4>

<p>insertion sort has a worst-case running time of Θ(n<sup>2)</sup></p>

<h4>2.3 Designing algorithms 29</h4>

<p>The divide-and-conquer approach and recursive</p>

<ul>
<li>Divide: left and right subarrays</li>
<li>Conquer: recursively sort left and right</li>
<li>Combine: merge by comparing two numbers from the sorted left and right pair by pair</li>
</ul>


<figure class='code'><figcaption><span>mergeSort.cpp</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="c1">//Input:</span>
</span><span class='line'>  <span class="c1">// A array</span>
</span><span class='line'>  <span class="c1">// size size of A</span>
</span><span class='line'>  <span class="c1">// p starting index of the span waiting to be sorted</span>
</span><span class='line'>  <span class="c1">// r ending index of the span waiting to be sorted</span>
</span><span class='line'>  <span class="c1">//Procedure:</span>
</span><span class='line'>  <span class="c1">// sort left</span>
</span><span class='line'>  <span class="c1">// sort right</span>
</span><span class='line'>  <span class="c1">// merge by comparing two numbers from the sorted left and right pair by pair</span>
</span><span class='line'>  <span class="c1">//Output:</span>
</span><span class='line'>  <span class="c1">// A sorted array </span>
</span><span class='line'>    <span class="kt">void</span> <span class="n">mergeSort</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">b</span><span class="o">+</span><span class="n">e</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>          <span class="n">mergeSort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">mid</span><span class="p">);</span>
</span><span class='line'>          <span class="n">mergeSort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
</span><span class='line'>          <span class="c1">// merge</span>
</span><span class='line'>          <span class="kt">int</span><span class="o">*</span> <span class="n">left</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">mid</span><span class="o">-</span><span class="n">b</span><span class="o">+</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span><span class='line'>          <span class="kt">int</span><span class="o">*</span> <span class="n">right</span><span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">e</span><span class="o">-</span><span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">mid</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="n">left</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">left</span><span class="p">[</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="o">-</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">e</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="n">right</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">right</span><span class="p">[</span><span class="n">e</span><span class="o">-</span><span class="n">mid</span><span class="p">]</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">e</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">left</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">right</span><span class="p">[</span><span class="n">j</span><span class="p">])</span><span class="o">?</span><span class="p">(</span><span class="n">left</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">])</span><span class="o">:</span><span class="p">(</span><span class="n">right</span><span class="p">[</span><span class="n">j</span><span class="o">++</span><span class="p">]);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">delete</span><span class="p">[]</span> <span class="n">left</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span><span class="p">[]</span> <span class="n">right</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<ul>
<li>Θ(n lg n) but not operate in place</li>
</ul>


<h3>3 Growth of Functions 43</h3>

<h4>3.1 Asymptotic notation 43</h4>

<ul>
<li><strong>O()</strong>. When we have only an <strong>asymptotic upper bound</strong>, we use O-notation.

<ul>
<li>O(g(n)) = {f(n): there exist positive constants c and n0 such that 0 &lt;= f(n) &lt;= c*g(n) for all n >= n0}.</li>
<li>if f(n) == c*g(n) is not possible, we use <strong>o()</strong></li>
</ul>
</li>
<li><strong>Θ()</strong>. When we have <strong>both an asymptotic upper bound and an asymptotic lower bound</strong>, we use Θ-notation.

<ul>
<li>Θ(g(n)) = {f(n): there exist positive constants c1, c2, and n0 such that 0 &lt;= c1<em>g(n) &lt;= f(n) &lt;= c2</em>g(n) for all n >=  n0}</li>
</ul>
</li>
<li><strong>Ω()</strong>, When we have only an <strong>asymptotic lower bound</strong>, we use omega-notation.

<ul>
<li>uppercase_omega(g(n)) = {f(n): there exist positive constants c and n0 such that 0 &lt;= c*g(n) &lt;=  f(n) for all n >= n0}</li>
<li>if f(n) == c*g(n) is not possible, we use <strong>ω()</strong></li>
</ul>
</li>
</ul>


<h4>3.2 Standard notations and common functions 53</h4>

<h3>4 Divide-and-Conquer 65</h3>

<ul>
<li>Three ways for solving recurrences

<ul>
<li>substitution method</li>
<li>recursive-tree method</li>
<li>master method

<ul>
<li>T(n) = a*T(n/b) + f(n), a>=1, b>1. It characterizes a divide- and-conquer algorithm that creates <em>a</em> subproblems, each of which is <em>1/b</em> the size of the original problem, and in which the divide and combine steps together take f(n) time.</li>
</ul>
</li>
</ul>
</li>
</ul>


<h4>4.1 The maximum-subarray problem 68</h4>

<p>In the stock market, you need to buy low and sell high. But the maximum profit does not always start at the lowest price or end at the highest price.</p>

<h5>A brute-force solution</h5>

<p>Choose 2 from n pairs of (date, price) and calculate the difference. Θ(n<sup>2)</sup></p>

<h5>A solution using divide-and-conquer</h5>

<p>A transformation: create an array of the daily change in price, and <strong>find the maximum subarray</strong>.</p>

<ul>
<li>find the max subarray on the left</li>
<li>find the max subarray on the right</li>
<li>find the max subarray crossing the middle

<ul>
<li>find max left, max right, and their sum</li>
</ul>
</li>
<li>take the max of the above</li>
</ul>


<p>TODO: codes</p>

<p>Θ(n*lg(n))</p>

<h4>4.2 Strassen’s algorithm for matrix multiplication 75</h4>

<p>O(n<sup>3)</sup> to O(n<sup>2.81)</sup></p>

<h4>4.3 The substitution method for solving recurrences</h4>

<ol>
<li>Guess the form of the solution.</li>
<li>Use mathematical induction to find the constants and show that the solution works.</li>
</ol>


<h4>4.4 The recursion-tree method for solving recurrences 88</h4>

<p>depth * height</p>

<h4>4.5 The master method for solving recurrences 93</h4>

<p><img src="http://puncsky.github.com/images/CLRS/mastermethod.png" alt="Master Method" /></p>

<h3>5 Probabilistic Analysis and Randomized Algorithms 114</h3>

<p>5.1 The hiring problem 114
5.2 Indicator random variables 118
5.3 Randomized algorithms 122
5.4 Probabilistic analysis and further uses of indicator random variables</p>

<h2>II Sorting and Order Statistics Introduction 147</h2>

<table>
  <tr>
    <th></th>
    <th>worst-case running time</th>
    <th>average-cased running time</th>
  </tr>
  <tr>
    <th>Insertion sort</th>
    <td>Θ(n^2)</td>
    <td>Θ(n^2)</td>
  </tr>
  <tr>
    <th>Merge sort</th>
    <td>Θ(n lg n)</td>
    <td>Θ(n lg n)</td>
  </tr>
  <tr>
    <th>Heapsort</th>
    <td>O(n lg n)</td>
    <td>-</td>
  </tr>
  <tr>
    <th>Quicksort</th>
    <td>Θ(n^2)</td>
    <td>Θ(n lg n) (*)</td>
  </tr>
  <tr>
    <th>Counting sort</th>
    <td>Θ(k+n)</td>
    <td>Θ(k+n)</td>
  </tr>
  <tr>
    <th>Radix sort</th>
    <td>Θ(d(n+k))</td>
    <td>Θ(d(n+k))</td>
  </tr>
  <tr>
    <th>Bucket sort</th>
    <td>Θ(n^2)</td>
    <td>Θ(n) </td>
  </tr>
</table>


<h3>6 Heapsort 151</h3>

<p>O(n lg n),Our heap data structure is not garbage-collected storage.</p>

<figure class='code'><figcaption><span>heap.hpp</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>  <span class="cp">#include &lt;cstdlib&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Heap</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">Heap</span><span class="p">()</span><span class="o">:</span><span class="n">m_array</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">m_size</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">m_maxSize</span><span class="p">(</span><span class="mi">0</span><span class="p">){}</span>
</span><span class='line'>      <span class="n">Heap</span><span class="p">(</span><span class="kt">int</span> <span class="n">maxSize</span><span class="p">);</span>
</span><span class='line'>      <span class="o">~</span><span class="n">Heap</span><span class="p">(){</span><span class="k">delete</span> <span class="p">[]</span> <span class="n">m_array</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">insert</span><span class="p">(</span><span class="n">T</span> <span class="n">item</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">isEmpty</span><span class="p">();</span>
</span><span class='line'>      <span class="n">T</span> <span class="n">fetchMax</span><span class="p">();</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">deleteMax</span><span class="p">();</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">display</span><span class="p">();</span>
</span><span class='line'>      <span class="c1">//Transfer Array&lt;T&gt; to a heap</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">arrayToHeap</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">array</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">);</span>
</span><span class='line'>      <span class="c1">//Sort the heap</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">heapSort</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">locate_down</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">locate_up</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="n">T</span><span class="o">*</span> <span class="n">m_array</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">m_size</span><span class="p">;</span><span class="c1">//num of elem stored</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">m_maxSize</span><span class="p">;</span><span class="c1">//allocated memory</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Heap</span><span class="p">(</span><span class="kt">int</span> <span class="n">maxSize</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">m_array</span><span class="o">=</span><span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="n">maxSize</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>      <span class="n">m_size</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="n">m_maxSize</span><span class="o">=</span><span class="n">maxSize</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">T</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">fetchMax</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">isEmpty</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">m_size</span><span class="o">==</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">locate_down</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">c</span><span class="o">=</span><span class="n">start</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">temp</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span><span class="p">(</span><span class="n">c</span><span class="o">&lt;=</span><span class="n">end</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span><span class="p">((</span><span class="n">c</span><span class="o">&lt;</span><span class="n">end</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">m_array</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">&lt;</span><span class="n">m_array</span><span class="p">[</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span> <span class="c1">//Pick the larger one in both childs. ATTENTION: c==end is not approved!!</span>
</span><span class='line'>              <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="n">m_array</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">&lt;</span><span class="n">m_array</span><span class="p">[</span><span class="n">c</span><span class="p">])</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>              <span class="n">temp</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">start</span><span class="p">];</span>
</span><span class='line'>              <span class="n">m_array</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">c</span><span class="p">];</span>
</span><span class='line'>              <span class="n">m_array</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">start</span><span class="o">=</span><span class="n">c</span><span class="p">;</span>
</span><span class='line'>          <span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">c</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>  <span class="c1">//overlap the top with the bottom, decrease the size, and locate_down</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">deleteMax</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">m_size</span><span class="p">];</span>
</span><span class='line'>      <span class="o">--</span><span class="n">m_size</span><span class="p">;</span>
</span><span class='line'>      <span class="n">locate_down</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">m_size</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">locate_up</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">loc</span><span class="o">=</span><span class="n">end</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">parent</span><span class="o">=</span><span class="n">end</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">temp</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span><span class="p">(</span><span class="n">parent</span><span class="o">&gt;=</span><span class="n">start</span> <span class="o">&amp;&amp;</span> <span class="n">m_array</span><span class="p">[</span><span class="n">loc</span><span class="p">]</span><span class="o">&lt;</span><span class="n">m_array</span><span class="p">[</span><span class="n">parent</span><span class="p">])</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">temp</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">loc</span><span class="p">];</span>
</span><span class='line'>          <span class="n">m_array</span><span class="p">[</span><span class="n">loc</span><span class="p">]</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">parent</span><span class="p">];</span>
</span><span class='line'>          <span class="n">m_array</span><span class="p">[</span><span class="n">parent</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
</span><span class='line'>          <span class="n">loc</span><span class="o">=</span><span class="n">parent</span><span class="p">;</span>
</span><span class='line'>          <span class="n">parent</span><span class="o">=</span><span class="n">loc</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">insert</span><span class="p">(</span><span class="n">T</span> <span class="n">item</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">m_size</span><span class="o">==</span><span class="n">m_maxSize</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="o">&lt;&lt;</span><span class="s">&quot;Heap is full&quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="k">this</span><span class="o">-&gt;~</span><span class="n">Heap</span><span class="p">();</span>
</span><span class='line'>          <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="o">++</span><span class="n">m_size</span><span class="p">;</span>
</span><span class='line'>      <span class="n">m_array</span><span class="p">[</span><span class="n">m_size</span><span class="p">]</span><span class="o">=</span><span class="n">item</span><span class="p">;</span>
</span><span class='line'>      <span class="n">locate_up</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">m_size</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">display</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">m_size</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="s">&quot; &quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">arrayToHeap</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">array</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">m_maxSize</span><span class="o">=</span><span class="n">size</span><span class="p">;</span>
</span><span class='line'>      <span class="n">m_array</span><span class="o">=</span><span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="n">m_maxSize</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>          <span class="k">this</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
</span><span class='line'>      <span class="k">this</span><span class="o">-&gt;</span><span class="n">heapSort</span><span class="p">();</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>          <span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">Heap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">heapSort</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">T</span> <span class="n">temp</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="n">m_size</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">temp</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>          <span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>          <span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
</span><span class='line'>          <span class="n">locate_down</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>6.1 Heaps 151</h4>

<p>The (binary) heap data structure is an array object that we can view as a nearly complete binary tree.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="c1">// calculate by shifting the binary representation</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">parent</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">i</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">left</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">right</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>max-heap: for every node <em>i</em> other than the root, A[parent(i)]>=A[i].</li>
<li>min-heap: for every node <em>i</em> other than the root, A[parent(i)]&lt;=A[i].</li>
<li>height of a node: number of edges on the longest simple downward path from the node to a leaf.</li>
<li>height of the heap: height of its root. Θ(lg n)</li>
</ul>


<h4>6.2 Maintaining the heap property 154</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="c1">// Input:</span>
</span><span class='line'>  <span class="c1">//         A array</span>
</span><span class='line'>  <span class="c1">//     i index</span>
</span><span class='line'>  <span class="c1">//   Binary trees rooted at left(i) and right(i) are max-heaps</span>
</span><span class='line'>  <span class="c1">//   but A[i] might be smaller than its children. </span>
</span><span class='line'>  <span class="c1">// Procedure:</span>
</span><span class='line'>  <span class="c1">//     exchange A[i] with the larger one between A[left[i]] and A[right[i]]</span>
</span><span class='line'>  <span class="c1">//     maxHeapify the new sub tree</span>
</span><span class='line'>  <span class="c1">// Output:</span>
</span><span class='line'>  <span class="c1">//     This routine lets the value at A[i] float down in the max-heap. </span>
</span><span class='line'>  <span class="n">maxHeapify</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">TODO</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>T(n) &lt;= T(2*n/3) + Θ(1), T(n) = O(lg n) = O(height)</p>

<h4>6.3 Building a heap 156</h4>

<p>conduct maxHeapify upon the array from the rear to the head</p>

<p>O(n)</p>

<h4>6.4 The heapsort algorithm 159</h4>

<p>build max-heap, exchange the root with the end of heap, and maxHeapify the rest of the heap.</p>

<h4>6.5 Priority queues 162</h4>

<p>one of the most popular applications of a heap: as an efficient priority queue. It can be used to schedule jobs on a shared computer. Highest-priority job first.</p>

<figure class='code'><figcaption><span>prioqueue.hpp</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">PrioQueue</span> <span class="c1">//Min Heap</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">PrioQueue</span><span class="p">(</span><span class="kt">int</span> <span class="n">mSize</span><span class="o">=</span><span class="mi">20</span><span class="p">);</span>
</span><span class='line'>      <span class="o">~</span><span class="n">PrioQueue</span><span class="p">(){</span><span class="k">delete</span> <span class="p">[]</span> <span class="n">q</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span><span class="k">return</span> <span class="n">size</span><span class="o">==</span><span class="mi">0</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsFull</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span><span class="k">return</span> <span class="n">size</span><span class="o">==</span><span class="n">maxSize</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">Append</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">Serve</span><span class="p">(</span><span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">AdjustDown</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">AdjustUp</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">);</span>
</span><span class='line'>      <span class="n">T</span> <span class="o">*</span><span class="n">q</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="n">maxSize</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">PrioQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">PrioQueue</span><span class="p">(</span><span class="kt">int</span> <span class="n">mSize</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">maxSize</span><span class="o">=</span><span class="n">mSize</span><span class="p">;</span>
</span><span class='line'>      <span class="n">size</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="n">q</span><span class="o">=</span><span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="n">maxSize</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">PrioQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">AdjustDown</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">start</span><span class="o">&lt;</span><span class="n">end</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">parent</span><span class="o">=</span><span class="n">start</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">child</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">parent</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>          <span class="k">while</span><span class="p">(</span><span class="n">child</span><span class="o">&lt;=</span><span class="n">end</span><span class="p">)</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span><span class="p">((</span><span class="n">child</span><span class="o">&lt;</span><span class="n">end</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">&gt;</span><span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span>
</span><span class='line'>                  <span class="n">child</span><span class="o">=</span><span class="n">child</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>              <span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="n">parent</span><span class="p">]</span><span class="o">&gt;</span><span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">])</span>
</span><span class='line'>              <span class="p">{</span>
</span><span class='line'>                  <span class="n">T</span> <span class="n">temp</span><span class="o">=</span><span class="n">q</span><span class="p">[</span><span class="n">parent</span><span class="p">];</span>
</span><span class='line'>                  <span class="n">q</span><span class="p">[</span><span class="n">parent</span><span class="p">]</span><span class="o">=</span><span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">];</span>
</span><span class='line'>                  <span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">else</span> <span class="k">break</span><span class="p">;</span>
</span><span class='line'>              <span class="n">parent</span><span class="o">=</span><span class="n">child</span><span class="p">;</span>
</span><span class='line'>              <span class="n">child</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">parent</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">PrioQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">AdjustUp</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">start</span><span class="o">&lt;</span><span class="n">end</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">child</span><span class="o">=</span><span class="n">end</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">parent</span><span class="o">=</span><span class="p">(</span><span class="n">child</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>          <span class="k">while</span><span class="p">((</span><span class="n">parent</span><span class="o">&gt;=</span><span class="n">start</span><span class="p">)</span><span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="n">parent</span><span class="p">]</span><span class="o">&gt;</span><span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">]))</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>                  <span class="n">T</span> <span class="n">temp</span><span class="o">=</span><span class="n">q</span><span class="p">[</span><span class="n">parent</span><span class="p">];</span>
</span><span class='line'>                  <span class="n">q</span><span class="p">[</span><span class="n">parent</span><span class="p">]</span><span class="o">=</span><span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">];</span>
</span><span class='line'>                  <span class="n">q</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
</span><span class='line'>                  <span class="n">child</span><span class="o">=</span><span class="n">parent</span><span class="p">;</span>
</span><span class='line'>                  <span class="n">parent</span><span class="o">=</span><span class="p">(</span><span class="n">child</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">PrioQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Append</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">IsFull</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="c1">//throw std::Overflow;</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;overflow&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>         <span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">size</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>      <span class="n">q</span><span class="p">[</span><span class="n">size</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="k">this</span><span class="o">-&gt;</span><span class="n">AdjustUp</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span><span class="c1">//ATTENTION: n-1</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">PrioQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Serve</span><span class="p">(</span><span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">IsEmpty</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="c1">//throw std::Underflow;</span>
</span><span class='line'>          <span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">x</span><span class="o">=</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>      <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">q</span><span class="p">[</span><span class="n">size</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>      <span class="n">q</span><span class="p">[</span><span class="n">size</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="n">size</span><span class="o">--</span><span class="p">;</span>
</span><span class='line'>      <span class="k">this</span><span class="o">-&gt;</span><span class="n">AdjustDown</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="c1">//ATTENTION: n-1</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;After AdjustDown:&quot;</span><span class="o">&lt;&lt;</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="n">q</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="n">q</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>7 Quicksort 170</h3>

<p>Despite this slow worst-case running time Θ(n<sup>2)</sup> , quicksort is often <strong>the best practical choice</strong> for sorting because it is remarkably efficient on the average: its expected running time is <em>Θ(n lg n)</em>, and the <strong>constant factors hidden in the <em>Θ(n lg n)</em> notation are quite small</strong>.</p>

<h3>7.1 Description of quicksort 170</h3>

<p>Divide-and-conquer paradigm</p>

<ul>
<li>Divide: element A[q] and subarrays on the left and right, s.t. left &lt;= A[q] &lt;= right</li>
<li>Conquer: recursively sort left and right</li>
<li>Combine: NULL</li>
</ul>


<figure class='code'><figcaption><span>quickSort.cxx</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="kt">void</span> <span class="n">qSort</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">midVal</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">e</span><span class="p">];</span>
</span><span class='line'>          <span class="c1">// partition</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">e</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">midVal</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="kt">int</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">];</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
</span><span class='line'>                  <span class="n">j</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">qSort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">2</span><span class="p">);</span>
</span><span class='line'>          <span class="n">qSort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>7.2 Performance of quicksort 174</h4>

<ul>
<li>Worst-case partitioning: the partitioning routine produces one subproblem with <em>n-1</em> elements and one with <em>0</em> elements.

<ul>
<li>T(n) = T(n-1) + T(0) + Θ(n)</li>
<li>Θ(n<sup>2)</sup></li>
</ul>
</li>
<li>Best-case partitioning: even possible split

<ul>
<li>T(n) = 2T(n/2) + Θ(n)</li>
<li>Θ(n lg n)</li>
</ul>
</li>
<li>Balanced partitioning: Any split of constant proportionality yields a recursion tree of depth Θ(lg n), where the cost at each level is O(n).</li>
<li>Average case: PARTITION produces a mix of “good” and “bad” splits.

<ul>
<li>TODO</li>
</ul>
</li>
</ul>


<h4>7.3 A randomized version of quicksort 179</h4>

<p>pick the flag in the partition routine randomly (exchange with the one at the rear)</p>

<h4>7.4 Analysis of quicksort 180</h4>

<h3>8 Sorting in Linear Time 191</h3>

<p><strong>comparison sorts</strong>: merge sort, heapsort, and quicksort sharing, <strong>must make Ω(n lg n) comparisons in the worst case</strong> to sort <em>n</em> elements.</p>

<p>However, counting sort, radix sort, and bucket sort&#8230;</p>

<h4>8.1 Lower bounds for sorting 191</h4>

<h4>8.2 Counting sort 194</h4>

<p>counting sort assumes that the input consists of integers in a small range</p>

<p>Create an extra array to record the occurrence of these number and put them back into a new array as the result. We usually use counting sort when we have k = O(n), in which case the running time is Θ(n).</p>

<h4>8.3 Radix sort 197</h4>

<p>TODO? 感觉像counting sort，只不过是存了整个数，而不是数数的个数</p>

<p><a href="http://cubic.org/docs/radix.htm">Radix sort tutorial</a></p>

<ul>
<li><em>source</em>: List of bytes</li>
<li><em>source_n</em>: number of bytes to sort</li>
<li><em>dest[256]</em>: 256 lists of bytes. each list should have enough space to hold source_n elements.</li>
</ul>


<p>a pseudo-code would sort the list this way:</p>

<pre><code>for i=0 to source_n do
   dest[source[i]].append(source[i])
</code></pre>

<h4>8.4 Bucket sort 200</h4>

<p>bucket sort assumes that the input is generated by a random process that distributes elements uniformly and independently over the interval [0, 1).</p>

<p>Bucket sort divides the interval [0, 1) into n equal-sized subintervals, or buckets, and then distributes the n input numbers into the buckets. Since the inputs are uniformly and independently distributed over [0, 1), we do not expect many numbers to fall into each bucket. To produce the output, we simply sort the numbers in each bucket (e.g. insertion sort) and then go through the buckets in order, listing the elements in each.</p>

<p>Θ(n)</p>

<h3>9 Medians and Order Statistics 213</h3>

<p><strong>Selection problem</strong> selects <em>i-st</em> smallest number among a set <em>A</em> of <em>n</em> (distinct) numbers</p>

<h4>9.1 Minimum and maximum 214</h4>

<p>How to find the min in A? Best way is to iterate it once (<em>n-1</em> comparisons).</p>

<p>How to find min and max simultaneously? In fact, we can find both the minimum and the maximum using at most 3<em>n/2 comparisons. 每次取一对，自己先比较，然后大的跟max比，小的跟min比，总共只需要比3</em>n/2次。</p>

<h4>9.2 Selection in expected linear time 215</h4>

<figure class='code'><figcaption><span>randomizedSelect.cxx</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>  <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">int</span> <span class="n">randomizedSelect</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">randomizedPatition</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">)</span> <span class="p">;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">partition</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">)</span> <span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// ----------------------------------------------------------------------------</span>
</span><span class='line'>  <span class="c1">// select i-st largest number from A[p] to A[r]</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">randomizedSelect</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="n">r</span><span class="p">)</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="n">p</span><span class="p">];</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">q</span> <span class="o">=</span> <span class="n">randomizedPatition</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">r</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">q</span><span class="o">-</span><span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">k</span><span class="p">)</span> <span class="c1">// the pivot value is the answer</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="n">q</span><span class="p">];</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">)</span> <span class="c1">// on the left</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">randomizedSelect</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>      <span class="k">else</span>            <span class="c1">// on the right</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">randomizedSelect</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">q</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="n">k</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="c1">// ----------------------------------------------------------------------------</span>
</span><span class='line'>  <span class="c1">// get the index of the number in the middle </span>
</span><span class='line'>  <span class="c1">// s.t. subarray on the left &lt;= A[index] &lt;= subarray on the right</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">randomizedPatition</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span><span class="o">%</span><span class="p">(</span><span class="n">p</span><span class="o">-</span><span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">double</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">r</span><span class="p">];</span> <span class="n">A</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">partition</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">r</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="c1">// ----------------------------------------------------------------------------</span>
</span><span class='line'>  <span class="c1">// pick A[r] as the flag</span>
</span><span class='line'>  <span class="c1">// i for the left array &lt;= A[r]</span>
</span><span class='line'>  <span class="c1">// j for iterating the whole array </span>
</span><span class='line'>  <span class="c1">// finally, exchange A[r] in the middle</span>
</span><span class='line'>  <span class="c1">// return the new middle index</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">partition</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">r</span><span class="p">];</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">p</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="o">++</span> <span class="n">i</span><span class="p">;</span>
</span><span class='line'>              <span class="kt">double</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">];</span> <span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="kt">double</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">r</span><span class="p">];</span> <span class="n">A</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="c1">// ----------------------------------------------------------------------------</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="kt">double</span> <span class="n">A</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">8</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">0</span><span class="p">};</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span><span class='line'>      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">randomizedSelect</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>E[T(n)] = O(n)</p>

<h4>9.3 Selection in worst-case linear time 220</h4>

<p>O(n)</p>

<h2>III Data Structures</h2>

<ul>
<li>Data structures: techniques for representing finite dynamic sets and manipulating them on a computer.</li>
<li>Dynamic-set operations: <strong>CR(U)D 大小前后</strong>: insert, search, delete, max, min, predecessor, successor.</li>
<li>Dictionary: a dynamic set supporting insert, delete, and test membership.</li>
<li>2 categories of operations

<ul>
<li>queries</li>
<li>modifying operations</li>
</ul>
</li>
</ul>


<h3>10 Elementary Data Structures 232</h3>

<h4>10.1 Stacks and queues 232</h4>

<h5>Stack</h5>

<figure class='code'><figcaption><span>stack.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Stack</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">IsFull</span><span class="p">()</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Top</span><span class="p">(</span><span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Push</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="n">T</span> <span class="n">Pop</span><span class="p">()</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Clear</span><span class="p">()</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Sequential Stack</h5>

<figure class='code'><figcaption><span>seqstack.cxx</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;stack.h&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">SeqStack</span><span class="o">:</span><span class="k">public</span> <span class="n">Stack</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">SeqStack</span><span class="p">(</span><span class="kt">int</span> <span class="n">mSize</span><span class="p">);</span>
</span><span class='line'>      <span class="o">~</span><span class="n">SeqStack</span><span class="p">()</span> <span class="p">{</span><span class="k">delete</span> <span class="p">[]</span><span class="n">s</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">top</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsFull</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">top</span> <span class="o">==</span> <span class="n">maxTop</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">Top</span><span class="p">(</span><span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>         <span class="c1">//return the top element in x</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">Push</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="n">T</span> <span class="n">Pop</span><span class="p">();</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">Clear</span><span class="p">()</span> <span class="p">{</span> <span class="n">top</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;}</span>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">top</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">maxTop</span><span class="p">;</span>
</span><span class='line'>      <span class="n">T</span> <span class="o">*</span><span class="n">s</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">SeqStack</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">SeqStack</span><span class="p">(</span><span class="kt">int</span> <span class="n">mSize</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">maxTop</span> <span class="o">=</span> <span class="n">mSize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="n">mSize</span><span class="p">];</span>
</span><span class='line'>      <span class="n">top</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SeqStack</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Top</span><span class="p">(</span><span class="n">T</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">IsEmpty</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Empty&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">x</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">top</span><span class="p">];</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SeqStack</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Push</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">IsFull</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Overflow&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">s</span><span class="p">[</span><span class="o">++</span><span class="n">top</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">T</span> <span class="n">SeqStack</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Pop</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">IsEmpty</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Underflow&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">s</span><span class="p">[</span><span class="n">top</span><span class="o">--</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>SeqStackTest.cxx</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;seqstack.h&quot;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">SeqStack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">S</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">S</span><span class="p">.</span><span class="n">IsEmpty</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">S</span><span class="p">.</span><span class="n">IsFull</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">S</span><span class="p">.</span><span class="n">Push</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>          <span class="n">S</span><span class="p">.</span><span class="n">Top</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">S</span><span class="p">.</span><span class="n">IsFull</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span>  <span class="n">S</span><span class="p">.</span><span class="n">Pop</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Queue</h5>

<figure class='code'><figcaption><span>queue.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Queue</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">IsFull</span><span class="p">()</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Front</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">EnQueue</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="n">T</span> <span class="n">DeQueue</span><span class="p">()</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Clear</span><span class="p">()</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Sequential Queue</h5>

<figure class='code'><figcaption><span>seqqueue.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;queue.h&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">SeqQueue</span><span class="o">:</span><span class="k">public</span> <span class="n">Queue</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">SeqQueue</span><span class="p">(</span><span class="kt">int</span> <span class="n">mSize</span><span class="p">);</span>
</span><span class='line'>      <span class="o">~</span><span class="n">SeqQueue</span><span class="p">()</span> <span class="p">{</span> <span class="k">delete</span> <span class="p">[]</span> <span class="n">q</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">front</span> <span class="o">==</span> <span class="n">rear</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsFull</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="n">rear</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">front</span><span class="p">;}</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">Front</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">EnQueue</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="n">T</span> <span class="n">DeQueue</span><span class="p">();</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">Clear</span><span class="p">()</span> <span class="p">{</span> <span class="n">front</span> <span class="o">=</span> <span class="n">rear</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;}</span>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">front</span><span class="p">,</span> <span class="n">rear</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">maxSize</span><span class="p">;</span>
</span><span class='line'>      <span class="n">T</span> <span class="o">*</span><span class="n">q</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">SeqQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">SeqQueue</span><span class="p">(</span><span class="kt">int</span> <span class="n">mSize</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">maxSize</span> <span class="o">=</span> <span class="n">mSize</span><span class="p">;</span>
</span><span class='line'>      <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="n">maxSize</span><span class="p">];</span>
</span><span class='line'>      <span class="n">front</span> <span class="o">=</span> <span class="n">rear</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SeqQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Front</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">IsEmpty</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Empty&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="n">front</span><span class="p">];</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SeqQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">EnQueue</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">IsFull</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Overflow&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">q</span><span class="p">[(</span><span class="n">rear</span><span class="o">=</span><span class="p">(</span><span class="n">rear</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">maxSize</span><span class="p">)]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">T</span> <span class="n">SeqQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">DeQueue</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">IsEmpty</span><span class="p">())</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Underflow&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">T</span> <span class="n">x</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="n">front</span><span class="p">];</span>
</span><span class='line'>      <span class="n">front</span> <span class="o">=</span> <span class="p">(</span><span class="n">front</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">maxSize</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>10.2 Linked lists 236</h4>

<h5>Linear List</h5>

<figure class='code'><figcaption><span>linearlist.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">LinearList</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">int</span> <span class="n">GetLength</span><span class="p">()</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Find</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>            <span class="c1">//return element x with index i</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">int</span> <span class="n">Search</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>                   <span class="c1">//if x is found, return its index, else -1</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">)</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>                 <span class="c1">//insert x at element Ai.</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Delete</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>                      <span class="c1">//delete element Ai</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">Update</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">)</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>                 <span class="c1">//update element Ai with x</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">)</span><span class="k">const</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>     <span class="c1">//ouput the list to the stream</span>
</span><span class='line'>  <span class="k">protected</span><span class="o">:</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">ElemNum</span><span class="p">;</span>                                        <span class="c1">//element number in the list</span>
</span><span class='line'>  <span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Single List</h5>

<figure class='code'><figcaption><span>singlelist.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;iostream&quot;</span>
</span><span class='line'>  <span class="cp">#include &quot;linearlist.h&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">SingleList</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Node</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">private</span><span class="o">:</span>
</span><span class='line'>          <span class="n">T</span> <span class="n">element</span><span class="p">;</span>
</span><span class='line'>          <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">friend</span> <span class="k">class</span> <span class="nc">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">SingleList</span><span class="o">:</span><span class="k">public</span> <span class="n">LinearList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">public</span><span class="o">:</span>
</span><span class='line'>          <span class="n">SingleList</span><span class="p">(){</span> <span class="n">head</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;}</span>
</span><span class='line'>          <span class="o">~</span><span class="n">SingleList</span><span class="p">();</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">GetLength</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Find</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">Search</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Delete</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Update</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">void</span> <span class="n">Clear</span><span class="p">();</span>
</span><span class='line'>          <span class="kt">void</span> <span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="k">private</span><span class="o">:</span>
</span><span class='line'>          <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::~</span><span class="n">SingleList</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">GetLength</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Find</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="n">x</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Search</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">;</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span>
</span><span class='line'>              <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span>
</span><span class='line'>              <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">r</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">q</span> <span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>          <span class="n">r</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>          <span class="n">r</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">)</span> <span class="o">++</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Delete</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">))</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Underflow!&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">q</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>              <span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>              <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">q</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">)</span> <span class="o">--</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Update</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Clear</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">SingleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>SingleListTest.cxx</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;singlelisti.h&quot;</span>
</span><span class='line'>  <span class="cp">#include &quot;stdio.h&quot;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">SingleList</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">LA</span><span class="p">;</span>
</span><span class='line'>      <span class="n">SingleList</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">LB</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">LA</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">LB</span><span class="p">.</span><span class="n">GetLength</span><span class="p">(),</span> <span class="mi">4</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LA</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class='line'>      <span class="n">Intersection</span><span class="p">(</span><span class="n">LA</span><span class="p">,</span> <span class="n">LB</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LA</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Double List</h5>

<figure class='code'><figcaption><span>doublelist.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;linearlist.h&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">DoubleList</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Node</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">private</span><span class="o">:</span>
</span><span class='line'>          <span class="n">T</span> <span class="n">element</span><span class="p">;</span>
</span><span class='line'>          <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">last</span><span class="p">,</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">friend</span> <span class="k">class</span> <span class="nc">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">DoubleList</span><span class="o">:</span><span class="k">public</span> <span class="n">LinearList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">public</span><span class="o">:</span>
</span><span class='line'>          <span class="n">DoubleList</span><span class="p">(){</span> <span class="n">head</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;}</span>
</span><span class='line'>          <span class="o">~</span><span class="n">DoubleList</span><span class="p">();</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">GetLength</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Find</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">int</span> <span class="n">Search</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Delete</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">bool</span> <span class="n">Update</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>          <span class="kt">void</span> <span class="n">Clear</span><span class="p">();</span>
</span><span class='line'>          <span class="kt">void</span> <span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="k">private</span><span class="o">:</span>
</span><span class='line'>          <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::~</span><span class="n">DoubleList</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">GetLength</span><span class="p">()</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Find</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="n">x</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Search</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">;</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span>
</span><span class='line'>              <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span>
</span><span class='line'>              <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">r</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>          <span class="n">r</span><span class="o">-&gt;</span><span class="n">last</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>          <span class="n">r</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span><span class="o">-&gt;</span><span class="n">last</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">r</span><span class="o">-&gt;</span><span class="n">last</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">last</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span><span class="o">-&gt;</span><span class="n">last</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>          <span class="n">r</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span><span class="o">-&gt;</span><span class="n">last</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">)</span> <span class="o">++</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Delete</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">))</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Underflow!&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>              <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">p</span><span class="o">-&gt;</span><span class="n">last</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">last</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">last</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="p">)</span> <span class="o">--</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Update</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">ElemNum</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Exceed Bounds!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Clear</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>          <span class="n">head</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">DoubleList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>DoubleListTest.cxx</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include &quot;singlelisti.h&quot;</span>
</span><span class='line'>  <span class="cp">#include &quot;stdio.h&quot;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">SingleList</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">LA</span><span class="p">;</span>
</span><span class='line'>      <span class="n">SingleList</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">LB</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">LA</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">LB</span><span class="p">.</span><span class="n">GetLength</span><span class="p">(),</span> <span class="mi">4</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LA</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LB</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LA</span><span class="p">.</span><span class="n">Delete</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span><span class='line'>      <span class="n">LA</span><span class="p">.</span><span class="n">Output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>10.3 Implementing pointers and objects 241</h4>

<ul>
<li>How do we implement pointers and objects in languages that do not provide them?

<ol>
<li>A multiple-array representation of objects

<ul>
<li>for example, <code>next[]</code>, <code>key[]</code>, <code>prev[]</code> can store the values and indexes</li>
</ul>
</li>
<li>A single-array representation of objects

<ul>
<li>for example, store triple &lt; key, next, prev > in one single array</li>
</ul>
</li>
</ol>
</li>
<li>Allocating and freeing objects

<ul>
<li>a <strong>garbage collector</strong> is responsible for determining which objects are unused.</li>
<li>We keep the free objects in a singly linked list, which we call the <strong>free list</strong>. Each object in the representation is either in list L or in the free list, but not in both. Free list acts like a stack. 在free list的head操作</li>
</ul>
</li>
</ul>


<h4>10.4 Representing rooted trees 246</h4>

<ul>
<li>Binary trees</li>
<li>Rooted trees with unbounded branching

<ul>
<li><strong>left-child, right-sibling representation</strong>

<ol>
<li><em>x.left-child</em> points to the leftmost child of node <em>x</em></li>
<li><em>x.right-sibling</em> points to the sibling of <em>x</em> immediately to its right.</li>
<li>If node <em>x</em> has no children, then <em>x.left-child</em> = NIL, and if node x is the rightmost child of its parent, then <em>x.right-sibling</em> = NIL.</li>
</ol>
</li>
</ul>
</li>
<li>Other tree representations. Many are possible.</li>
</ul>


<figure class='code'><figcaption><span>binarytree.hpp</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
<span class='line-number'>199</span>
<span class='line-number'>200</span>
<span class='line-number'>201</span>
<span class='line-number'>202</span>
<span class='line-number'>203</span>
<span class='line-number'>204</span>
<span class='line-number'>205</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">struct</span> <span class="n">BTNode</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="p">()</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">lChild</span> <span class="o">=</span> <span class="n">rChild</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>          <span class="n">lChild</span> <span class="o">=</span> <span class="n">rChild</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">l</span><span class="p">,</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">r</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
</span><span class='line'>          <span class="n">lChild</span> <span class="o">=</span> <span class="n">l</span><span class="p">;</span>
</span><span class='line'>          <span class="n">rChild</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">T</span> <span class="n">element</span><span class="p">;</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">lChild</span><span class="p">,</span> <span class="o">*</span><span class="n">rChild</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">BinaryTree</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">BinaryTree</span><span class="p">()</span> <span class="p">{</span><span class="n">root</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;}</span>
</span><span class='line'>      <span class="o">~</span><span class="n">BinaryTree</span><span class="p">()</span> <span class="p">{};</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">IsEmpty</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">Clear</span><span class="p">();</span>
</span><span class='line'>      <span class="kt">bool</span> <span class="n">Root</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">MakeTree</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">left</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">right</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">BreakTree</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">left</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">right</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">PreOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">));</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">InOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">));</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">PostOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">));</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">Size</span><span class="p">();</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">Copy</span><span class="p">();</span>
</span><span class='line'>  <span class="k">protected</span><span class="o">:</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">root</span><span class="p">;</span>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">Clear</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="o">&amp;</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">PreOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">InOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">PostOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">Size</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'>      <span class="kt">void</span> <span class="n">Clear</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'>      <span class="k">friend</span> <span class="k">class</span> <span class="nc">BIterator</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Root</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span><span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">x</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">;</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">MakeTree</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">left</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">right</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">||</span> <span class="o">&amp;</span><span class="n">left</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">right</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">left</span><span class="p">.</span><span class="n">root</span><span class="p">,</span> <span class="n">right</span><span class="p">.</span><span class="n">root</span><span class="p">);</span>
</span><span class='line'>      <span class="n">left</span><span class="p">.</span><span class="n">root</span><span class="o">=</span><span class="n">right</span><span class="p">.</span><span class="n">root</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">BreakTree</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">left</span><span class="p">,</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">right</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">root</span><span class="o">||&amp;</span><span class="n">left</span><span class="o">==&amp;</span><span class="n">right</span><span class="o">||</span><span class="n">left</span><span class="p">.</span><span class="n">root</span><span class="o">||</span><span class="n">left</span><span class="p">.</span><span class="n">root</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="n">x</span><span class="o">=</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">;</span>
</span><span class='line'>      <span class="n">left</span><span class="p">.</span><span class="n">root</span><span class="o">=</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">;</span> <span class="n">right</span><span class="p">.</span><span class="n">root</span><span class="o">=</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">;</span>
</span><span class='line'>      <span class="k">delete</span> <span class="n">root</span><span class="p">;</span>
</span><span class='line'>      <span class="n">root</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">PreOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">))</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">PreOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">root</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">PreOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">Visit</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">);</span>
</span><span class='line'>          <span class="n">PreOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">);</span>
</span><span class='line'>          <span class="n">PreOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">InOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">))</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">InOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">root</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">InOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">InOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">);</span>
</span><span class='line'>          <span class="n">Visit</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">);</span>
</span><span class='line'>          <span class="n">InOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">PostOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">))</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">PostOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">root</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">PostOrder</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span> <span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span><span class="n">x</span><span class="p">),</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">PostOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">);</span>
</span><span class='line'>          <span class="n">PostOrder</span><span class="p">(</span><span class="n">Visit</span><span class="p">,</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">);</span>
</span><span class='line'>          <span class="n">Visit</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Size</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">Size</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Size</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">t</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">Size</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">)</span> <span class="o">+</span> <span class="n">Size</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Copy</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">t</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">q</span><span class="o">=</span><span class="k">new</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">);</span>
</span><span class='line'>      <span class="n">q</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="o">=</span><span class="n">Copy</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">);</span>
</span><span class='line'>      <span class="n">q</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="o">=</span><span class="n">Copy</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">q</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Clear</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">Clear</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Clear</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">Clear</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">);</span>
</span><span class='line'>          <span class="n">Clear</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">);</span>
</span><span class='line'>          <span class="k">delete</span> <span class="n">t</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">BIterator</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="n">T</span><span class="o">*</span> <span class="n">GoFirst</span><span class="p">(</span><span class="k">const</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">bt</span><span class="p">)</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="n">T</span><span class="o">*</span> <span class="n">Next</span><span class="p">()</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Traverse</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="k">const</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">bt</span><span class="p">);</span>
</span><span class='line'>  <span class="k">protected</span><span class="o">:</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">r</span><span class="p">,</span> <span class="o">*</span><span class="n">current</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kt">void</span> <span class="n">BIterator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Traverse</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">Visit</span><span class="p">)(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">),</span> <span class="k">const</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">bt</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">T</span><span class="o">*</span> <span class="n">p</span><span class="o">=</span><span class="n">GoFirst</span><span class="p">(</span><span class="n">bt</span><span class="p">);</span>
</span><span class='line'>      <span class="k">while</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">Visit</span><span class="p">(</span><span class="o">*</span><span class="n">p</span><span class="p">);</span>
</span><span class='line'>          <span class="n">p</span><span class="o">=</span><span class="n">Next</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">IInOrder</span><span class="o">:</span><span class="k">public</span> <span class="n">BIterator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">IInOrder</span><span class="p">(</span><span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">bt</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mSize</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">r</span><span class="o">=</span><span class="n">bt</span><span class="p">.</span><span class="n">root</span><span class="p">;</span>
</span><span class='line'>          <span class="n">current</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>          <span class="n">s</span><span class="o">=</span><span class="k">new</span> <span class="n">SeqStack</span><span class="o">&lt;</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="o">&gt;</span><span class="p">(</span><span class="n">mSize</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">T</span><span class="o">*</span> <span class="n">GoFirst</span><span class="p">(</span><span class="k">const</span> <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">bt</span><span class="p">);</span>
</span><span class='line'>      <span class="n">T</span><span class="o">*</span> <span class="n">Next</span><span class="p">();</span>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="n">SeqStack</span><span class="o">&lt;</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*&gt;</span> <span class="o">*</span><span class="n">s</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h3>11 Hash Tables 253</h3>

<ul>
<li>A hash table is an effective data structure for implementing dictionaries.

<ul>
<li>searching worst-case Θ(n)</li>
<li>expected O(1)</li>
<li>Instead of using the key as an array index directly, the array index is computed from the key.</li>
</ul>
</li>
</ul>


<h4>11.1 Direct-address tables 254</h4>

<p>Assume that universe U of keys is reasonably small, and no two elements have the same key. Store <em>x</em> at <em>T[x.key]</em> or at the place which <em>T[x.key]</em> points to. (Even storing the key is not necessary.)</p>

<p><strong>slot</strong>: position in the array (direct-address table)</p>

<h4>11.2 Hash tables 256</h4>

<ul>
<li>What if universe U is large? namely, K of keys stored in a dictionary is much smaller than the universe U of all possible keys?</li>
<li>hash function! element is stored in slot <em>h(k)</em> instead of <em>key</em> directly

<ul>
<li>h: U -> {0, 1, &#8230;, m-1}</li>
<li>An element with key <em>k</em> <strong>hashes</strong> to slot <em>h(k)</em>.</li>
</ul>
</li>
<li>Problem: <strong>collision</strong>: two keys may hash to the same slot.

<ul>
<li>Collision resolution by chaining, insert at the head

<ul>
<li> Given a hash table T with m slots that stores n elements, we define the <strong><em>load factor α</em></strong> for T as n/m, that is, <strong><em>the average number of elements stored in a chain</em></strong>.</li>
<li>Worst-case: Θ(n) + T(compute hash)</li>
<li>Average-case: <strong>simple uniform hashing</strong> Any given element is equally likely to hash into any of the m slots, independently of where any other element has hashed to.

<ul>
<li>Unsuccessful, Θ(1+α) n个元素m个slot，期望是每个slot有n/m个元素</li>
<li>Successful, Θ(1+α)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<h4>11.3 Hash functions 262</h4>

<ul>
<li>What makes a good hash function? less collisions

<ul>
<li>satisfies (approximately) the assumption of simple uniform hashing.</li>
<li>Hash values are independent of any patterns that might exist in the data.</li>
</ul>
</li>
<li>Interpreting keys as natural numbers</li>
<li>Different ways:

<ol>
<li><strong>division method</strong>. h(k) = k mod m.</li>
<li><strong>multiplication method</strong>. h(k) = ⦏m(kA mod 1)⦎, “kA mod 1” means the fractional part of kA, that is, kA - ⦏kA⦎. (A is a constant, 0 &lt; A &lt; 1) Knuth suggests that A = 0.618</li>
<li><strong>universal hashing</strong>. select the hash function at random from a carefully designed class of functions.</li>
</ol>
</li>
</ul>


<h4>11.4 Open addressing 269</h4>

<ul>
<li><strong>Open addressing</strong>: all elements occupy the hash table itself. <strong>No chaining</strong>. load factor α can never exceed 1.

<ul>
<li>We <strong>compute the sequence of slots to be examined by probing until we find an empty slot</strong>. The probing sequence has not to be &lt; 0, 1, &#8230;, m-1 > with Θ(n), but <strong>depends upon the key being inserted</strong>. To determine which slots to probe, we extend the hash function to include the probe number (starting from 0) as a second input.  &lt; h(k,0), h(k,1), &#8230;, h(k,m-1) >.</li>
<li>注意，此处不能标记删除的slot为NIL，因为这样一来就无法读到存在其后面部分的散列 值了。解决方法是，用DELETED取代NIL.</li>
<li><strong><em>uniform hashing</em></strong>: the probe sequence of each key is equally likely to be any of the m! permutations of &lt; 0, 1, &#8230;, m-1 >.

<ul>
<li>linear probing

<ul>
<li>h(k,i) = (h&#8217;(k)+i) mod m</li>
<li>problem: primary <strong>clustering</strong></li>
</ul>
</li>
<li>quadratic probing

<ul>
<li>h(k,i) = (h&#8217;(k) + c1*i + c2*i<sup>2)</sup> mod m</li>
<li>problem: secondary clustering</li>
</ul>
</li>
<li>double hashing

<ul>
<li>one of the best</li>
<li>h(k,i) = (h1(k) + i*h2(k)) mod m</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<h4>11.5 Perfect hashing 277</h4>

<ul>
<li><strong>Perfect hashing</strong>: O(1) memory accesses are required to perform a search in the worst case.

<ul>
<li>two levels of hashing with universal hashing at each level.</li>
<li>By choosing the first-level hash function well, we can limit the expected total amount of space used to O(n)</li>
<li>TODO 证明很复杂的样子</li>
</ul>
</li>
</ul>


<p><a href="http://www.cplusplus.com/reference/map/map/">C++ std::map的使用</a></p>

<h3>12 Binary Search Trees 286</h3>

<ul>
<li>Performance

<ul>
<li>Best-case Θ(lgn)</li>
<li>Average-case Θ(lgn)</li>
<li>Worst-case Θ(n)</li>
</ul>
</li>
<li>Improve? red-black trees(height O(lg n)), B-trees(secondary storage)</li>
</ul>


<figure class='code'><figcaption><span>bstree.hpp</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="cp">#include&quot;dynamic.h&quot;</span>
</span><span class='line'>  <span class="cp">#include&quot;binarytree.h&quot;</span>
</span><span class='line'>  <span class="c1">//二叉搜索树：</span>
</span><span class='line'>  <span class="c1">//所有节点的关键字不同，此树要么为空，要么：</span>
</span><span class='line'>  <span class="c1">//1. 左不空，则左所有&lt;根</span>
</span><span class='line'>  <span class="c1">//2. 右不空，则右所有&gt;根</span>
</span><span class='line'>  <span class="c1">//3. 左右子树均为二叉搜索树</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">BSTree</span><span class="o">:</span><span class="k">public</span> <span class="n">DynamicSet</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span><span class="o">:</span>
</span><span class='line'>      <span class="n">BSTree</span><span class="p">()</span> <span class="p">{</span><span class="n">root</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;}</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Search_recursion</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Search_iteration</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Insert_recursion</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Insert_iteration</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Remove</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">protected</span><span class="o">:</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">root</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">private</span><span class="o">:</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Search</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span><span class='line'>      <span class="n">ResultCode</span> <span class="n">Insert</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Search_recursion</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">Search</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Search</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">p</span><span class="p">)</span> <span class="k">return</span> <span class="n">NotPresent</span><span class="p">;</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="k">return</span> <span class="n">Search</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="k">return</span> <span class="n">Search</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">return</span> <span class="n">Success</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Search_iteration</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="o">=</span><span class="n">root</span><span class="p">;</span>
</span><span class='line'>      <span class="k">while</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span> <span class="k">return</span> <span class="n">Success</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">NotPresent</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Insert_recursion</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span><span class="c1">//ATTENTION: situation when root is NULL</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="p">)</span> <span class="k">return</span> <span class="n">Insert</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="k">else</span> <span class="n">root</span><span class="o">=</span><span class="k">new</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Insert</span><span class="p">(</span><span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">p</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span> <span class="c1">//ATTENTION: situation when root is NULL</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>         <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="o">==</span><span class="nb">NULL</span><span class="p">)</span>
</span><span class='line'>         <span class="p">{</span>
</span><span class='line'>             <span class="n">p</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="o">=</span><span class="k">new</span> <span class="n">BTNode</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>             <span class="k">return</span> <span class="n">Success</span><span class="p">;</span>
</span><span class='line'>         <span class="p">}</span>
</span><span class='line'>         <span class="k">else</span> <span class="k">return</span> <span class="n">Insert</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>         <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="o">==</span><span class="nb">NULL</span><span class="p">)</span>
</span><span class='line'>         <span class="p">{</span>
</span><span class='line'>             <span class="n">p</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="o">=</span><span class="k">new</span> <span class="n">BTNode</span><span class="p">(</span><span class="n">T</span><span class="p">);</span>
</span><span class='line'>             <span class="k">return</span> <span class="n">Success</span><span class="p">;</span>
</span><span class='line'>         <span class="p">}</span>
</span><span class='line'>         <span class="k">else</span> <span class="k">return</span> <span class="n">Insert</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">return</span> <span class="n">Duplicate</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Insert_iteration</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">p</span><span class="o">=</span><span class="n">root</span><span class="p">,</span> <span class="o">*</span><span class="n">q</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="n">q</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span> <span class="k">return</span> <span class="n">Duplicate</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">p</span><span class="o">=</span><span class="k">new</span> <span class="n">BTNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">root</span><span class="p">)</span> <span class="n">root</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="n">q</span><span class="o">-&gt;</span><span class="n">element</span><span class="p">)</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">lChild</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">else</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">rChild</span><span class="o">=</span><span class="n">p</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">Success</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="n">ResultCode</span> <span class="n">BSTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Remove</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>     <span class="c1">// TODO</span>
</span><span class='line'>      <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>12.1 What is a binary search tree? 286</h4>

<p><strong>binary-search-tree property: left &lt;= middle &lt;= right</strong>: Let x be a node in a binary search tree. If y is a node in the left subtree of x, then y.key &lt;= x.key. If y is a node in the right subtree of x, then y.key >= x.key.</p>

<p>How to print out keys in sorted order? <strong>inorder tree walk</strong> (other walks: <strong>preorder</strong>, <strong>postorder</strong>)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'>  <span class="kt">void</span> <span class="n">inorderTreeWalk</span><span class="p">(</span><span class="n">Node</span><span class="o">*</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">inorderTreeWalk</span><span class="p">(</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
</span><span class='line'>          <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="p">.</span><span class="n">key</span><span class="p">;</span>
</span><span class='line'>          <span class="n">inorderTreeWalk</span><span class="p">(</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)};</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>
Θ(n)</p>

<h4>12.2 Querying a binary search tree 289</h4>

<ul>
<li>Iteration is faster in <em>Java, C, Python&#8230;</em> Recursion is fairly expensive compared to iteration (in general) because it requires the allocation of a new stack frame.</li>
<li>Recursion <em>might</em> be faster in <em>functional programming language</em>.</li>
</ul>


<h5>Searching</h5>

<ul>
<li>Recursive version: Me? search left? search right?</li>
<li>Iteration version: Use pointer p. p->key? p=p->left? p=p->right?</li>
</ul>


<h5>Min and Max</h5>

<p>left-most leaf and right-most leaf</p>

<h5>Successor and predecessor</h5>

<ul>
<li>Successor: If x has right subtree, return max(x.right), else find in parents.</li>
<li>Predecessor: If x has left subtree, return max(x.left), else find in parents.</li>
</ul>


<h4>12.3 Insertion and deletion 294</h4>

<h4>12.4 Randomly built binary search trees 299</h4>

<h3>13 Red-Black Trees 308</h3>

<h4>13.1 Properties of red-black trees 308</h4>

<ul>
<li>A BST with one extra <strong>color</strong> bit of storage per node.</li>
<li>Red-black properties:

<ol>
<li>Every node is either red or black.</li>
<li>The root is black.</li>
<li>Every leaf (NIL) is black.</li>
<li>If a node is red, then both its children are black.</li>
<li>For each node, all simple paths from the node to descendant leaves contain the same number of black nodes.</li>
</ol>
</li>
<li>sentinel T.nil for all all pointers to NIL (replacing leaves and parent of root)</li>
<li><strong>black-height</strong> of node x: number of black nodes on the path from (not including) x to a leaf</li>
<li><strong>black-height</strong> of a tree: black-height of its root</li>
<li>A red-black tree with n <strong>internal</strong> nodes has height at most 2*log(n+1)</li>
</ul>


<h4>13.2 Rotations 312</h4>

<ul>
<li><strong>Rotation</strong>: A local operation in a search tree that preserves the binary-search-tree property.

<ul>
<li>left-rotation: counter-clockwise

<ul>
<li>set y</li>
<li>turn y&#8217;s left subtree into x&#8217;s right subtree</li>
<li>link x&#8217;s parent to y</li>
<li>put x on y&#8217;s left</li>
</ul>
</li>
<li>right-rotation: clockwise</li>
</ul>
</li>
</ul>


<h4>13.3 Insertion 315</h4>

<ol>
<li>insert node <strong>red</strong> <em>z</em> into tree T (Property 5)</li>
<li>auxiliary procedure RBinsertFixup(T,z) to re-color and rotate.Ω

<ul>
<li>Property 2 is violated if <em>z</em> is the root</li>
<li>Property 4 is violated if <em>z</em>&#8217;s parent is red.

<ul>
<li>Case 1: <em>z</em>&#8217;s uncle <em>y</em> is red: z上两层反色</li>
<li>Case 2: <em>z</em>&#8217;s uncle <em>y</em> is black and <em>z</em> is a right child: around z left-rotate</li>
<li>Case 3: <em>z</em>&#8217;s uncle <em>y</em> is black and <em>z</em> is a left child: around z&#8217;s parent right-rotate + z上两层反色</li>
</ul>
</li>
<li>O(lgn)</li>
</ul>
</li>
</ol>


<h4>13.4 Deletion 323</h4>

<ul>
<li>RBTransplant(T, u, v): replace subtree u with subtree v. mind NIL node as parent and leaves</li>
</ul>


<p>TODO</p>

<h3>14 Augmenting Data Structures 339</h3>

<h4>14.1 Dynamic order statistics 339</h4>

<ul>
<li><strong>Rank of an element</strong>: its position in the linear order of the set</li>
<li><strong>Order-statistic tree</strong>: RBT + every node has <em>x.size</em> = number of nodes in its subtree, including the NIL sentinel

<ul>
<li><em>x.size</em> = <em>x.left.size</em> + <em>x.right.size</em> + 1</li>
</ul>
</li>
</ul>


<h4>14.2 How to augment a data structure 345</h4>

<ol>
<li>Choose an underlying data structure.</li>
<li>Determine additional information to maintain in the underlying data structure.</li>
<li>Verify that we can maintain the additional information for the basic modifying operations on the underlying data structure.</li>
<li>Develop new operations.</li>
</ol>


<h4>14.3 Interval trees 348</h4>

<p>RBT + operations on dynamic sets of intervals.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/26/xie-zai-2012shi-jie-mo-ri-zhi-hou/">迟到的世界末日</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-26T07:56:00-08:00" pubdate data-updated="true">Dec 26<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/12/26/xie-zai-2012shi-jie-mo-ri-zhi-hou/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>卖个关子，先谈“反求诸己”，文章的最后再谈“世界末日”、为什么世界末日会“迟到”。</p>

<p>“反求诸己”是一件让人乐此不疲但又烦躁不堪的事情。思考人类终极命运这种问题难道不是令人沮丧的么？人固有一死，早死晚死都得死；尽管我们一再强调，有些尸体是重于泰山的，但“你会死”这种陈述终归不是什么好话。打情骂俏、调戏人的和反调戏的除外。可是，即便是这样，我们还是对生命的爱与执着这种“反熵(anti-entropy)”的事情乐此不疲，不是么？就好像，尽管李安大师《少年派的奇幻之旅》血腥重口版很可能是事实，我们仍然选择相信浪漫励志版，不是么？</p>

<p>这篇文章是我个人的年终总结。</p>

<h2>一</h2>

<p>这些年来每一年我都至少会写一篇文章，反思我这一年又做了哪些特二的事情，下一年还想做哪些不那么二的事情。</p>

<ul>
<li>2009:<a href="http://user.qzone.qq.com/66542118/blog/1233947326">可堪回首月明中 —— 我的大一上年度总结：抒情与思索</a></li>
<li>2010: <a href="http://user.qzone.qq.com/66542118/blog/1282297569">1.读下去 写下去</a>，<a href="http://user.qzone.qq.com/66542118/blog/1282635925">2.无知即力量 早选择早超生</a>，<a href="http://user.qzone.qq.com/66542118/blog/1282728122">3.士不可不弘毅 一切为了CMU</a></li>
<li>2011: <a href="http://user.qzone.qq.com/66542118/blog/1294034387">Farewell to 2010 – A Year Encompassed by Chaos</a></li>
<li>2012: <a href="http://user.qzone.qq.com/66542118/blog/1325429981">Farewell to 2011 – Good Morning, My Evolution!</a></li>
</ul>


<p>也许更早的时候我也写过不少东西，只不过都删除掉了，没有存档。看着这些个人总结，我突然特别好奇：大学四年的不同时期，我都在想些什么？</p>

<p>首先，生活一直在别处，我似乎不是那么的开心。</p>

<p>这是可以理解的，一来要直面自己做得不对的事情，二来这些文字大多落笔于寒冬，而寒冬本身就是令人很绝望的存在。除夕辞旧迎新其实是有象征意味的，只有将过往的积郁都扫除掉，打上一剂名叫希望的鸡血，才能勇敢地重装上阵。所以当我回味百里屠苏“屠绝鬼气，苏醒人魂”的时候，内心难免会感动不已。</p>

<p>值得注意的是，“生活在别处”有别于“逃离”，“逃离”是一种可悲的心态，你总以为“如果我在其他的地方，我会活得更好”，但是，<strong>你我都知道，境由心生，你在哪和你活的好不好无关丝毫</strong>。“生活在别处”应该是一种直面、自嘲，更重要的是，是一种向往，对人类内心深处亘古不变的真理的向往，这些向往是什么？是<strong>爱、怜悯、自豪、同情、恐惧、牺牲和荣耀</strong>。没有了这些向往，我们追求的不是爱，而是情欲；我们的苦难里没有任何人失去真正有价值的东西；我们的胜利里没有任何让我们热血沸腾的奇迹；最为糟糕的是，没有了怜悯和同情，我们的哀伤很可能是无病呻吟，不值一提；那些让心儿为之颤抖的，不是灵魂，而是内分泌。</p>

<p>其次，我一直在抱怨自己读书太少。</p>

<p>我逐渐患上了一种奇特的拖延症。多年前，我成为了Sir Winston Churchill的<a href="http://www.yingyudaxue.com/books/advanced-english/speech-on-hitlers-invasion-of-the-u-s-s-r">&#8220;I have only one purpose, the destruction of Hitler, and my life is much simplified thereby.&#8221;</a>这句话的脑残粉。从那以后，每当我打算专心做一件事情的时候，其他的所有都会被抛诸脑后。可惜的是，这些事都不是一天两天能够做完的，而我记性又不大好，这就导致，每当这些事情完成的时候，那些被抛诸脑后的事情也就已然类似于抛猪脑后了。读书少是表现之一，所以，多年来的这些总结都在反复提醒自己多读多写。</p>

<p>另外一个表现是 </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/12/26/xie-zai-2012shi-jie-mo-ri-zhi-hou/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/26/bu-tan-sheng-huo/">请不要和我谈生活，我没有生活</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-26T07:53:00-08:00" pubdate data-updated="true">Dec 26<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/12/26/bu-tan-sheng-huo/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>隔壁的Bryan老兄每次寒暄 how&#8217;s it going? 的时候他也许会感到很奇怪，为啥对面这小兄弟怎么连招呼都打得一愣一愣的。而对面的小兄弟我，每次都本能地将其反应成“最近过得怎样？”，然后进一步考虑，该如何回答这个”特殊疑问句“，总不能每次都说&#8221;Not bad&#8221;吧；但实际的情况是，还真没有什么好说的，而且这句话本来就是“how are you?”类型的句子，是不需要认真回答的，一个hi/hello/hey 足矣。</p>

<p>每次父母找我聊天，问东问西，总以为我在国外的生活应该是丰富多彩的，如果我问题回答地不够给力，他们就会反复感叹类似于好桑心啊好桑心，都没有共同语言啊，老了啦，之类的感叹。这让我十分汗颜，不是我不跟你们讲，而是我真没有什么好讲的，我不是在看书就是在刷微博就是在吃东西就是在去吃东西的路上就是梦里面吃东西，但这些事务并不是什么可以可以诉说甚至引以为豪的事情。大家往往以旅游、靓照、趴踢、大餐为乐为豪，是，确实很欢乐，我也超级喜欢，但是，我只是觉得，这些对我来说不重要，至少对于现在的我说不重要。</p>

<p>我也知道我眼界不甚开阔，很狭隘。雅礼是一所非常好的学校，我在这里遇到了无数精英，这群精英不是来自Ivy就是来自Stanford, Berkeley, 就是Oxford, Cambridge, 就是清北浙上交复旦等大牛校的帅哥靓女。是，他们寒暑假可以上到青藏高原下到日本海沟，南到极地游轮抢拍鲸鱼北到阿拉斯加入住爱斯基摩的雪屋。是，他们博闻广志风流倜傥，有太多太多值得我学习的地方，我对他们、对这个世界敬畏有加。但这丝毫不妨碍我作为国关人的自豪与自嘲，但这丝毫不妨碍我这辈子对家乡的思念和出逃，但这丝毫不妨碍我对我所热爱的选择的偏执与傲娇。</p>

<p>我从来就不曾想过出国是一件舒舒服服安享幸福生活的事情，过去没有，现在没有，将来也不会有！请不要和我谈生活，我没有生活。请不要问我后不后悔，我只怕我不能够爱得深切，我只怕我不能够屁颠屁颠地、但却矢志不渝地自鸣得意地自命不凡地把我自己选择的路，充盈地，走下去。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2012/12/19/oop2/">OOP Final Term Notes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-19T02:01:00-08:00" pubdate data-updated="true">Dec 19<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/12/19/oop2/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<p>如果自己不定义constructor，C++会默认使用空的constructor。但是如果自己声明了，就一定要把定义写出来。</p>

<hr />

<p>Reuse and recycle. Maintain a <strong>free list</strong> a pool of currently unused objects and reuse rather than recreate when possible.</p>

<hr />

<p>How to measure run time of a program?</p>

<p>Clocks advance in discrete clicks called <strong>jiffies</strong>. A jiffy on the Zoo linux machines is one millisecond (0.001 seconds) long.</p>

<p>the first run of a program is likely to be slower than subsequent runs because of caching.</p>

<p>class members are private by default.</p>

<pre><code>if(!in) {...}
</code></pre>

<p>to test if an istream object in is open for reading. Here, the <code>istream</code> object is coerced to a <code>bool</code> because operator <code>bool()</code> is defined inside the streams package.</p>

<hr />

<p>operator⊕ overload</p>

<h3>a⊕b can be ambiguous</h3>

<ul>
<li>Global function: operator⊕(a, b).</li>
<li>Member function: a.operator⊕(b).</li>
</ul>


<p>It could mean either, and the compiler sees if either one matches. If both match, it reports an ambiguity.</p>

<p>We use a global form of operator&lt;&lt; because the left hand operator is of predefined type ostream, and we can’t add member functions to that class.</p>

<h3>++, &#8211;</h3>

<ol>
<li><p>prefix unary operators</p></li>
<li><p>class member: <code>operator++()</code></p></li>
<li><p>global: <code>operator++(ClassA a)</code></p></li>
<li><p>postfix unary operators</p></li>
</ol>


<p>They <strong>must be</strong> like</p>

<ul>
<li>class member: <code>operator++(int)</code></li>
<li>global: <code>operator++(ClassA a, int)</code></li>
</ul>


<p>Here <code>int</code> is dummy.</p>

<hr />

<p>两种定义类的cast的方式 cast A to B</p>

<pre><code>class A {};
class B{
    public:
    B(A&amp; a) {
        cout &lt;&lt; "constructor cast called" &lt;&lt; endl;
    }
};
</code></pre>

<p>conversion function cast</p>

<pre><code>class B {};
class A {
    public:
    operator B() {
        cout &lt;&lt; "operator B cast called" &lt;&lt; endl;
        return *new B;
    } 
};
</code></pre>

<p>注意没有返回类型，讲述自己怎么被cast成其他类</p>

<hr />

<p>Polymorphism</p>

<pre><code>class B     { public: int f(); ... };
class U : B { int f(); ... };
class V : B { int f(); ... };
</code></pre>

<p><code>B* bp</code> can point to B, U, and V, but bp->f() always refers to B::f()</p>

<p>Solution: Polymorphic derivation</p>

<pre><code>   class B     { public: virtual int f(); ... };
   class U : B { virtual int f(); ... };
   class V : B { virtual int f(); ... };
   B* bp;
</code></pre>

<p>A virtual function is dispatched at run time to the class of the actual object.</p>

<ul>
<li>bp->f() refers to U::f() if bp points to a U.</li>
<li>bp->f() refers to V::f() if bp points to a V.</li>
<li>bp->f() refers to B::f() if bp points to a B.</li>
</ul>


<p>Here, the type refers to the allocation type.</p>

<p>其实，只有基类加virtual都是可以的</p>

<hr />

<p>Calling constructors implicitly</p>

<pre><code>MyClass b;
MyClass b(4);
new MyClass(4);
</code></pre>

<p>Calling constructors explicitly</p>

<pre><code>MyClass(4);
throw Fatal("Error message"); 
</code></pre>

<hr />

<p>A <strong>pure virtual function</strong> is sometimes called a <strong>promise</strong>. Instances of B are never created and B::f() does not exist. It tells the compiler that a construct like bp->f() is legal. The compiler requires every derived class to contain a method f().</p>

<p>An <strong>abstract class</strong> is a class with one or more pure virtual functions. An abstract class <strong>cannot be instantiated</strong>. It can <strong>only be used as the base</strong> for another class. The <strong>destructor can never be a pure virtual function but will generally be virtual</strong>.</p>

<p>A <strong>pure abstract class</strong> is one where all member functions are pure virtual (except for the destructor) and there are no data members, Pure abstract classes define an <strong>interface</strong> `a la Java. An interface allows user-supplied code to integrate into a large system.</p>

<hr />

<p>A global function is one that takes zero or more explicit arguments. Example: f(a, b) has two explicit arguments a and b.</p>

<p>A member function is one that <strong>takes an implicit argument</strong> along with zero or more explicit arguments.
Example: c.g(a, b) has two explicit arguments a and b and implicit argument c.
Example: d->g(a, b) has two explicit arguments a and b and implicit argument *d.</p>

<p>Note that an omitted implicit argument defaults to (<em>this), which must make sense in the context.
Example: If g is a member function of class MyClass, then within MyClass, the call g(a, b) defaults to (</em>this).g(a,b) (or equivalently this->g(a,b)).</p>

<hr />

<p>Good function prototypes</p>

<p>Pass by reference instead of by pointer. A pass by pointer may imply optional and the user may pass a null pointer:</p>

<pre><code>Method(const Class *value); // value can be null Cannot pass a null pointer via reference
Method(const Class &amp;value); // value cannot be null
</code></pre>

<p>Always include “const” unless the calling function needs to modify the state of passed reference</p>

<p>Do not pass simple data types (int, char, bool) by by const reference … it does not do anything good and may actually inhibit some optimizations</p>

<hr />

<p>Casting!</p>

<pre><code>int x = 5;
double y0 = (int) x;
double y1 = static_cast&lt;int&gt;(x);
</code></pre>

<p>Do not use C style casting it is difficult to find</p>

<hr />

<p>Iterators
Iterators are like generalized pointers into containers.
Most pointer operations *, ->, ++, ==, !=, etc. work with iterators.</p>

<ul>
<li><code>begin()</code> returns an iterator pointing to the first element of the vector.</li>
<li><code>end()</code> returns an iterator pointing past the last element of the vector.</li>
</ul>


<hr />

<p><code>class B : A { ... };</code> specifies private derivation of B from A.</p>

<hr />

<p>Protected class members are inaccessible from outside the class (like private) but accessible within a derived class (like public).</p>

<hr />

<p>ln16.pdf</p>

<ul>
<li>The declaration context is the context in which the <strong>referent</strong> of x appears.</li>
<li>The reference context is the context in which the <strong>reference</strong> x appears.</li>
</ul>


<hr />

<p>Template functions and specialization</p>

<p>Template functions
Definition:</p>

<p>   template <class X> void swapargs(X&amp; a, X&amp; b) {</p>

<pre><code> X temp;
 temp = a;
 a = b;
 b = temp;
</code></pre>

<p>}</p>

<p>Use:</p>

<pre><code> int i,j;
 double x,y;
 char a, b;
 swapargs(i,j);
 swapargs(x,y);
 swapargs(a,b);
</code></pre>

<p>Specialization
Definition:</p>

<pre><code> template &lt;&gt; void swapargs(int&amp; a, int&amp; b) {
   // different code
 }
</code></pre>

<p>This overrides the template body for int arguments.</p>

<hr />

<p><strong>Non-inline template functions must be compiled and linked for each instantiation</strong></p>

<ul>
<li>(a) Put all template function definitions in the .hpp file along with the class definition.</li>
<li>(b) Put template function definition in the .hpp file and explicitly instantiate all the possible types.
  e.g. <code>template class FlexArray&lt;int&gt;; template class FlexArray&lt;double&gt;; ...</code></li>
</ul>


<hr />

<p>C casts. C uses the same syntax for different kinds of casts.</p>

<ul>
<li><strong>Value casts</strong> convert from one representation to another, partially preserving semantics. Often called <em>conversions</em>.</li>
<li><strong>Pointer casts</strong> leave representation alone but change interpretation of pointer.</li>
</ul>


<p>C++ casts</p>

<p>C++ has four kinds of casts.</p>

<ol>
<li>Static cast includes value casts of C. Tries to preserve semantics, but not always safe. Applied at compile time.</li>
<li>Dynamic cast Applies only to pointers and references to objects. Preserves semantics. Applied at run time. [See demo 18c-Dynamic cast.]</li>
<li>Reinterpret cast is like the C pointer cast. Ignores semantics. Applied at compile time.</li>
<li>Const cast Allows const restriction to be overridden. Applied at compile time.</li>
</ol>


<p>notation</p>

<pre><code>int x; myBase* b; const int c;
static_cast&lt;double&gt;(x);
dynamic_cast&lt;myDerived*&gt;(b);
reinterpret_cast&lt;int*&gt;(p);
const_cast&lt;int&gt;(c);
</code></pre>

<hr />

<p><code>explicit</code> keyword inhibit implicit casts.</p>

<pre><code>class B;
class A {
public:
    A(){};
    explicit A(B&amp; b) { cout&lt;&lt; "constructed A from B\n"; }
};
</code></pre>

<hr />

<p>C-style exception solution uses status returns</p>

<p>The C library functions generally report exceptions by returning <em>status values</em> or <em>error codes</em>.</p>

<p>C++ exception mechanism</p>

<p>Deriving your own exception classes from std::exception</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;exception&gt;
using namespace std;
class myexception: public exception {
  virtual const char* what() const throw()
    { return "My exception happened"; }
} myex;  // declares class and instantiates it
int main () {
  try {
    throw myex;
  }
  catch (exception&amp; e) {
    cout &lt;&lt; e.what() &lt;&lt; endl;
  }
return 0; }
</code></pre>

<p>each kind of exception should <strong>throw it’s own type of object</strong>.</p>

<hr />

<p>rethrow</p>

<p><code>throw e;</code> will throw a new copy of e</p>

<p><code>throw;</code> will not throw a new copy of e, but e itself</p>

<hr />

<p><strong>All exceptions should be caught and dealt with explicitly.</strong> That terminate() is called to abort the process is a bad thing when exceptions are not caught or thrown by the destructor.</p>

<hr />

<p>multiple inheritance</p>

<p>class A: public B, protected C {&#8230;};</p>

<p><em>diamond pattern</em>, A->B, A->C, {B,C}->D</p>

<hr />

<p>Good Reference Books</p>

<p>C Programming Language, Effective C++, More Effective C++, Design Patterns</p>

<hr />

<p>test</p>

<pre><code>make test&amp;&amp; ./test
</code></pre>

<hr />

<p>STL</p>

<p>Common wisdom on the internet says <strong>not to inherit from STL containers</strong>.</p>

<blockquote><p>STL containers are not intended to be used as base classes (their destructors are deliberately non-virtual); deriving from a container is a common mistake.”</p></blockquote>

<hr />

<p>Two kinds of derivation</p>

<p>C++ supports two distinct kinds of derivation:</p>

<ul>
<li>Simple derivation.</li>
<li><p>Polymorphic derivation.</p>

<p>  class A { &#8230; };
  class B : public A { &#8230; };</p></li>
</ul>


<p>We say B is derived from A, and B inherits members from A. Each B object has an A object embedded within it.<strong>The derivation is simple if no members of A are virtual; otherwise it is polymorphic.</strong></p>

<hr />

<p>What are the problems of polymorphic derivation? (ln13.pdf)</p>

<p>Every polymorphic base class (containing even one virtual function) adds a <strong>runtime type tag</strong> to each instance.</p>

<p>This costs in both time and space.</p>

<ul>
<li>Time: Each call to a virtual function goes through a <strong>run-time dispatch table (the vtable)</strong>.</li>
<li>Space: Each instance of a polymorphic object contains a <strong>type tag</strong>, which takes extra space.</li>
<li>Every polymorphic base class should have a virtual destructor.</li>
</ul>


<hr />

<p>General OO principles</p>

<ol>
<li><strong>Encapsulation</strong> <em>Data members should be private.</em> Public accessing functions should be defined only when absolutely necessary. This minimizes the ways in which one class can depend on the representation of another.</li>
<li><strong>Narrow interface</strong> <em>Keep the interface (set of public functions) as simple as possible</em>; include only those functions that are of direct interest to client classes. Utility functions that are used only to implement the interface should be kept private. This minimizes the chance for information to leak out of the class or for a function to be used inappropriately.</li>
<li><strong>Delegation</strong> A class that is called upon to perform a task often delegates that task (or part of it) to one of its members who is an expert.</li>
</ol>


<hr />

<p>What is a design pattern?</p>

<p>A pattern has four essential elements.</p>

<ol>
<li>A pattern name.</li>
<li>The problem, which describes when to apply the pattern.</li>
<li>The solution, which describes the elements, relations, and responsibilities.</li>
<li>The consequences, which are the results and tradeoffs.</li>
</ol>


<h2>Design Patterns</h2>

<ul>
<li><em>Adaptor</em> matches interface between toolkit classes and applications.</li>
<li><em>Indirection</em> decouples high-level applications from manipulations of low-level devices.</li>
<li><em>Proxy</em> could interface to anything, is like indirection and controls access via a placeholder</li>
<li><em>Polymorphism</em> enables multiple implementations from the abstraction</li>
<li><em>Controller</em> handles system events</li>
<li><em>Bridge</em> is generalized indirection and decouples interface from implementation. Used when both application and implementation are polymorphic.</li>
<li><em>Subject-observer</em>: keep updated states of the subject with observers.</li>
<li><em>Singleton</em> enforces only one instance of a class</li>
<li><em>Strategy</em> defines a family of algorithms, encapsulates each one, and makes them interchangeable at run time.

<ul>
<li>The Bridge pattern is a structural pattern (HOW DO YOU BUILD A SOFTWARE COMPONENT?).</li>
<li>The Strategy pattern is a dynamic pattern (HOW DO YOU WANT RUN A BEHAVIOUR IN SOFTWARE?).</li>
<li>The syntax is similar but the goal are differents:

<ul>
<li>Bridge: you can split the hierarchy of interface and class join him with an abstract reference</li>
<li>Strategy: you have more ways for doing an operation; with strategy you can choice the algorithm at run-time and you can modify a single Strategy without a lot of side-effects at compile-time;</li>
</ul>
</li>
</ul>
</li>
<li><em>Factory method</em> defines an interface for creating an object but lets the implementation decide which class to instantiate.</li>
</ul>


<h3>Factory</h3>

<figure class='code'><figcaption><span>ImageReaderFactory.java</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ImageReaderFactory</span> <span class="o">{</span>
</span><span class='line'>      <span class="kd">public</span> <span class="kd">static</span> <span class="n">ImageReader</span> <span class="nf">imageReaderFactoryMethod</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">is</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">ImageReader</span> <span class="n">product</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>          <span class="kt">int</span> <span class="n">imageType</span> <span class="o">=</span> <span class="n">determineImageType</span><span class="o">(</span><span class="n">is</span><span class="o">);</span>
</span><span class='line'>          <span class="k">switch</span> <span class="o">(</span><span class="n">imageType</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>              <span class="k">case</span> <span class="n">ImageReaderFactory</span><span class="o">.</span><span class="na">GIF</span><span class="o">:</span>
</span><span class='line'>                  <span class="n">product</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GifReader</span><span class="o">(</span><span class="n">is</span><span class="o">);</span>
</span><span class='line'>                  <span class="k">break</span><span class="o">;</span>
</span><span class='line'>              <span class="k">case</span> <span class="n">ImageReaderFactory</span><span class="o">.</span><span class="na">JPEG</span><span class="o">:</span>
</span><span class='line'>                  <span class="n">product</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JpegReader</span><span class="o">(</span><span class="n">is</span><span class="o">);</span>
</span><span class='line'>                  <span class="k">break</span><span class="o">;</span>
</span><span class='line'>              <span class="c1">//...</span>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>          <span class="k">return</span> <span class="n">product</span><span class="o">;</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Proxy</h3>

<figure class='code'><figcaption><span>Real_Img_on_SystemA_and_Proxy_on_SystemB.java</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">interface</span> <span class="nc">Image</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">displayImage</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//on System A </span>
</span><span class='line'><span class="kd">class</span> <span class="nc">RealImage</span> <span class="kd">implements</span> <span class="n">Image</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="n">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Constructor</span>
</span><span class='line'><span class="cm">     * @param FILENAME</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">RealImage</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">FILENAME</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">filename</span> <span class="o">=</span> <span class="n">FILENAME</span><span class="o">;</span>
</span><span class='line'>        <span class="n">loadImageFromDisk</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Loads the image from the disk</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">loadImageFromDisk</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Loading   &quot;</span> <span class="o">+</span> <span class="n">filename</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Displays the image</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">displayImage</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Displaying &quot;</span> <span class="o">+</span> <span class="n">filename</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//on System B </span>
</span><span class='line'><span class="kd">class</span> <span class="nc">ProxyImage</span> <span class="kd">implements</span> <span class="n">Image</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="n">RealImage</span> <span class="n">image</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Constructor</span>
</span><span class='line'><span class="cm">     * @param FILENAME</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">ProxyImage</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">FILENAME</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">filename</span> <span class="o">=</span> <span class="n">FILENAME</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Displays the image</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">displayImage</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">image</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>           <span class="n">image</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RealImage</span><span class="o">(</span><span class="n">filename</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="n">image</span><span class="o">.</span><span class="na">displayImage</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">class</span> <span class="nc">ProxyExample</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>   <span class="cm">/**</span>
</span><span class='line'><span class="cm">    * Test method</span>
</span><span class='line'><span class="cm">    */</span>
</span><span class='line'>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">final</span> <span class="n">Image</span> <span class="n">IMAGE1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProxyImage</span><span class="o">(</span><span class="s">&quot;HiRes_10MB_Photo1&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="kd">final</span> <span class="n">Image</span> <span class="n">IMAGE2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProxyImage</span><span class="o">(</span><span class="s">&quot;HiRes_10MB_Photo2&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">IMAGE1</span><span class="o">.</span><span class="na">displayImage</span><span class="o">();</span> <span class="c1">// loading necessary</span>
</span><span class='line'>        <span class="n">IMAGE1</span><span class="o">.</span><span class="na">displayImage</span><span class="o">();</span> <span class="c1">// loading unnecessary</span>
</span><span class='line'>        <span class="n">IMAGE2</span><span class="o">.</span><span class="na">displayImage</span><span class="o">();</span> <span class="c1">// loading necessary</span>
</span><span class='line'>        <span class="n">IMAGE2</span><span class="o">.</span><span class="na">displayImage</span><span class="o">();</span> <span class="c1">// loading unnecessary</span>
</span><span class='line'>        <span class="n">IMAGE1</span><span class="o">.</span><span class="na">displayImage</span><span class="o">();</span> <span class="c1">// loading unnecessary</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  <ul class="pager">
    
    <li class="previous"><a href="/blog/page/3/">&larr; Older</a></li>
    
    <li><a href="/blog/archives">Blog Archives</a></li>
    
    <li class="next"><a href="/">Newer &rarr;</a></li>
    
  </ul>
</div>
<aside class="sidebar-nav span3">
  
    <section class="well">
  <script src="/javascripts/onmouseoverpuncsky.js" type="text/javascript"> </script>
  <img onmouseover="enlight(this)" onmouseout="darken(this)" src="/puncsky-gray.png" alt="puncsky" style="max-width:100%;">
  <h4>Puncsky</h4>
  <p><i>who strives on and lives to strive</i></p>
  <p><a href="https://www.github.com/puncsky/">Github</a></p>
</section>
<section class="well">
  <ul id="recent_posts" class="nav nav-list">
    <li class="nav-header">Recent Posts</li>
    
      <li class="post">
        <a href="/blog/2013/09/22/lessons-learned-from-dev-just2do/">Lesson Learned from Development of Just2do</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/15/essential-c-sharp-advanced/">Essential C# 4.0: Advanced</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/14/h-quincy/">H-Quincy: Fair Scheduling for Hadoop Clusters</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/14/scaling-memcache-at-facebook/">Call-of-Duty Weekend Reading: Scaling Memcache at Facebook (NSDI &#8216;13)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/07/trips-to-mt-rainier-and-san-juan-islands/">Trip to Mt. Rainier and San Juan Islands</a>
      </li>
    
  </ul>
</section>
<section class="well">
	<div id="clustrmaps-widget"></div><script type="text/javascript">var _clustrmaps = {'url' : 'http://www.puncsky.com', 'user' : 1100959, 'server' : '2', 'id' : 'clustrmaps-widget', 'version' : 1, 'date' : '2013-06-24', 'lang' : 'en', 'corners' : 'square' };(function (){ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'http://www2.clustrmaps.com/counter/map.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);})();</script><noscript><a href="http://www2.clustrmaps.com/user/92810cc9f"><img src="http://www2.clustrmaps.com/stats/maps-no_clusters/www.puncsky.com-thumb.jpg" alt="Locations of visitors to this page" /></a></noscript>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo" class="page-footer"><hr>
<p>
  Copyright &copy; 2013 - Tian -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'puncsky';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
