
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Chord: A Scalable Peer-to-peer Lookup Service for Internet Applications - CS Notebook</title>
  <meta name="author" content="Tian">

  
  <meta name="description" content="MIT PDOS, paper, slides 1. Problem A lookup protocol: How to locate the node that stores a data item in a dynamic P2P system with frequent node &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://puncsky.github.com/blog/2012/12/06/chord/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="CS Notebook" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">CS Notebook</a></h1>
  
    <h2>Just a notebook about life and computer</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:puncsky.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Chord: A Scalable Peer-to-peer Lookup Service for Internet Applications</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-06T06:29:00-05:00" pubdate data-updated="true">Dec 6<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><a href="http://pdos.lcs.mit.edu/chord/">MIT PDOS</a>, <a href="http://pdos.csail.mit.edu/papers/chord:sigcomm01/chord_sigcomm.pdf">paper</a>, <a href="http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=5&amp;cad=rja&amp;ved=0CGEQFjAE&amp;url=http%3A%2F%2Fpdos.csail.mit.edu%2Frtm%2Fslides%2Fsigcomm01.ppt&amp;ei=tYLAUNjmLoSt0AGb7YCoBw&amp;usg=AFQjCNHmlld_WDglWjj7TP_coYsk1O_l-A&amp;sig2=SO8yiWfEsi_V2VEI-F2pmw">slides</a></p>

<h3>1. Problem</h3>

<p><em>A lookup protocol</em>: How to locate the node that stores a data item in a dynamic P2P system with frequent node arrivals and departures? In other words, given a key, it maps the key onto a node.</p>

<!--more-->


<h3>2. Challenges</h3>

<ul>
<li>Scalability

<ul>
<li>Previous consistent hashing needs to know <strong>most</strong> other nodes</li>
</ul>
</li>
<li>Robustness</li>
<li>Efficiency

<ul>
<li>Centralized lookup (Napster): O(N)</li>
<li>Flooded queries (Gnutella): Worst case O(N)</li>
</ul>
</li>
<li>Simplicity</li>
</ul>


<h3>3. Solution</h3>

<p>Chord: Just <code>IPaddress Lookup(key)</code> service, no data storage.</p>

<p>Distributed Hash Table (DHT)</p>

<p><strong>Consistent Hashing</strong>: Key ID and Node ID are in the <strong>same ID space</strong> with SHA-1. A key is stored at is successor (node with next higher ID). For each node &#8230;</p>

<h4>Simple Lookup Algorithm (O(n))</h4>

<p>Each node picks a random ID in a circular numeric space, and supervises a region of ID space immediately following its ID. The data shall be stored in its successor.</p>

<pre><code>Lookup(my-id, key-id)
    n = my sucessor
    if my-id &lt; n &lt; key-id
        call Lookup(id) on node n   // next hop
    else
        return my successor         // done
</code></pre>

<h4>Lookup with finger tables (log(N))</h4>

<p>Finger i points to successor of n+2<sup>i.</sup></p>

<pre><code>Lookup(my-id, key)
    look in local finger table for highest node m s.t. my-id &lt; n &lt; key-id
    if n exists
        call Lookup(id) on node n   // next hop
    else
        return my successor         // done
</code></pre>

<p>How to join a new node? For example, join N36 (Node 36) between N25 and N40.</p>

<ol>
<li>Lookup(36) and get N40&#8217;s IP</li>
<li>N36 sets its own successor pointer point to N40</li>
<li>Copy keys 26~36 from N40 to N36</li>
<li>Set N25&#8217;s successor pointer point to N36, and update finger pointers in the background</li>
</ol>


<p>How to deal with failure (a node doesn&#8217;t know correct successor)?</p>

<ul>
<li>Successor lists. Each node knows <em>r</em> immediate successors.

<ul>
<li>Assume 1/2 of nodes fail.</li>
<li>P(successor list all dead) (1/2)<sup>r</sup></li>
<li>P(no broken nodes)=(1-(1/2)<sup>r)<sup>N</sup></sup></li>
</ul>
</li>
</ul>


<h4>Lookup with fault tolerance</h4>

<pre><code>Lookup(my-id, key-id)
    look in local finger table and sucessor-list for highest node n s.t. my-id &lt; n &lt; key-id
    if n exists
        call Lookup(id) on node n   // next hop
        if call failed
            remove n from finger table
            return Lookup(my-id, key-id)
    else return my sucessor         // done
</code></pre>

<h3>4. Conclusion</h3>

<p>Chord uses consistent hashing, distributed hash tables, and novel finger tables to provide lookup services for P2P systems. Each node maintains only O(logN) other nodes. The arrivals and departures acquire only O(log<sup>2</sup> N) messages. The successor list can deal with failure effectively. Chord is simple, scalable, and efficient.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Tian</span></span>

      








  


<time datetime="2012-12-06T06:29:00-05:00" pubdate data-updated="true">Dec 6<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/paper/'>Paper</a>, <a class='category' href='/blog/categories/review/'>Review</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://puncsky.github.com/blog/2012/12/06/chord/" data-via="" data-counturl="http://puncsky.github.com/blog/2012/12/06/chord/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/12/01/cells/" title="Previous Post: Cells: a virtual mobile smartphone architecture (SOSP '11)">&laquo; Cells: a virtual mobile smartphone architecture (SOSP '11)</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/12/06/cleanos/" title="Next Post: CleanOS: Limiting Mobile Data Exposure with Idle Eviction (OSDI'12)">CleanOS: Limiting Mobile Data Exposure with Idle Eviction (OSDI'12) &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/12/26/xie-zai-2012shi-jie-mo-ri-zhi-hou/">写在2012世界末日之后</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/23/careercup150/">Cracking the Coding Interview</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/22/clrs-3-selected/">CLRS 3: Selected</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/22/clrs-2-advanced/">CLRS 2: Advanced</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/22/clrs-1-basics/">CLRS 1: Basics</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Tian -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
